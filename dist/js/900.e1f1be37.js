(self["webpackChunkmy_portfolio"]=self["webpackChunkmy_portfolio"]||[]).push([[900],{89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n}},2420:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var i=n(4870),r=n(3396);const s=850;function o(){const t=(0,i.iH)(document.body.clientWidth<s);function e(){t.value=document.body.clientWidth<s}return(0,r.bv)((()=>window.addEventListener("resize",e))),(0,r.Ah)((()=>window.removeEventListener("resize",e))),{isMobile:t}}},4974:function(t,e,n){"use strict";n.d(e,{IF:function(){return u},c8:function(){return h},mO:function(){return c}});const i="#9acd32",r="#6cc7ce",s="#c55164",o="#b24e07",a="#d79926",l="#b83131",c=[{id:"self-taught",color:a,showGif:!0,name:"Landing page project",year:"2020",technologies:"HTML, CSS, JS, Waypoints",summary:"A standalone web page, created specifically for an educational organization as well as advertising campaign. It‚Äôs where a visitor ‚Äúlands‚Äù when they click on website's link, or ads. Here's a self-taught project I learned to improve my front-end skills, a page which is weirdy also named SelfTaught üì∞",challenges:["The first time I dig dive deep to multiple aspects of HTML, CSS"],githubUrl:"https://github.com/thugiang61/self-taught",webUrl:"https://thugiang61.github.io/self-taught"},{id:"music-player",color:r,showGif:!0,name:"Simple music player",year:"2021",technologies:"HTML, CSS, JS",summary:"A program brings music on your browers, which is simply built on 3 basic elements of a website: HTML, CSS and JS. If you want to listen to Daft Punk or Coldplay, go to this place! It has all general functionalities of a music software. I built this website mainly to explore deeper JS, and it's truly a magical programming language that can make a website highly dynamic üéß",challenges:["Self learned multiple useful functions of JS"],githubUrl:"https://github.com/thugiang61/music-player",webUrl:"https://thugiang61.github.io/music-player"},{id:"bulky-book-web",color:s,showGif:!0,name:"Bulky book web",year:"2021",technologies:"C#, .NET, MVC, SQL Server Express LocalDB",summary:"One thing you must know about me, I love reading book! And I know other people do too! Therefore, I made this website to help a user can manage his/ her favorite books. You can store every books you care about here, along with theirs attributes such as status, price, your ratings, ... This will help your reading becomes a lot easier and more managable üìñ",challenges:["Self learned newly released .NET version at that time: .NET 6.0"],githubUrl:"https://github.com/thugiang61/BulkyBookWeb2",webUrl:"https://bulky-book-web-2.azurewebsites.net"}],u=[{id:"api-customer-order",color:o,showGif:!1,name:"Api customer order",agency:"LogiVietfrance",year:"2022 - now",client:"SOGET SA",role:"Back-end developer",technologies:"C#, .NET, SQL, Newtonsoft, FluentValidation,...",summary:"This platform provides transmission and tracking system for transport orders at every stage of their journey. This solution is accessible either through web access or by directly integrating it with Transportation Management System (TMS) using an API key üöö",challenges:["Complicated business handling that intertweens between applications in TMS ","This is a very broad project that has been developing for more than 2 years and I had to analyze long document as well as wide range of code","Study logistics business and TMS as well as Soget ecosystem ","Working with quite limited tools because of safety reasons","Using an older version of .NET ","As one of the most important project of the company, the application must have a good level of security"]},{id:"customer-order-web",color:l,showGif:!1,name:"Customer order web",agency:"LogiVietfrance",year:"2022 - now",client:"SOGET SA",role:"Front-end developer",technologies:"HTML, SCSS, VueJS,  Buefy, Bulma, Keycloak",summary:"An interactive interface version of API customer order project. Developed collaboratively by¬†SOGET¬†and¬†S2Pweb, two primitive specialists in road and transport tracking, this innovative tool ensures seamless monitoring and management of a cargo throughout its entire route ü§ù",challenges:["Rebuild a new UI from scratch","Learn VueJS and Buefy on the way"]},{id:"plan-s",color:i,showGif:!1,name:"Plan-s web",agency:"LogiVietfrance",year:"2022",client:"Logi Railway",role:"Full-stack developer",technologies:"HTML, SCSS, ThreeJS, PDF, VueJS,  Buefy, Bulma, Firebase, .NET",summary:"This application is a tool where you can insert all the cagoes you want in order to analyze and get the most optimal way to load them on a container or barge. All loading plan will be generated on 3D model and you can interact with it as well as export the solution. This online software will help you plan your logistics easily and effectively üì¶",challenges:["The loading logic is very hard and requires advanced mathematics calculation","Learning TheeJS ro render models on the fly","Main front-end developer of this project"]}],h=c.concat(u)},7973:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var i=n(3396),r=n(7139);const s=t=>((0,i.dD)("data-v-41a3cbaa"),t=t(),(0,i.Cn)(),t),o={key:0},a=s((()=>(0,i._)("div",{class:"corner top-left-corner"},null,-1))),l=s((()=>(0,i._)("div",{class:"corner top-right-corner"},null,-1))),c=s((()=>(0,i._)("div",{class:"corner bottom-left-corner"},null,-1))),u=s((()=>(0,i._)("div",{class:"corner bottom-right-corner"},null,-1))),h=[a,l,c,u];var d={__name:"PreviewInfo",props:{height:String,width:String,color:String,showCorners:{type:Boolean,default:!1}},setup(t){const e=t,n=(0,i.Fl)((()=>`width: ${e.width}px; height: ${e.height}px;`)),s=(0,i.Fl)((()=>`background-color: ${e.color?e.color:"var(--preview-shadow-background-color)"};\n    `)),a=(0,i.Fl)((()=>`border: 1px solid ${e.color?e.color:"var(--border-color)"};`));return(e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"preview-shadow",style:(0,r.j5)(n.value+s.value)},[(0,i._)("div",{class:"preview",style:(0,r.j5)(n.value+a.value)},[t.showCorners?((0,i.wg)(),(0,i.iD)("div",o,h)):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default")],4)],4))}},f=n(89);const p=(0,f.Z)(d,[["__scopeId","data-v-41a3cbaa"]]);var g=p},7199:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});var i=n(3396),r=n(7139),s=n(4870),o={__name:"HeaderDot",props:["dotColor"],setup(t){const e=t,n=(0,i.Fl)((()=>`background-color: ${e.dotColor}`));return(t,e)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,r.j5)(n.value)},null,4))}},a=n(89);const l=(0,a.Z)(o,[["__scopeId","data-v-1f493ebf"]]);var c=l,u=n(2420);const h=t=>((0,i.dD)("data-v-7fd36204"),t=t(),(0,i.Cn)(),t),d={class:"ios-dots"},f={key:0,class:"header-title"},p={key:0},g={class:"nav-bar"},m=h((()=>(0,i._)("div",{class:"bar1"},null,-1))),y=h((()=>(0,i._)("div",{class:"bar2"},null,-1))),v=h((()=>(0,i._)("div",{class:"bar3"},null,-1))),w=[m,y,v],b=270,E="#fc6058",_="#fec20f",T="#2aca3e";var S={__name:"TheHeader",props:{showTitle:{type:Boolean,default:!1}},setup(t){const{isMobile:e}=(0,u.Z)(),n=(0,s.iH)(!1),o=(0,s.iH)(window.scrollY>b),a=(0,i.Fl)((()=>!e.value||e.value&&n.value));function l(){o.value=window.scrollY>b}return(0,i.bv)((()=>{document.addEventListener("scroll",l)})),(0,i.Ah)((()=>{document.removeEventListener("scroll",l)})),(l,u)=>{const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)({header:!0,sticky:o.value})},[(0,i._)("div",d,[(0,i.Wm)((0,s.SU)(c),{"dot-color":E}),(0,i.Wm)((0,s.SU)(c),{"dot-color":_}),(0,i.Wm)((0,s.SU)(c),{"dot-color":T})]),t.showTitle||o.value?((0,i.wg)(),(0,i.iD)("span",f,[(0,i.Wm)(h,{to:"/home#intro"},{default:(0,i.w5)((()=>[(0,s.SU)(e)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",p,"Hi, I'm ")),(0,i.Uk)("Giang Nguyen ")])),_:1})])):(0,i.kq)("",!0),(0,i._)("div",g,[a.value?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,r.C_)({"menu-list":!0,mobile:(0,s.SU)(e)})},[(0,i.Wm)(h,{to:"/home#intro",onClick:u[0]||(u[0]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Intro")])),_:1}),(0,i.Wm)(h,{to:"/home#about-me",onClick:u[1]||(u[1]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("About¬†me")])),_:1}),(0,i.Wm)(h,{to:"/home#past-projects",onClick:u[2]||(u[2]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Past¬†projects")])),_:1}),(0,i.Wm)(h,{to:"/home#contact-me",onClick:u[3]||(u[3]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Contact¬†me")])),_:1})],2)):(0,i.kq)("",!0),(0,s.SU)(e)?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,r.C_)({"menu-icon":!0,clicked:n.value}),onClick:u[4]||(u[4]=t=>n.value=!n.value)},w,2)):(0,i.kq)("",!0)])],2)}}};const I=(0,a.Z)(S,[["__scopeId","data-v-7fd36204"]]);var C=I},6376:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ap}});var i=n(3396),r=n(4870),s=n(9242),o=n(7199),a=n.p+"img/profile-picture.ea4cb0c3.jpg",l=n(7139),c=n(635),u={__name:"ThemeDot",props:["dotColor","themeName"],setup(t){const e=t,{getTheme:n,setTheme:r}=(0,c.Z)(),s=(0,i.Fl)((()=>`background-color: ${e.dotColor}`));function o(t){const e=n();e!==t&&r(t)}return(e,n)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,l.j5)(s.value),onClick:n[0]||(n[0]=e=>o(t.themeName))},null,4))}},h=n(89);const d=(0,h.Z)(u,[["__scopeId","data-v-6d06e4bd"]]);var f=d;const p=t=>((0,i.dD)("data-v-6119bbfd"),t=t(),(0,i.Cn)(),t),g=p((()=>(0,i._)("h2",null,"Persionalize theme",-1))),m={class:"theme-dots"},y=p((()=>(0,i._)("i",null,"*Theme settings will be saved for your next visit",-1))),v="#fff",w="#1b2d41",b="#6abaa3",E="#7e4c74";var _={__name:"PersonalizeTheme",setup(t){return(t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[g,(0,i._)("div",m,[(0,i.Wm)((0,r.SU)(f),{"dot-color":v,"theme-name":"white"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":w,"theme-name":"blue"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":b,"theme-name":"teal"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":E,"theme-name":"purple"})]),y],64))}};const T=(0,h.Z)(_,[["__scopeId","data-v-6119bbfd"]]);var S=T,I=n(7973);const C=t=>((0,i.dD)("data-v-8695510a"),t=t(),(0,i.Cn)(),t),A={key:0,class:"grid-layout intro-info"},D={key:0,class:"left-column center"},k=C((()=>(0,i._)("img",{src:a,alt:"profile-picture",class:"profile-picture"},null,-1))),N={class:"right-column center"},R=C((()=>(0,i._)("h1",null,"What I do",-1))),O=C((()=>(0,i._)("p",null,[(0,i.Uk)(" I study "),(0,i._)("b",null,"Software Engineer"),(0,i.Uk)(" and I'm on my way to become a professional "),(0,i._)("b",null,"Full-stack"),(0,i.Uk)(" developer ")],-1)));var L={__name:"IntroInfo",setup(t){const e=(0,r.iH)(!1);return(0,i.bv)((()=>e.value=!0)),(t,n)=>((0,i.wg)(),(0,i.j4)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("div",A,[e.value?((0,i.wg)(),(0,i.iD)("div",D,[k,(0,i.Wm)((0,r.SU)(S))])):(0,i.kq)("",!0),(0,i._)("div",N,[(0,i.Wm)((0,r.SU)(I.Z),{width:"340",height:"200","show-corners":""},{default:(0,i.w5)((()=>[R,O])),_:1})])])):(0,i.kq)("",!0)])),_:1}))}};const x=(0,h.Z)(L,[["__scopeId","data-v-8695510a"]]);var M=x;const P={id:"intro",class:"section-border-bottom"},U={key:0,class:"intro-title"},F={class:"intro-body"};var V={__name:"IntroSection",setup(t){const e=(0,r.iH)(!1);return(0,i.bv)((()=>e.value=!0)),(t,n)=>((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("h1",U,"Hi, I'm Giang Nguyen")):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",F,[(0,i.Wm)((0,r.SU)(o.Z)),(0,i.Wm)((0,r.SU)(M))])]))}};const B=(0,h.Z)(V,[["__scopeId","data-v-ee44d926"]]);var j=B,$=n(9057),H={__name:"TheToaster",props:{showToaster:{type:Boolean},isDanger:{type:Boolean,default:!1}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[t.showToaster?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)({notification:!0,success:!t.isDanger,danger:t.isDanger})},[(0,i.WI)(e.$slots,"default")],2)):(0,i.kq)("",!0)])),_:3}))}};const z=(0,h.Z)(H,[["__scopeId","data-v-0c00d57a"]]);var G=z,q=n(2420);const K=t=>((0,i.dD)("data-v-30de9d33"),t=t(),(0,i.Cn)(),t),W={id:"about-me",class:"grid-layout section-border-bottom secondary-background"},Q={class:"left-column",style:{padding:"20px"}},X=K((()=>(0,i._)("div",{class:"border-bottom"},[(0,i._)("h2",null,"More about me"),(0,i._)("p",null,[(0,i.Uk)(" I build "),(0,i._)("b",null,"user's interface"),(0,i.Uk)(" and love learning "),(0,i._)("b",null,"foreign languages"),(0,i.Uk)(", reading books and listening to music ")]),(0,i._)("p",null,[(0,i.Uk)(" Most of my skills are self-taught and from work experiences, but I like and also "),(0,i._)("b",null,"learn most from"),(0,i.Uk)(" interacting and studying with each others ")])],-1))),Y=(0,i.uE)('<div data-v-30de9d33><h2 data-v-30de9d33>My skills/ knowledge</h2><p data-v-30de9d33> What I have learnt at school and from my job as well as some subjects I&#39;m studying hard right now: <a href="./NguyenThanhThuGiang_CV.pdf" data-v-30de9d33>My full CV/ r√©sum√©</a></p><div class="skills-list" data-v-30de9d33><ul data-v-30de9d33><li data-v-30de9d33>C#, .NET</li><li data-v-30de9d33>HTML, CSS, JS</li><li data-v-30de9d33>VueJs</li><li data-v-30de9d33>ThreeJS</li></ul><ul data-v-30de9d33><li data-v-30de9d33>C++</li><li data-v-30de9d33>English</li><li data-v-30de9d33>French</li><li data-v-30de9d33>...</li></ul></div></div>',1),J=[Y],Z={class:"right-column center"},tt=K((()=>(0,i._)("img",{class:"media-profile",src:$,alt:"github-profile"},null,-1))),et=K((()=>(0,i._)("h1",null,"Find me on social media",-1))),nt=K((()=>(0,i._)("p",null,[(0,i.Uk)(" Facebook: "),(0,i._)("a",{target:"_blank",href:"https://www.facebook.com/thugiang.nguyenthanh"},"@thugiang")],-1))),it=K((()=>(0,i._)("p",null,[(0,i.Uk)(" Github: "),(0,i._)("a",{target:"_blank",href:"https://github.com/thugiang61"},"@thugiang61")],-1))),rt=K((()=>(0,i._)("h1",null,"Or contact me via",-1))),st={style:{"text-align":"center"}},ot=K((()=>(0,i._)("a",{href:"https://zalo.me/pc",target:"_blank"},"Zalo",-1))),at="thugiang6.1@gmail.com",lt="(+84) 905 093 938";var ct={__name:"AboutSection",setup(t){const e=(0,r.iH)(!1),{isMobile:n}=(0,q.Z)();function s(t){navigator.clipboard.writeText(t),e.value=!0,setTimeout((()=>e.value=!1),3e3)}return(t,o)=>{const a=(0,i.Q2)("motion-fade-visible");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("div",Q,[X,(0,i._)("div",{class:(0,l.C_)({"border-bottom":(0,r.SU)(n)})},J,2)]),(0,i._)("div",Z,[tt,et,nt,it,rt,(0,i._)("p",null,[(0,i.Uk)(" Gmail: "),(0,i._)("a",{onClick:o[0]||(o[0]=t=>s(at))},(0,l.zw)(at))]),(0,i._)("p",st,[(0,i.Uk)(" Tel: "),(0,i._)("a",{onClick:o[1]||(o[1]=t=>s(lt))},(0,l.zw)(lt)),(0,i.Uk)(" (Also¬†my¬†"),ot,(0,i.Uk)("¬†number) ")])])])),[[a]]),(0,i.Wm)((0,r.SU)(G),{"show-toaster":e.value},{default:(0,i.w5)((()=>[(0,i.Uk)(" ‚úì‚ÄÉCopied to clipboard! ")])),_:1},8,["show-toaster"])],64)}}};const ut=(0,h.Z)(ct,[["__scopeId","data-v-30de9d33"]]);var ht=ut;const dt=["src","alt"],ft={key:0,class:"project-name"};var pt={__name:"ProjectCard",props:["projectName","projectId"],setup(t){const e=(0,r.iH)(!1),o=t,a=`/projects/${o.projectId}`;function c(){var t=n(6762);return t("./"+o.projectId+".png")}return(n,r)=>{const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:"project-card",onMouseover:r[0]||(r[0]=t=>e.value=!0),onMouseleave:r[1]||(r[1]=t=>e.value=!1)},[(0,i._)("img",{src:c(),alt:t.projectName,class:"project-img"},null,8,dt),(0,i.Wm)(s.uT,{name:"fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("div",ft,[(0,i._)("p",null,(0,l.zw)(t.projectName),1),(0,i.Wm)(o,{to:a},{default:(0,i.w5)((()=>[(0,i.Uk)("Read more ‚Üí")])),_:1})])):(0,i.kq)("",!0)])),_:1})],32)}}};const gt=(0,h.Z)(pt,[["__scopeId","data-v-f7e4f36a"]]);var mt=gt,yt=n(4974);const vt=t=>((0,i.dD)("data-v-e999c5e8"),t=t(),(0,i.Cn)(),t),wt={id:"past-projects",class:"section-border-bottom"},bt=vt((()=>(0,i._)("h1",null,"Some of my past projects",-1))),Et=vt((()=>(0,i._)("h3",null,"Homemade",-1))),_t={class:"projects"},Tt=vt((()=>(0,i._)("h3",null,"From work",-1))),St={class:"projects"},It=vt((()=>(0,i._)("p",null,"During my internship and working period,",-1))),Ct=vt((()=>(0,i._)("p",null," I've been working on different projects, be it a out-source software company and a logistics software company! ",-1)));var At={__name:"ProjectSection",setup(t){return(t,e)=>{const n=(0,i.Q2)("motion-slide-visible-right");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",wt,[bt,Et,(0,i._)("div",_t,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(yt.mO),((t,e)=>((0,i.wg)(),(0,i.j4)((0,r.SU)(mt),{key:e,"project-name":t.name,"project-id":t.id},null,8,["project-name","project-id"])))),128))]),Tt,(0,i._)("div",St,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(yt.IF),((t,e)=>((0,i.wg)(),(0,i.j4)((0,r.SU)(mt),{key:e,"project-name":t.name,"project-id":t.id},null,8,["project-name","project-id"])))),128))]),It,Ct])),[[n]])}}};const Dt=(0,h.Z)(At,[["__scopeId","data-v-e999c5e8"]]);var kt=Dt;n(4224),n(1121),n(7133),n(560),n(3429);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nt=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},Rt=function(t){const e=[];let n=0,i=0;while(n<t.length){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")},Ot={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nt(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length,o=s?n[t.charAt(r)]:0;++r;const a=r<t.length,l=a?n[t.charAt(r)]:64;++r;const c=r<t.length,u=c?n[t.charAt(r)]:64;if(++r,null==e||null==o||null==l||null==u)throw new Lt;const h=e<<2|o>>4;if(i.push(h),64!==l){const t=o<<4&240|l>>2;if(i.push(t),64!==u){const t=l<<6&192|u;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xt=function(t){const e=Nt(t);return Ot.encodeByteArray(e,!0)},Mt=function(t){return xt(t).replace(/\./g,"")},Pt=function(t){try{return Ot.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=()=>Ut().__FIREBASE_DEFAULTS__,Vt=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyBCqBimo-rgirF35NfWSLMmSoNa5CS-37UI",VUE_APP_FIREBASE_APP_ID:"1:938384570628:web:ccc4b70de3d6574066f851",VUE_APP_FIREBASE_AUTH_DOMAIN:"portfolio-e7f7a.firebaseapp.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"938384570628",VUE_APP_FIREBASE_PROJECT_ID:"portfolio-e7f7a",VUE_APP_FIREBASE_STORAGE_BUCKET:"portfolio-e7f7a.appspot.com",BASE_URL:"/my-portfolio/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},Bt=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&Pt(t[1]);return e&&JSON.parse(e)},jt=()=>{try{return Ft()||Vt()||Bt()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},$t=t=>{var e,n;return null===(n=null===(e=jt())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},Ht=t=>{const e=$t(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},zt=()=>{var t;return null===(t=jt())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Mt(JSON.stringify(n)),Mt(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){try{return"object"===typeof indexedDB}catch(t){return!1}}function Wt(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qt="FirebaseError";class Xt extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Qt,Object.setPrototypeOf(this,Xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?Jt(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new Xt(i,o,n);return a}}function Jt(t,e){return t.replace(Zt,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}const Zt=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(ee(n)&&ee(s)){if(!te(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ee(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ne(t){return t&&t._delegate?t._delegate:t}class ie{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Gt;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(ae(t))try{this.getOrInitializeService({instanceIdentifier:re})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=re){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=re){return this.instances.has(t)}getOptions(t=re){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(r);n===t&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:oe(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=re){return this.component?this.component.multipleInstances?t:re:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function oe(t){return t===re?void 0:t}function ae(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new se(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ce=[];var ue;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(ue||(ue={}));const he={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},de=ue.INFO,fe={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},pe=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=fe[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class ge{constructor(t){this.name=t,this._logLevel=de,this._logHandler=pe,this._userLogHandler=null,ce.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ue))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?he[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...t),this._logHandler(this,ue.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...t),this._logHandler(this,ue.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...t),this._logHandler(this,ue.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...t),this._logHandler(this,ue.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...t),this._logHandler(this,ue.ERROR,...t)}}const me=(t,e)=>e.some((e=>t instanceof e));let ye,ve;function we(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function be(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ee=new WeakMap,_e=new WeakMap,Te=new WeakMap,Se=new WeakMap,Ie=new WeakMap;function Ce(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Oe(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Ee.set(e,t)})).catch((()=>{})),Ie.set(e,t),e}function Ae(t){if(_e.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));_e.set(t,e)}let De={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return _e.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Te.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oe(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function ke(t){De=t(De)}function Ne(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?be().includes(t)?function(...e){return t.apply(Le(this),e),Oe(Ee.get(this))}:function(...e){return Oe(t.apply(Le(this),e))}:function(e,...n){const i=t.call(Le(this),e,...n);return Te.set(i,e.sort?e.sort():[e]),Oe(i)}}function Re(t){return"function"===typeof t?Ne(t):(t instanceof IDBTransaction&&Ae(t),me(t,we())?new Proxy(t,De):t)}function Oe(t){if(t instanceof IDBRequest)return Ce(t);if(Se.has(t))return Se.get(t);const e=Re(t);return e!==t&&(Se.set(t,e),Ie.set(e,t)),e}const Le=t=>Ie.get(t);function xe(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Oe(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Oe(o.result),t.oldVersion,t.newVersion,Oe(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const Me=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Ue=new Map;function Fe(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(Ue.get(e))return Ue.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Pe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Me.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Ue.set(e,s),s}ke((t=>({...t,get:(e,n,i)=>Fe(e,n)||t.get(e,n,i),has:(e,n)=>!!Fe(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ve{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(Be(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function Be(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const je="@firebase/app",$e="0.9.23",He=new ge("@firebase/app"),ze="@firebase/app-compat",Ge="@firebase/analytics-compat",qe="@firebase/analytics",Ke="@firebase/app-check-compat",We="@firebase/app-check",Qe="@firebase/auth",Xe="@firebase/auth-compat",Ye="@firebase/database",Je="@firebase/database-compat",Ze="@firebase/functions",tn="@firebase/functions-compat",en="@firebase/installations",nn="@firebase/installations-compat",rn="@firebase/messaging",sn="@firebase/messaging-compat",on="@firebase/performance",an="@firebase/performance-compat",ln="@firebase/remote-config",cn="@firebase/remote-config-compat",un="@firebase/storage",hn="@firebase/storage-compat",dn="@firebase/firestore",fn="@firebase/firestore-compat",pn="firebase",gn="10.6.0",mn="[DEFAULT]",yn={[je]:"fire-core",[ze]:"fire-core-compat",[qe]:"fire-analytics",[Ge]:"fire-analytics-compat",[We]:"fire-app-check",[Ke]:"fire-app-check-compat",[Qe]:"fire-auth",[Xe]:"fire-auth-compat",[Ye]:"fire-rtdb",[Je]:"fire-rtdb-compat",[Ze]:"fire-fn",[tn]:"fire-fn-compat",[en]:"fire-iid",[nn]:"fire-iid-compat",[rn]:"fire-fcm",[sn]:"fire-fcm-compat",[on]:"fire-perf",[an]:"fire-perf-compat",[ln]:"fire-rc",[cn]:"fire-rc-compat",[un]:"fire-gcs",[hn]:"fire-gcs-compat",[dn]:"fire-fst",[fn]:"fire-fst-compat","fire-js":"fire-js",[pn]:"fire-js-all"},vn=new Map,wn=new Map;function bn(t,e){try{t.container.addComponent(e)}catch(n){He.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){const e=t.name;if(wn.has(e))return He.debug(`There were multiple attempts to register component ${e}.`),!1;wn.set(e,t);for(const n of vn.values())bn(n,t);return!0}function _n(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tn={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Sn=new Yt("app","Firebase",Tn);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class In{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ie("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=gn;function An(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const i=Object.assign({name:mn,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw Sn.create("bad-app-name",{appName:String(r)});if(n||(n=zt()),!n)throw Sn.create("no-options");const s=vn.get(r);if(s){if(te(n,s.options)&&te(i,s.config))return s;throw Sn.create("duplicate-app",{appName:r})}const o=new le(r);for(const l of wn.values())o.addComponent(l);const a=new In(n,i,o);return vn.set(r,a),a}function Dn(t=mn){const e=vn.get(t);if(!e&&t===mn&&zt())return An();if(!e)throw Sn.create("no-app",{appName:t});return e}function kn(t,e,n){var i;let r=null!==(i=yn[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void He.warn(t.join(" "))}En(new ie(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Nn="firebase-heartbeat-database",Rn=1,On="firebase-heartbeat-store";let Ln=null;function xn(){return Ln||(Ln=xe(Nn,Rn,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(On)}}}).catch((t=>{throw Sn.create("idb-open",{originalErrorMessage:t.message})}))),Ln}async function Mn(t){try{const e=await xn(),n=await e.transaction(On).objectStore(On).get(Un(t));return n}catch(e){if(e instanceof Xt)He.warn(e.message);else{const t=Sn.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});He.warn(t.message)}}}async function Pn(t,e){try{const n=await xn(),i=n.transaction(On,"readwrite"),r=i.objectStore(On);await r.put(e,Un(t)),await i.done}catch(n){if(n instanceof Xt)He.warn(n.message);else{const t=Sn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});He.warn(t.message)}}}function Un(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=1024,Vn=2592e6;class Bn{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Hn(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t;const e=this.container.getProvider("platform-logger").getImmediate(),n=e.getPlatformInfoString(),i=jn();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=Vn})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=jn(),{heartbeatsToSend:n,unsentEntries:i}=$n(this._heartbeatsCache.heartbeats),r=Mt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function jn(){const t=new Date;return t.toISOString().substring(0,10)}function $n(t,e=Fn){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),zn(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zn(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Hn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Kt()&&Wt().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Mn(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Pn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Pn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function zn(t){return Mt(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){En(new ie("platform-logger",(t=>new Ve(t)),"PRIVATE")),En(new ie("heartbeat",(t=>new Bn(t)),"PRIVATE")),kn(je,$e,t),kn(je,$e,"esm2017"),kn("fire-js","")}Gn("");var qn,Kn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wn={},Qn=Qn||{},Xn=Kn||self;function Yn(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function Jn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function Zn(t){return Object.prototype.hasOwnProperty.call(t,ti)&&t[ti]||(t[ti]=++ei)}var ti="closure_uid_"+(1e9*Math.random()>>>0),ei=0;function ni(t,e,n){return t.call.apply(t.bind,arguments)}function ii(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ri(t,e,n){return ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ni:ii,ri.apply(null,arguments)}function si(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function oi(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function ai(){this.s=this.s,this.o=this.o}var li=0;ai.prototype.s=!1,ai.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==li)||Zn(this)},ai.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ci=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ui(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function hi(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(Yn(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function di(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var fi=function(){if(!Xn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Xn.addEventListener("test",(()=>{}),e),Xn.removeEventListener("test",(()=>{}),e)}catch(n){}return t}();function pi(t){return/^[\s\xa0]*$/.test(t)}function gi(){var t=Xn.navigator;return t&&(t=t.userAgent)?t:""}function mi(t){return-1!=gi().indexOf(t)}function yi(t){return yi[" "](t),t}function vi(t,e){var n=sa;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}yi[" "]=function(){};var wi,bi,Ei=mi("Opera"),_i=mi("Trident")||mi("MSIE"),Ti=mi("Edge"),Si=Ti||_i,Ii=mi("Gecko")&&!(-1!=gi().toLowerCase().indexOf("webkit")&&!mi("Edge"))&&!(mi("Trident")||mi("MSIE"))&&!mi("Edge"),Ci=-1!=gi().toLowerCase().indexOf("webkit")&&!mi("Edge");function Ai(){var t=Xn.document;return t?t.documentMode:void 0}t:{var Di="",ki=function(){var t=gi();return Ii?/rv:([^\);]+)(\)|;)/.exec(t):Ti?/Edge\/([\d\.]+)/.exec(t):_i?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ci?/WebKit\/(\S+)/.exec(t):Ei?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ki&&(Di=ki?ki[1]:""),_i){var Ni=Ai();if(null!=Ni&&Ni>parseFloat(Di)){wi=String(Ni);break t}}wi=Di}if(Xn.document&&_i){var Ri=Ai();bi=Ri||(parseInt(wi,10)||void 0)}else bi=void 0;var Oi=bi;function Li(t,e){if(di.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ii){t:{try{yi(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:xi[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Li.$.h.call(this)}}oi(Li,di);var xi={2:"touch",3:"pen",4:"mouse"};Li.prototype.h=function(){Li.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Mi="closure_listenable_"+(1e6*Math.random()|0),Pi=0;function Ui(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Pi,this.fa=this.ia=!1}function Fi(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Vi(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Bi(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ji(t){const e={};for(const n in t)e[n]=t[n];return e}const $i="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hi(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<$i.length;e++)n=$i[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function zi(t){this.src=t,this.g={},this.h=0}function Gi(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=ci(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Fi(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function qi(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}zi.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=qi(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Ui(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};var Ki="closure_lm_"+(1e6*Math.random()|0),Wi={};function Qi(t,e,n,i,r){if(i&&i.once)return Ji(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Qi(t,e[s],n,i,r);return null}return n=sr(n),t&&t[Mi]?t.O(e,n,Jn(i)?!!i.capture:!!i,r):Xi(t,e,n,!1,i,r)}function Xi(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Jn(r)?!!r.capture:!!r,a=ir(t);if(a||(t[Ki]=a=new zi(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=Yi(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)fi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(er(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Yi(){function t(n){return e.call(t.src,t.listener,n)}const e=nr;return t}function Ji(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ji(t,e[s],n,i,r);return null}return n=sr(n),t&&t[Mi]?t.P(e,n,Jn(i)?!!i.capture:!!i,r):Xi(t,e,n,!0,i,r)}function Zi(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Zi(t,e[s],n,i,r);else i=Jn(i)?!!i.capture:!!i,n=sr(n),t&&t[Mi]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=qi(s,n,i,r),-1<n&&(Fi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=ir(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qi(e,n,i,r)),(n=-1<t?e[t]:null)&&tr(n))}function tr(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Mi])Gi(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(er(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ir(e))?(Gi(n,t),0==n.h&&(n.src=null,e[Ki]=null)):Fi(t)}}}function er(t){return t in Wi?Wi[t]:Wi[t]="on"+t}function nr(t,e){if(t.fa)t=!0;else{e=new Li(e,this);var n=t.listener,i=t.la||t.src;t.ia&&tr(t),t=n.call(i,e)}return t}function ir(t){return t=t[Ki],t instanceof zi?t:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(t){return"function"===typeof t?t:(t[rr]||(t[rr]=function(e){return t.handleEvent(e)}),t[rr])}function or(){ai.call(this),this.i=new zi(this),this.S=this,this.J=null}function ar(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new di(e,t);else if(e instanceof di)e.target=e.target||t;else{var r=e;e=new di(i,t),Hi(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=lr(o,i,!0,e)&&r}if(o=e.g=t,r=lr(o,i,!0,e)&&r,r=lr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=lr(o,i,!1,e)&&r}function lr(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Gi(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}oi(or,ai),or.prototype[Mi]=!0,or.prototype.removeEventListener=function(t,e,n,i){Zi(this,t,e,n,i)},or.prototype.N=function(){if(or.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Fi(n[i]);delete e.g[t],e.h--}}this.J=null},or.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},or.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var cr=Xn.JSON.stringify;class ur{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function hr(){var t=wr;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class dr{constructor(){this.h=this.g=null}add(t,e){const n=fr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var fr=new ur((()=>new pr),(t=>t.reset()));class pr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function gr(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function mr(t){Xn.setTimeout((()=>{throw t}),0)}let yr,vr=!1,wr=new dr,br=()=>{const t=Xn.Promise.resolve(void 0);yr=()=>{t.then(Er)}};var Er=()=>{for(var t;t=hr();){try{t.h.call(t.g)}catch(n){mr(n)}var e=fr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vr=!1};function _r(t,e){or.call(this),this.h=t||1,this.g=e||Xn,this.j=ri(this.qb,this),this.l=Date.now()}function Tr(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Sr(t,e,n){if("function"===typeof t)n&&(t=ri(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ri(t.handleEvent,t)}return 2147483647<Number(e)?-1:Xn.setTimeout(t,e||0)}function Ir(t){t.g=Sr((()=>{t.g=null,t.i&&(t.i=!1,Ir(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}oi(_r,or),qn=_r.prototype,qn.ga=!1,qn.T=null,qn.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ar(this,"tick"),this.ga&&(Tr(this),this.start()))}},qn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qn.N=function(){_r.$.N.call(this),Tr(this),delete this.g};class Cr extends ai{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(Xn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(t){ai.call(this),this.h=t,this.g={}}oi(Ar,ai);var Dr=[];function kr(t,e,n,i){Array.isArray(n)||(n&&(Dr[0]=n.toString()),n=Dr);for(var r=0;r<n.length;r++){var s=Qi(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Nr(t){Vi(t.g,(function(t,e){this.g.hasOwnProperty(e)&&tr(t)}),t),t.g={}}function Rr(){this.g=!0}function Or(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}function Lr(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function xr(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Pr(t,n)+(i?" "+i:"")}))}function Mr(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Pr(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return cr(n)}catch(a){return e}}Ar.prototype.N=function(){Ar.$.N.call(this),Nr(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rr.prototype.Ea=function(){this.g=!1},Rr.prototype.info=function(){};var Ur={},Fr=null;function Vr(){return Fr=Fr||new or}function Br(t){di.call(this,Ur.Ta,t)}function jr(t){const e=Vr();ar(e,new Br(e))}function $r(t,e){di.call(this,Ur.STAT_EVENT,t),this.stat=e}function Hr(t){const e=Vr();ar(e,new $r(e,t))}function zr(t,e){di.call(this,Ur.Ua,t),this.size=e}function Gr(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return Xn.setTimeout((function(){t()}),e)}Ur.Ta="serverreachability",oi(Br,di),Ur.STAT_EVENT="statevent",oi($r,di),Ur.Ua="timingevent",oi(zr,di);var qr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Kr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wr(){}function Qr(t){return t.h||(t.h=t.i())}function Xr(){}Wr.prototype.h=null;var Yr,Jr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zr(){di.call(this,"d")}function ts(){di.call(this,"c")}function es(){}function ns(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Ar(this),this.P=rs,t=Si?125:void 0,this.V=new _r(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new is}function is(){this.i=null,this.g="",this.h=!1}oi(Zr,di),oi(ts,di),oi(es,Wr),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},Yr=new es;var rs=45e3,ss={},os={};function as(t,e,n){t.L=1,t.v=ks(Ss(e)),t.s=n,t.S=!0,ls(t,null)}function ls(t,e){t.G=Date.now(),ds(t),t.A=Ss(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),$s(n.i,"t",i),t.C=0,n=t.l.J,t.h=new is,t.g=Wo(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Cr(ri(t.Pa,t,t.g),t.O)),kr(t.U,t.g,"readystatechange",t.nb),e=t.I?ji(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),jr(),Or(t.j,t.u,t.A,t.m,t.W,t.s)}function cs(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function us(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=hs(t,n),i==os){4==e&&(t.o=4,Hr(14),r=!1),xr(t.j,t.m,null,"[Incomplete Response]");break}if(i==ss){t.o=4,Hr(15),xr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xr(t.j,t.m,i,null),ys(t,i)}cs(t)&&i!=os&&i!=ss&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Hr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bo(e),e.M=!0,Hr(11))):(xr(t.j,t.m,n,"[Invalid Chunked Response]"),ms(t),gs(t))}function hs(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?os:(n=Number(e.substring(n,i)),isNaN(n)?ss:(i+=1,i+n>e.length?os:(e=e.slice(i,i+n),t.C=i+n,e)))}function ds(t){t.Y=Date.now()+t.P,fs(t,t.P)}function fs(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gr(ri(t.lb,t),e)}function ps(t){t.B&&(Xn.clearTimeout(t.B),t.B=null)}function gs(t){0==t.l.H||t.J||Ho(t.l,t)}function ms(t){ps(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Tr(t.V),Nr(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ys(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Xs(n.i,t)))if(!t.K&&Xs(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;$o(n),Ro(n)}Vo(n),Hr(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Gr(ri(n.ib,n),6e3));if(1>=Qs(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Go(n,11)}else if((t.K||n.g==t)&&$o(n),!pi(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ys(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Ds(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=Ko(i,i.J?i.pa:null,i.Y),o.K){Js(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(ps(a),ds(a)),i.g=o}else Fo(i);0<n.j.length&&Lo(n)}else"stop"!=c[0]&&"close"!=c[0]||Go(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Go(n,7):No(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}jr(4)}catch(c){}}function vs(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(Yn(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function ws(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(Yn(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function bs(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Yn(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=ws(t),i=vs(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}qn=ns.prototype,qn.setTimeout=function(t){this.P=t},qn.nb=function(t){t=t.target;const e=this.M;e&&3==To(t)?e.l():this.Pa(t)},qn.Pa=function(t){try{if(t==this.g)t:{const u=To(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(3!=u||Si||this.g&&(this.h.h||this.g.ja()||So(this.g)))){this.J||4!=u||7==e||jr(8==e||0>=h?3:2),ps(this);var n=this.g.da();this.ca=n;e:if(cs(this)){var i=So(this.g);t="";var r=i.length,s=4==To(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ms(this),gs(this);var o="";break e}this.h.i=new Xn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,Lr(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pi(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,Hr(12),ms(this),gs(this);break t}xr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ys(this,n)}this.S?(us(this,u,o),Si&&this.i&&3==u&&(kr(this.U,this.V,"tick",this.mb),this.V.start())):(xr(this.j,this.m,o,null),ys(this,o)),4==u&&ms(this),this.i&&!this.J&&(4==u?Ho(this.l,this):(this.i=!1,ds(this)))}else Io(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Hr(12)):(this.o=0,Hr(13)),ms(this),gs(this)}}}catch(u){}},qn.mb=function(){if(this.g){var t=To(this.g),e=this.g.ja();this.C<e.length&&(ps(this),us(this,t,e),this.i&&4!=t&&ds(this))}},qn.cancel=function(){this.J=!0,ms(this)},qn.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Mr(this.j,this.A),2!=this.L&&(jr(),Hr(17)),ms(this),this.o=2,gs(this)):fs(this,this.Y-t)};var Es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _s(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ts(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ts){this.h=t.h,Is(this,t.j),this.s=t.s,this.g=t.g,Cs(this,t.m),this.l=t.l;var e=t.i,n=new Fs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),As(this,n),this.o=t.o}else t&&(e=String(t).match(Es))?(this.h=!1,Is(this,e[1]||"",!0),this.s=Ns(e[2]||""),this.g=Ns(e[3]||"",!0),Cs(this,e[4]),this.l=Ns(e[5]||"",!0),As(this,e[6]||"",!0),this.o=Ns(e[7]||"")):(this.h=!1,this.i=new Fs(null,this.h))}function Ss(t){return new Ts(t)}function Is(t,e,n){t.j=n?Ns(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Cs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function As(t,e,n){e instanceof Fs?(t.i=e,zs(t.i,t.h)):(n||(e=Rs(e,Ps)),t.i=new Fs(e,t.h))}function Ds(t,e,n){t.i.set(e,n)}function ks(t){return Ds(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ns(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Rs(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Os),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Os(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Ts.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Rs(e,Ls,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Rs(e,Ls,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Rs(n,"/"==n.charAt(0)?Ms:xs,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Rs(n,Us)),t.join("")};var Ls=/[#\/\?@]/g,xs=/[#\?:]/g,Ms=/[#\?]/g,Ps=/[#\?@]/g,Us=/#/g;function Fs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vs(t){t.g||(t.g=new Map,t.h=0,t.i&&_s(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Bs(t,e){Vs(t),e=Hs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function js(t,e){return Vs(t),e=Hs(t,e),t.g.has(e)}function $s(t,e,n){Bs(t,e),0<n.length&&(t.i=null,t.g.set(Hs(t,e),ui(n)),t.h+=n.length)}function Hs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zs(t,e){e&&!t.j&&(Vs(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Bs(this,e),$s(this,n,t))}),t)),t.j=e}qn=Fs.prototype,qn.add=function(t,e){Vs(this),this.i=null,t=Hs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},qn.forEach=function(t,e){Vs(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},qn.ta=function(){Vs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},qn.Z=function(t){Vs(this);let e=[];if("string"===typeof t)js(this,t)&&(e=e.concat(this.g.get(Hs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},qn.set=function(t,e){return Vs(this),this.i=null,t=Hs(this,t),js(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},qn.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e},qn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var Gs=class{constructor(t,e){this.g=t,this.map=e}};function qs(t){this.l=t||Ks,Xn.PerformanceNavigationTiming?(t=Xn.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(Xn.g&&Xn.g.Ka&&Xn.g.Ka()&&Xn.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ks=10;function Ws(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Qs(t){return t.h?1:t.g?t.g.size:0}function Xs(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Ys(t,e){t.g?t.g.add(e):t.h=e}function Js(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Zs(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ui(t.i)}qs.prototype.cancel=function(){if(this.i=Zs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var to=class{stringify(t){return Xn.JSON.stringify(t,void 0)}parse(t){return Xn.JSON.parse(t,void 0)}};function eo(){this.g=new to}function no(t,e,n){const i=n||"";try{bs(t,(function(t,n){let r=t;Jn(t)&&(r=cr(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function io(t,e){const n=new Rr;if(Xn.Image){const i=new Image;i.onload=si(ro,n,i,"TestLoadImage: loaded",!0,e),i.onerror=si(ro,n,i,"TestLoadImage: error",!1,e),i.onabort=si(ro,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=si(ro,n,i,"TestLoadImage: timeout",!1,e),Xn.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function ro(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function so(t){this.l=t.ec||null,this.j=t.ob||!1}function oo(t,e){or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ao,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oi(so,Wr),so.prototype.g=function(){return new oo(this.l,this.j)},so.prototype.i=function(t){return function(){return t}}({}),oi(oo,or);var ao=0;function lo(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function co(t){t.readyState=4,t.l=null,t.j=null,t.A=null,uo(t)}function uo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}qn=oo.prototype,qn.open=function(t,e){if(this.readyState!=ao)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,uo(this)},qn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Xn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},qn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=ao},qn.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Xn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lo(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},qn.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?co(this):uo(this),3==this.readyState&&lo(this)}},qn.Za=function(t){this.g&&(this.response=this.responseText=t,co(this))},qn.Ya=function(t){this.g&&(this.response=t,co(this))},qn.ka=function(){this.g&&co(this)},qn.setRequestHeader=function(t,e){this.v.append(t,e)},qn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},qn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ho=Xn.JSON.parse;function fo(t){or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=po,this.L=this.M=!1}oi(fo,or);var po="",go=/^https?$/i,mo=["POST","PUT"];function yo(t){return _i&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function vo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,wo(t),Eo(t)}function wo(t){t.F||(t.F=!0,ar(t,"complete"),ar(t,"error"))}function bo(t){if(t.h&&"undefined"!=typeof Qn&&(!t.C[1]||4!=To(t)||2!=t.da()))if(t.v&&4==To(t))Sr(t.La,0,t);else if(ar(t,"readystatechange"),4==To(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.I).match(Es)[1]||null;!r&&Xn.self&&Xn.self.location&&(r=Xn.self.location.protocol.slice(0,-1)),i=!go.test(r?r.toLowerCase():"")}n=i}if(n)ar(t,"complete"),ar(t,"success");else{t.m=6;try{var s=2<To(t)?t.g.statusText:""}catch(o){s=""}t.j=s+" ["+t.da()+"]",wo(t)}}finally{Eo(t)}}}function Eo(t,e){if(t.g){_o(t);const i=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ar(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function _o(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Xn.clearTimeout(t.A),t.A=null)}function To(t){return t.g?t.g.readyState:0}function So(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case po:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(xa){return null}}function Io(t){const e={};t=(t.g&&2<=To(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(pi(t[i]))continue;var n=gr(t[i]);const r=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}Bi(e,(function(t){return t.join(", ")}))}function Co(t){let e="";return Vi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Ao(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Co(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ds(t,e,n))}function Do(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ko(t){this.Ga=0,this.j=[],this.l=new Rr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Do("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Do("baseRetryDelayMs",5e3,t),this.hb=Do("retryDelaySeedMs",1e4,t),this.eb=Do("forwardChannelMaxRetries",2,t),this.xa=Do("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new qs(t&&t.concurrentRequestLimit),this.Ja=new eo,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function No(t){if(Oo(t),3==t.H){var e=t.W++,n=Ss(t.I);if(Ds(n,"SID",t.K),Ds(n,"RID",e),Ds(n,"TYPE","terminate"),Po(t,n),e=new ns(t,t.l,e),e.L=2,e.v=ks(Ss(n)),n=!1,Xn.navigator&&Xn.navigator.sendBeacon)try{n=Xn.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&Xn.Image&&((new Image).src=e.v,n=!0),n||(e.g=Wo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ds(e)}qo(t)}function Ro(t){t.g&&(Bo(t),t.g.cancel(),t.g=null)}function Oo(t){Ro(t),t.u&&(Xn.clearTimeout(t.u),t.u=null),$o(t),t.i.cancel(),t.m&&("number"===typeof t.m&&Xn.clearTimeout(t.m),t.m=null)}function Lo(t){if(!Ws(t.i)&&!t.m){t.m=!0;var e=t.Na;yr||br(),vr||(yr(),vr=!0),wr.add(e,t),t.C=0}}function xo(t,e){return!(Qs(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=Gr(ri(t.Na,t,e),zo(t,t.C)),t.C++,!0))}function Mo(t,e){var n;n=e?e.m:t.W++;const i=Ss(t.I);Ds(i,"SID",t.K),Ds(i,"RID",n),Ds(i,"AID",t.V),Po(t,i),t.o&&t.s&&Ao(i,t.o,t.s),n=new ns(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Uo(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ys(t.i,n),as(n,i,e)}function Po(t,e){t.na&&Vi(t.na,(function(t,n){Ds(e,n,t)})),t.h&&bs({},(function(t,n){Ds(e,n,t)}))}function Uo(t,e,n){n=Math.min(t.j.length,n);var i=t.h?ri(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{no(l,t,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function Fo(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;yr||br(),vr||(yr(),vr=!0),wr.add(e,t),t.A=0}}function Vo(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=Gr(ri(t.Ma,t),zo(t,t.A)),t.A++,!0)}function Bo(t){null!=t.B&&(Xn.clearTimeout(t.B),t.B=null)}function jo(t){t.g=new ns(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ss(t.wa);Ds(e,"RID","rpc"),Ds(e,"SID",t.K),Ds(e,"AID",t.V),Ds(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ds(e,"TO",t.qa),Ds(e,"TYPE","xmlhttp"),Po(t,e),t.o&&t.s&&Ao(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=ks(Ss(e)),n.s=null,n.S=!0,ls(n,t)}function $o(t){null!=t.v&&(Xn.clearTimeout(t.v),t.v=null)}function Ho(t,e){var n=null;if(t.g==e){$o(t),Bo(t),t.g=null;var i=2}else{if(!Xs(t.i,e))return;n=e.F,Js(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Vr(),ar(i,new zr(i,n)),Lo(t)}else Fo(t);else if(r=e.o,3==r||0==r&&0<e.ca||!(1==i&&xo(t,e)||2==i&&Vo(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Go(t,5);break;case 4:Go(t,10);break;case 3:Go(t,6);break;default:Go(t,2)}}function zo(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Go(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=ri(t.pb,t);n||(n=new Ts("//www.google.com/images/cleardot.gif"),Xn.location&&"http"==Xn.location.protocol||Is(n,"https"),ks(n)),io(n.toString(),i)}else Hr(2);t.H=0,t.h&&t.h.za(e),qo(t),Oo(t)}function qo(t){if(t.H=0,t.ma=[],t.h){const e=Zs(t.i);0==e.length&&0==t.j.length||(hi(t.ma,e),hi(t.ma,t.j),t.i.i.length=0,ui(t.j),t.j.length=0),t.h.ya()}}function Ko(t,e,n){var i=n instanceof Ts?Ss(n):new Ts(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Cs(i,i.m);else{var r=Xn.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Ts(null);i&&Is(s,i),e&&(s.g=e),r&&Cs(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Ds(i,n,e),Ds(i,"VER",t.ra),Po(t,i),i}function Wo(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new fo(new so({ob:!0})):new fo(t.va),e.Oa(t.J),e}function Qo(){}function Xo(){if(_i&&!(10<=Number(Oi)))throw Error("Environmental error: no available transport.")}function Yo(t,e){or.call(this),this.g=new ko(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!pi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pi(e)&&(this.g.F=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ta(this)}function Jo(t){Zr.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Zo(){ts.call(this),this.status=1}function ta(t){this.g=t}function ea(){this.blockSize=-1}function na(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ia(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function ra(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}qn=fo.prototype,qn.Oa=function(t){this.M=t},qn.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Yr.g(),this.C=this.u?Qr(this.u):Qr(Yr),this.g.onreadystatechange=ri(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void vo(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Xn.FormData&&t instanceof Xn.FormData,!(0<=ci(mo,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_o(this),0<this.B&&((this.L=yo(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.ua,this)):this.A=Sr(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){vo(this,s)}},qn.ua=function(){"undefined"!=typeof Qn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},qn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ar(this,"complete"),ar(this,"abort"),Eo(this))},qn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eo(this,!0)),fo.$.N.call(this)},qn.La=function(){this.s||(this.G||this.v||this.l?bo(this):this.kb())},qn.kb=function(){bo(this)},qn.isActive=function(){return!!this.g},qn.da=function(){try{return 2<To(this)?this.g.status:-1}catch(t){return-1}},qn.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},qn.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ho(e)}},qn.Ia=function(){return this.m},qn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},qn=ko.prototype,qn.ra=8,qn.H=1,qn.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ns(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ji(s),Hi(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(i="__data__"in i.map&&(i=i.map.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Uo(this,r,e),n=Ss(this.I),Ds(n,"RID",t),Ds(n,"CVER",22),this.F&&Ds(n,"X-HTTP-Session-Id",this.F),Po(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Co(s)))+"&"+e:this.o&&Ao(n,this.o,s)),Ys(this.i,r),this.bb&&Ds(n,"TYPE","init"),this.P?(Ds(n,"$req",e),Ds(n,"SID","null"),r.aa=!0,as(r,n,null)):as(r,n,e),this.H=2}}else 3==this.H&&(t?Mo(this,t):0==this.j.length||Ws(this.i)||Mo(this))},qn.Ma=function(){if(this.u=null,jo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Gr(ri(this.jb,this),t)}},qn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hr(10),Ro(this),jo(this))},qn.ib=function(){null!=this.v&&(this.v=null,Ro(this),Vo(this),Hr(19))},qn.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hr(2)):(this.l.info("Failed to ping google.com"),Hr(1))},qn.isActive=function(){return!!this.h&&this.h.isActive(this)},qn=Qo.prototype,qn.Ba=function(){},qn.Aa=function(){},qn.za=function(){},qn.ya=function(){},qn.isActive=function(){return!0},qn.Va=function(){},Xo.prototype.g=function(t,e){return new Yo(t,e)},oi(Yo,or),Yo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ko(t,null,t.Y),Lo(t)},Yo.prototype.close=function(){No(this.g)},Yo.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=cr(t),t=n);e.j.push(new Gs(e.fb++,t)),3==e.H&&Lo(e)},Yo.prototype.N=function(){this.g.h=null,delete this.j,No(this.g),delete this.g,Yo.$.N.call(this)},oi(Jo,Zr),oi(Zo,ts),oi(ta,Qo),ta.prototype.Ba=function(){ar(this.g,"a")},ta.prototype.Aa=function(t){ar(this.g,new Jo(t))},ta.prototype.za=function(t){ar(this.g,new Zo)},ta.prototype.ya=function(){ar(this.g,"b")},oi(na,ea),na.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},na.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)ia(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){ia(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){ia(this,i),r=0;break}}this.h=r,this.i+=e},na.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var sa={};function oa(t){return-128<=t&&128>t?vi(t,(function(t){return new ra([0|t],0>t?-1:0)})):new ra([0|t],0>t?-1:0)}function aa(t){if(isNaN(t)||!isFinite(t))return ua;if(0>t)return ga(aa(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=ca;return new ra(e,0)}function la(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return ga(la(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=aa(Math.pow(e,8)),i=ua,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=aa(Math.pow(e,s)),i=i.R(s).add(aa(o))):(i=i.R(n),i=i.add(aa(o)))}return i}var ca=4294967296,ua=oa(0),ha=oa(1),da=oa(16777216);function fa(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function pa(t){return-1==t.h}function ga(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new ra(n,~t.h).add(ha)}function ma(t,e){return t.add(ga(e))}function ya(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function va(t,e){this.g=t,this.h=e}function wa(t,e){if(fa(e))throw Error("division by zero");if(fa(t))return new va(ua,ua);if(pa(t))return e=wa(ga(t),e),new va(ga(e.g),ga(e.h));if(pa(e))return e=wa(t,ga(e)),new va(ga(e.g),e.h);if(30<t.g.length){if(pa(t)||pa(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ha,i=e;0>=i.X(t);)n=ba(n),i=ba(i);var r=Ea(n,1),s=Ea(i,1);for(i=Ea(i,2),n=Ea(n,2);!fa(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Ea(i,1),n=Ea(n,1)}return e=ma(t,r.R(e)),new va(r,e)}for(r=ua;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=aa(n),o=s.R(e);pa(o)||0<o.X(t);)n-=i,s=aa(n),o=s.R(e);fa(s)&&(s=ha),r=r.add(s),t=ma(t,o)}return new va(r,t)}function ba(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new ra(n,t.h)}function Ea(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ra(r,t.h)}qn=ra.prototype,qn.ea=function(){if(pa(this))return-ga(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:ca+i)*e,e*=ca}return t},qn.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(fa(this))return"0";if(pa(this))return"-"+ga(this).toString(t);for(var e=aa(Math.pow(t,6)),n=this,i="";;){var r=wa(n,e).g;n=ma(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,fa(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},qn.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},qn.X=function(t){return t=ma(this,t),pa(t)?-1:fa(t)?0:1},qn.abs=function(){return pa(this)?ga(this):this},qn.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new ra(n,-2147483648&n[n.length-1]?-1:0)},qn.R=function(t){if(fa(this)||fa(t))return ua;if(pa(this))return pa(t)?ga(this).R(ga(t)):ga(ga(this).R(t));if(pa(t))return ga(this.R(ga(t)));if(0>this.X(da)&&0>t.X(da))return aa(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,l=65535&t.D(r);n[2*i+2*r]+=o*l,ya(n,2*i+2*r),n[2*i+2*r+1]+=s*l,ya(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,ya(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,ya(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new ra(n,0)},qn.gb=function(t){return wa(this,t).h},qn.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new ra(n,this.h&t.h)},qn.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new ra(n,this.h|t.h)},qn.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new ra(n,this.h^t.h)},Xo.prototype.createWebChannel=Xo.prototype.g,Yo.prototype.send=Yo.prototype.u,Yo.prototype.open=Yo.prototype.m,Yo.prototype.close=Yo.prototype.close,qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Kr.COMPLETE="complete",Xr.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",or.prototype.listen=or.prototype.O,fo.prototype.listenOnce=fo.prototype.P,fo.prototype.getLastError=fo.prototype.Sa,fo.prototype.getLastErrorCode=fo.prototype.Ia,fo.prototype.getStatus=fo.prototype.da,fo.prototype.getResponseJson=fo.prototype.Wa,fo.prototype.getResponseText=fo.prototype.ja,fo.prototype.send=fo.prototype.ha,fo.prototype.setWithCredentials=fo.prototype.Oa,na.prototype.digest=na.prototype.l,na.prototype.reset=na.prototype.reset,na.prototype.update=na.prototype.j,ra.prototype.add=ra.prototype.add,ra.prototype.multiply=ra.prototype.R,ra.prototype.modulo=ra.prototype.gb,ra.prototype.compare=ra.prototype.X,ra.prototype.toNumber=ra.prototype.ea,ra.prototype.toString=ra.prototype.toString,ra.prototype.getBits=ra.prototype.D,ra.fromNumber=aa,ra.fromString=la;var _a=Wn.createWebChannelTransport=function(){return new Xo},Ta=Wn.getStatEventTarget=function(){return Vr()},Sa=Wn.ErrorCode=qr,Ia=Wn.EventType=Kr,Ca=Wn.Event=Ur,Aa=Wn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Da=Wn.FetchXmlHttpFactory=so,ka=Wn.WebChannel=Xr,Na=Wn.XhrIo=fo,Ra=(Wn.Md5=na,Wn.Integer=ra);const Oa="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid"),La.MOCK_USER=new La("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let xa="10.5.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new ge("@firebase/firestore");function Pa(){return Ma.logLevel}function Ua(t,...e){if(Ma.logLevel<=ue.DEBUG){const n=e.map(Ba);Ma.debug(`Firestore (${xa}): ${t}`,...n)}}function Fa(t,...e){if(Ma.logLevel<=ue.ERROR){const n=e.map(Ba);Ma.error(`Firestore (${xa}): ${t}`,...n)}}function Va(t,...e){if(Ma.logLevel<=ue.WARN){const n=e.map(Ba);Ma.warn(`Firestore (${xa}): ${t}`,...n)}}function Ba(t){if("string"==typeof t)return t;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t="Unexpected state"){const e=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: `+t;throw Fa(e),new Error(e)}function $a(t,e){t||ja()}function Ha(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ga extends Xt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Wa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(La.UNAUTHENTICATED)))}shutdown(){}}class Qa{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Xa{constructor(t){this.t=t,this.currentUser=La.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new qa;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new qa,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ua("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ua("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new qa)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ua("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?($a("string"==typeof e.accessToken),new Ka(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return $a(null===t||"string"==typeof t),new La(t)}}class Ya{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=La.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ja{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Ya(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(La.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Za{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tl{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Ua("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Ua("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ua("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Ua("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?($a("string"==typeof t.token),this.R=t.token,new Za(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function el(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=el(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function il(t,e){return t<e?-1:t>e?1:0}function rl(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sl{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ga(za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ga(za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ga(za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ga(za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return sl.fromMillis(Date.now())}static fromDate(t){return sl.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new sl(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?il(this.nanoseconds,t.nanoseconds):il(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ol(t)}static min(){return new ol(new sl(0,0))}static max(){return new ol(new sl(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,e,n){void 0===e?e=0:e>t.length&&ja(),void 0===n?n=t.length-e:n>t.length-e&&ja(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===al.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof al?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ll extends al{construct(t,e,n){return new ll(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Ga(za.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new ll(e)}static emptyPath(){return new ll([])}}const cl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ul extends al{construct(t,e,n){return new ul(t,e,n)}static isValidIdentifier(t){return cl.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ul.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ul(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Ga(za.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Ga(za.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ga(za.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Ga(za.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ul(e)}static emptyPath(){return new ul([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this.path=t}static fromPath(t){return new hl(ll.fromString(t))}static fromName(t){return new hl(ll.fromString(t).popFirst(5))}static empty(){return new hl(ll.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===ll.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return ll.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new hl(new ll(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}dl.UNKNOWN_ID=-1;function fl(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ol.fromTimestamp(1e9===i?new sl(n+1,0):new sl(n,i));return new gl(r,hl.empty(),e)}function pl(t){return new gl(t.readTime,t.key,-1)}class gl{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new gl(ol.min(),hl.empty(),-1)}static max(){return new gl(ol.max(),hl.empty(),-1)}}function ml(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=hl.comparator(t.documentKey,e.documentKey),0!==n?n:il(t.largestBatchId,e.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==za.FAILED_PRECONDITION||t.message!==yl)throw t;Ua("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ja(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bl(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bl?e:bl.resolve(e)}catch(t){return bl.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bl.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bl.reject(e)}static resolve(t){return new bl(((e,n)=>{e(t)}))}static reject(t){return new bl(((e,n)=>{n(t)}))}static waitFor(t){return new bl(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=bl.resolve(!1);for(const n of t)e=e.next((t=>t?bl.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new bl(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new bl(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _l{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Tl(t){return null==t}function Sl(t){return 0===t&&1/t==-1/0}function Il(t){return"number"==typeof t&&Number.isInteger(t)&&!Sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_l._e=-1;const Cl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Al=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dl=Al;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kl(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t,e){this.comparator=t,this.root=e||xl.EMPTY}insert(t,e){return new Ol(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xl.BLACK,null,null))}remove(t){return new Ol(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xl.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ll(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ll(this.root,t,this.comparator,!0)}}class Ll{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xl{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:xl.RED,this.left=null!=i?i:xl.EMPTY,this.right=null!=r?r:xl.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new xl(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xl.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return xl.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xl.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ja();if(this.right.isRed())throw ja();const t=this.left.check();if(t!==this.right.check())throw ja();return t+(this.isRed()?0:1)}}xl.EMPTY=null,xl.RED=!0,xl.BLACK=!1,xl.EMPTY=new class{constructor(){this.size=0}get key(){throw ja()}get value(){throw ja()}get color(){throw ja()}get left(){throw ja()}get right(){throw ja()}copy(t,e,n,i,r){return this}insert(t,e,n){return new xl(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ml{constructor(t){this.comparator=t,this.data=new Ol(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pl(this.data.getIterator())}getIteratorFrom(t){return new Pl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ml))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ml(this.comparator);return e.data=t,e}}class Pl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ul{constructor(t){this.fields=t,t.sort(ul.comparator)}static empty(){return new Ul([])}unionWith(t){let e=new Ml(ul.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ul(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rl(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vl{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Fl("Invalid base64 string: "+t):t}}(t);return new Vl(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Vl(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return il(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vl.EMPTY_BYTE_STRING=new Vl("");const Bl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(t){if($a(!!t),"string"==typeof t){let e=0;const n=Bl.exec(t);if($a(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$l(t.seconds),nanos:$l(t.nanos)}}function $l(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hl(t){return"string"==typeof t?Vl.fromBase64String(t):Vl.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gl(t){const e=t.mapValue.fields.__previous_value__;return zl(e)?Gl(e):e}function ql(t){const e=jl(t.mapValue.fields.__local_write_time__.timestampValue);return new sl(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,e,n,i,r,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Wl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Wl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Wl&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zl(t)?4:ac(t)?9007199254740991:10:ja()}function Yl(t,e){if(t===e)return!0;const n=Xl(t);if(n!==Xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=jl(t.timestampValue),i=jl(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Hl(t.bytesValue).isEqual(Hl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $l(t.geoPointValue.latitude)===$l(e.geoPointValue.latitude)&&$l(t.geoPointValue.longitude)===$l(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $l(t.integerValue)===$l(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=$l(t.doubleValue),i=$l(e.doubleValue);return n===i?Sl(n)===Sl(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],Yl);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(kl(n)!==kl(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Yl(n[r],i[r])))return!1;return!0}(t,e);default:return ja()}}function Jl(t,e){return void 0!==(t.values||[]).find((t=>Yl(t,e)))}function Zl(t,e){if(t===e)return 0;const n=Xl(t),i=Xl(e);if(n!==i)return il(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return il(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=$l(t.integerValue||t.doubleValue),i=$l(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return tc(t.timestampValue,e.timestampValue);case 4:return tc(ql(t),ql(e));case 5:return il(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Hl(t),i=Hl(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=il(n[r],i[r]);if(0!==t)return t}return il(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=il($l(t.latitude),$l(e.latitude));return 0!==n?n:il($l(t.longitude),$l(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Zl(n[r],i[r]);if(t)return t}return il(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ql.mapValue&&e===Ql.mapValue)return 0;if(t===Ql.mapValue)return 1;if(e===Ql.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=il(i[o],s[o]);if(0!==t)return t;const e=Zl(n[i[o]],r[s[o]]);if(0!==e)return e}return il(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ja()}}function tc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return il(t,e);const n=jl(t),i=jl(e),r=il(n.seconds,i.seconds);return 0!==r?r:il(n.nanos,i.nanos)}function ec(t){return nc(t)}function nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=jl(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Hl(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return hl.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=nc(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${nc(t.fields[r])}`;return n+"}"}(t.mapValue):ja()}function ic(t){return!!t&&"integerValue"in t}function rc(t){return!!t&&"arrayValue"in t}function sc(t){return!!t&&"mapValue"in t}function oc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nl(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=oc(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ac(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lc{constructor(t){this.value=t}static empty(){return new lc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!sc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=oc(e)}setAll(t){let e=ul.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=oc(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());sc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Yl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];sc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Nl(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new lc(oc(this.value))}}function cc(t){const e=[];return Nl(t.fields,((t,n)=>{const i=new ul([t]);if(sc(n)){const t=cc(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Ul(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class uc{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new uc(t,0,ol.min(),ol.min(),ol.min(),lc.empty(),0)}static newFoundDocument(t,e,n,i){return new uc(t,1,e,ol.min(),n,i,0)}static newNoDocument(t,e){return new uc(t,2,e,ol.min(),ol.min(),lc.empty(),0)}static newUnknownDocument(t,e){return new uc(t,3,e,ol.min(),ol.min(),lc.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ol.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=lc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=lc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ol.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof uc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new uc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,e){this.position=t,this.inclusive=e}}function dc(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?hl.comparator(hl.fromName(o.referenceValue),n.key):Zl(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function fc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,e="asc"){this.field=t,this.dir=e}}function gc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{}class yc extends mc{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Ic(t,e,n):"array-contains"===e?new kc(t,n):"in"===e?new Nc(t,n):"not-in"===e?new Rc(t,n):"array-contains-any"===e?new Oc(t,n):new yc(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Cc(t,n):new Ac(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Zl(e,this.value)):null!==e&&Xl(this.value)===Xl(e)&&this.matchesComparison(Zl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ja()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vc extends mc{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new vc(t,e)}matches(t){return wc(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function wc(t){return"and"===t.op}function bc(t){return Ec(t)&&wc(t)}function Ec(t){for(const e of t.filters)if(e instanceof vc)return!1;return!0}function _c(t){if(t instanceof yc)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(bc(t))return t.filters.map((t=>_c(t))).join(",");{const e=t.filters.map((t=>_c(t))).join(",");return`${t.op}(${e})`}}function Tc(t,e){return t instanceof yc?function(t,e){return e instanceof yc&&t.op===e.op&&t.field.isEqual(e.field)&&Yl(t.value,e.value)}(t,e):t instanceof vc?function(t,e){return e instanceof vc&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Tc(n,e.filters[i])),!0)}(t,e):void ja()}function Sc(t){return t instanceof yc?function(t){return`${t.field.canonicalString()} ${t.op} ${ec(t.value)}`}(t):t instanceof vc?function(t){return t.op.toString()+" {"+t.getFilters().map(Sc).join(" ,")+"}"}(t):"Filter"}class Ic extends yc{constructor(t,e,n){super(t,e,n),this.key=hl.fromName(n.referenceValue)}matches(t){const e=hl.comparator(t.key,this.key);return this.matchesComparison(e)}}class Cc extends yc{constructor(t,e){super(t,"in",e),this.keys=Dc("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ac extends yc{constructor(t,e){super(t,"not-in",e),this.keys=Dc("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Dc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>hl.fromName(t.referenceValue)))}class kc extends yc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return rc(e)&&Jl(e.arrayValue,this.value)}}class Nc extends yc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Jl(this.value.arrayValue,e)}}class Rc extends yc{constructor(t,e){super(t,"not-in",e)}matches(t){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Jl(this.value.arrayValue,e)}}class Oc extends yc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!rc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Jl(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function xc(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Lc(t,e,n,i,r,s,o)}function Mc(t){const e=Ha(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>_c(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ec(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ec(t))).join(",")),e.ce=t}return e.ce}function Pc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Tc(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fc(t.startAt,e.startAt)&&fc(t.endAt,e.endAt)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uc{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Fc(t,e,n,i,r,s,o,a){return new Uc(t,e,n,i,r,s,o,a)}function Vc(t){return new Uc(t)}function Bc(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function jc(t){return null!==t.collectionGroup}function $c(t){const e=Ha(t);if(null===e.le){e.le=[];const t=new Set;for(const r of e.explicitOrderBy)e.le.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Ml(ul.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new pc(i,n))})),t.has(ul.keyField().canonicalString())||e.le.push(new pc(ul.keyField(),n))}return e.le}function Hc(t){const e=Ha(t);return e.he||(e.he=zc(e,$c(t))),e.he}function zc(t,e){if("F"===t.limitType)return xc(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new pc(t.field,e)}));const n=t.endAt?new hc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new hc(t.startAt.position,t.startAt.inclusive):null;return xc(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Gc(t,e,n){return new Uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qc(t,e){return Pc(Hc(t),Hc(e))&&t.limitType===e.limitType}function Kc(t){return`${Mc(Hc(t))}|lt:${t.limitType}`}function Wc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Sc(t))).join(", ")}]`),Tl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ec(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ec(t))).join(",")),`Target(${e})`}(Hc(t))}; limitType=${t.limitType})`}function Qc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):hl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of $c(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=dc(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,$c(t),e))&&!(t.endAt&&!function(t,e,n){const i=dc(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,$c(t),e))}(t,e)}function Xc(t){return(e,n)=>{let i=!1;for(const r of $c(t)){const t=Yc(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Yc(t,e,n){const i=t.field.isKeyField()?hl.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Zl(i,r):ja()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ja()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Nl(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return Rl(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Ol(hl.comparator);function tu(){return Zc}const eu=new Ol(hl.comparator);function nu(...t){let e=eu;for(const n of t)e=e.insert(n.key,n);return e}function iu(t){let e=eu;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ru(){return ou()}function su(){return ou()}function ou(){return new Jc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const au=new Ol(hl.comparator),lu=new Ml(hl.comparator);function cu(...t){let e=lu;for(const n of t)e=e.add(n);return e}const uu=new Ml(il);function hu(){return uu}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sl(e)?"-0":e}}function fu(t){return{integerValue:""+t}}function pu(t,e){return Il(e)?fu(e):du(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this._=void 0}}function mu(t,e,n){return t instanceof wu?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&zl(e)&&(e=Gl(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof bu?Eu(t,e):t instanceof _u?Tu(t,e):function(t,e){const n=vu(t,e),i=Iu(n)+Iu(t.Ie);return ic(n)&&ic(t.Ie)?fu(i):du(t.serializer,i)}(t,e)}function yu(t,e,n){return t instanceof bu?Eu(t,e):t instanceof _u?Tu(t,e):n}function vu(t,e){return t instanceof Su?function(t){return ic(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class wu extends gu{}class bu extends gu{constructor(t){super(),this.elements=t}}function Eu(t,e){const n=Cu(e);for(const i of t.elements)n.some((t=>Yl(t,i)))||n.push(i);return{arrayValue:{values:n}}}class _u extends gu{constructor(t){super(),this.elements=t}}function Tu(t,e){let n=Cu(e);for(const i of t.elements)n=n.filter((t=>!Yl(t,i)));return{arrayValue:{values:n}}}class Su extends gu{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Iu(t){return $l(t.integerValue||t.doubleValue)}function Cu(t){return rc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof bu&&e instanceof bu||t instanceof _u&&e instanceof _u?rl(t.elements,e.elements,Yl):t instanceof Su&&e instanceof Su?Yl(t.Ie,e.Ie):t instanceof wu&&e instanceof wu}(t.transform,e.transform)}class Du{constructor(t,e){this.version=t,this.transformResults=e}}class ku{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ku}static exists(t){return new ku(void 0,t)}static updateTime(t){return new ku(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ru{}function Ou(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new $u(t.key,ku.none()):new Uu(t.key,t.data,ku.none());{const n=t.data,i=lc.empty();let r=new Ml(ul.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Fu(t.key,i,new Ul(r.toArray()),ku.none())}}function Lu(t,e,n){t instanceof Uu?function(t,e,n){const i=t.value.clone(),r=Bu(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Fu?function(t,e,n){if(!Nu(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Bu(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Vu(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function xu(t,e,n,i){return t instanceof Uu?function(t,e,n,i){if(!Nu(t.precondition,e))return n;const r=t.value.clone(),s=ju(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Fu?function(t,e,n,i){if(!Nu(t.precondition,e))return n;const r=ju(t.fieldTransforms,i,e),s=e.data;return s.setAll(Vu(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Nu(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Mu(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=vu(i.transform,t||null);null!=r&&(null===n&&(n=lc.empty()),n.set(i.field,r))}return n||null}function Pu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&rl(t,e,((t,e)=>Au(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uu extends Ru{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fu extends Ru{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Vu(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Bu(t,e,n){const i=new Map;$a(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,yu(o,a,n[r]))}return i}function ju(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,mu(t,s,e))}return i}class $u extends Ru{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hu extends Ru{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Lu(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=xu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=xu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=su();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Ou(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(ol.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),cu())}isEqual(t){return this.batchId===t.batchId&&rl(this.mutations,t.mutations,((t,e)=>Pu(t,e)))&&rl(this.baseMutations,t.baseMutations,((t,e)=>Pu(t,e)))}}class Gu{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){$a(t.mutations.length===n.length);let i=function(){return au}();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Gu(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ku,Wu;function Qu(t){switch(t){default:return ja();case za.CANCELLED:case za.UNKNOWN:case za.DEADLINE_EXCEEDED:case za.RESOURCE_EXHAUSTED:case za.INTERNAL:case za.UNAVAILABLE:case za.UNAUTHENTICATED:return!1;case za.INVALID_ARGUMENT:case za.NOT_FOUND:case za.ALREADY_EXISTS:case za.PERMISSION_DENIED:case za.FAILED_PRECONDITION:case za.ABORTED:case za.OUT_OF_RANGE:case za.UNIMPLEMENTED:case za.DATA_LOSS:return!0}}function Xu(t){if(void 0===t)return Fa("GRPC error has no .code"),za.UNKNOWN;switch(t){case Ku.OK:return za.OK;case Ku.CANCELLED:return za.CANCELLED;case Ku.UNKNOWN:return za.UNKNOWN;case Ku.DEADLINE_EXCEEDED:return za.DEADLINE_EXCEEDED;case Ku.RESOURCE_EXHAUSTED:return za.RESOURCE_EXHAUSTED;case Ku.INTERNAL:return za.INTERNAL;case Ku.UNAVAILABLE:return za.UNAVAILABLE;case Ku.UNAUTHENTICATED:return za.UNAUTHENTICATED;case Ku.INVALID_ARGUMENT:return za.INVALID_ARGUMENT;case Ku.NOT_FOUND:return za.NOT_FOUND;case Ku.ALREADY_EXISTS:return za.ALREADY_EXISTS;case Ku.PERMISSION_DENIED:return za.PERMISSION_DENIED;case Ku.FAILED_PRECONDITION:return za.FAILED_PRECONDITION;case Ku.ABORTED:return za.ABORTED;case Ku.OUT_OF_RANGE:return za.OUT_OF_RANGE;case Ku.UNIMPLEMENTED:return za.UNIMPLEMENTED;case Ku.DATA_LOSS:return za.DATA_LOSS;default:return ja()}}(Wu=Ku||(Ku={}))[Wu.OK=0]="OK",Wu[Wu.CANCELLED=1]="CANCELLED",Wu[Wu.UNKNOWN=2]="UNKNOWN",Wu[Wu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wu[Wu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wu[Wu.NOT_FOUND=5]="NOT_FOUND",Wu[Wu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wu[Wu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wu[Wu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wu[Wu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wu[Wu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wu[Wu.ABORTED=10]="ABORTED",Wu[Wu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wu[Wu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wu[Wu.INTERNAL=13]="INTERNAL",Wu[Wu.UNAVAILABLE=14]="UNAVAILABLE",Wu[Wu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new Ra([4294967295,4294967295],0);(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"}})(),(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}})(),(()=>{const t={and:"AND",or:"OR"}})();class Yu{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zu(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function th(t,e){return Ju(t,e.toTimestamp())}function eh(t){return $a(!!t),ol.fromTimestamp(function(t){const e=jl(t);return new sl(e.seconds,e.nanos)}(t))}function nh(t,e){return function(t){return new ll(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ih(t){const e=ll.fromString(t);return $a(gh(e)),e}function rh(t,e){return nh(t.databaseId,e.path)}function sh(t){const e=ih(t);return 4===e.length?ll.emptyPath():ah(e)}function oh(t){return new ll(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ah(t){return $a(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function lh(t,e,n){return{name:rh(t,e),fields:n.value.mapValue.fields}}function ch(t,e){let n;if(e instanceof Uu)n={update:lh(t,e.key,e.value)};else if(e instanceof $u)n={delete:rh(t,e.key)};else if(e instanceof Fu)n={update:lh(t,e.key,e.data),updateMask:ph(e.fieldMask)};else{if(!(e instanceof Hu))return ja();n={verify:rh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof wu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _u)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Su)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw ja()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:th(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ja()}(t,e.precondition)),n}function uh(t,e){return t&&t.length>0?($a(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?eh(t.updateTime):eh(e);return n.isEqual(ol.min())&&(n=eh(e)),new Du(n,t.transformResults||[])}(t,e)))):[]}function hh(t){let e=sh(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){$a(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=dh(t);return e instanceof vc&&bc(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new pc(fh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Tl(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new hc(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new hc(n,e)}(n.endAt)),Fc(e,r,o,s,a,"F",l,c)}function dh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=fh(t.unaryFilter.field);return yc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=fh(t.unaryFilter.field);return yc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fh(t.unaryFilter.field);return yc.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=fh(t.unaryFilter.field);return yc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ja()}}(t):void 0!==t.fieldFilter?function(t){return yc.create(fh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ja()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return vc.create(t.compositeFilter.filters.map((t=>dh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ja()}}(t.compositeFilter.op))}(t):ja()}function fh(t){return ul.fromServerFormat(t.fieldPath)}function ph(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t){this.ut=t}}function yh(t){const e=hh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Gc(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et($l(t.integerValue));else if("doubleValue"in t){const n=$l(t.doubleValue);isNaN(n)?this.Tt(e,13):(this.Tt(e,15),Sl(n)?e.Et(0):e.Et(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Tt(e,20),"string"==typeof n?e.dt(n):(e.dt(`${n.seconds||""}`),e.Et(n.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt(Hl(t.bytesValue)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Tt(e,45),e.Et(n.latitude||0),e.Et(n.longitude||0)}else"mapValue"in t?ac(t)?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):ja()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){const n=t.fields||{};this.Tt(e,55);for(const i of Object.keys(n))this.At(i,e),this.Pt(n[i],e)}yt(t,e){const n=t.values||[];this.Tt(e,50);for(const i of n)this.Pt(i,e)}ft(t,e){this.Tt(e,37),hl.fromName(t).path.forEach((t=>{this.Tt(e,60),this.wt(t,e)}))}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}vh.St=new vh;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wh{constructor(){this.on=new bh}addToCollectionParentIndex(t,e){return this.on.add(e),bl.resolve()}getCollectionParents(t,e){return bl.resolve(this.on.getEntries(e))}addFieldIndex(t,e){return bl.resolve()}deleteFieldIndex(t,e){return bl.resolve()}deleteAllFieldIndexes(t){return bl.resolve()}createTargetIndexes(t,e){return bl.resolve()}getDocumentsMatchingTarget(t,e){return bl.resolve(null)}getIndexType(t,e){return bl.resolve(0)}getFieldIndexes(t,e){return bl.resolve([])}getNextCollectionGroupToUpdate(t){return bl.resolve(null)}getMinOffset(t,e){return bl.resolve(gl.min())}getMinOffsetFromCollectionGroup(t,e){return bl.resolve(gl.min())}updateCollectionGroup(t,e,n){return bl.resolve()}updateIndexEntries(t,e){return bl.resolve()}}class bh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Ml(ll.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Ml(ll.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Uint8Array(0);class Eh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Eh(t,Eh.DEFAULT_COLLECTION_PERCENTILE,Eh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eh.DEFAULT_COLLECTION_PERCENTILE=10,Eh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eh.DEFAULT=new Eh(41943040,Eh.DEFAULT_COLLECTION_PERCENTILE,Eh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eh.DISABLED=new Eh(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _h{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new _h(0)}static Nn(){return new _h(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Th{constructor(){this.changes=new Jc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,uc.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?bl.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&xu(n.mutation,t,Ul.empty(),sl.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,cu()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=cu()){const i=ru();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=nu();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ru();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,cu())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=tu();const s=ou(),o=function(){return ou()}();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Fu)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),xu(o.mutation,e,o.mutation.getFieldMask(),sl.now())):s.set(e.key,Ul.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Sh(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=ou();let i=new Ol(((t,e)=>t-e)),r=cu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ul.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||cu()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=su();l.forEach((t=>{if(!r.has(t)){const i=Ou(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return bl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return hl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):jc(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):bl.resolve(ru());let o=-1,a=r;return s.next((e=>bl.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?bl.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,cu()))).next((t=>({batchId:o,changes:iu(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new hl(e)).next((t=>{let e=nu();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=nu();return this.indexManager.getCollectionParents(t,r).next((o=>bl.forEach(o,(o=>{const a=function(t,e){return new Uc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,uc.newInvalidDocument(i)))}));let n=nu();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&xu(s.mutation,i,Ul.empty(),sl.now()),Qc(e,i)&&(n=n.insert(t,i))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,e){return bl.resolve(this.ur.get(e))}saveBundleMetadata(t,e){return this.ur.set(e.id,function(t){return{id:t.id,version:t.version,createTime:eh(t.createTime)}}(e)),bl.resolve()}getNamedQuery(t,e){return bl.resolve(this.cr.get(e))}saveNamedQuery(t,e){return this.cr.set(e.name,function(t){return{name:t.name,query:yh(t.bundledQuery),readTime:eh(t.readTime)}}(e)),bl.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this.overlays=new Ol(hl.comparator),this.lr=new Map}getOverlay(t,e){return bl.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ru();return bl.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.lt(t,e,i)})),bl.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.lr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.lr.delete(n)),bl.resolve()}getOverlaysForCollection(t,e,n){const i=ru(),r=e.length+1,s=new hl(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return bl.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Ol(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ru(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ru(),a=r.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=i)break;return bl.resolve(o)}lt(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new qu(e,n));let r=this.lr.get(e);void 0===r&&(r=cu(),this.lr.set(e,r)),this.lr.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.hr=new Ml(kh.Pr),this.Ir=new Ml(kh.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,e){const n=new kh(t,e);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.dr(new kh(t,e))}Ar(t,e){t.forEach((t=>this.removeReference(t,e)))}Rr(t){const e=new hl(new ll([])),n=new kh(e,t),i=new kh(e,t+1),r=[];return this.Ir.forEachInRange([n,i],(t=>{this.dr(t),r.push(t.key)})),r}Vr(){this.hr.forEach((t=>this.dr(t)))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const e=new hl(new ll([])),n=new kh(e,t),i=new kh(e,t+1);let r=cu();return this.Ir.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new kh(t,0),n=this.hr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class kh{constructor(t,e){this.key=t,this.gr=e}static Pr(t,e){return hl.comparator(t.key,e.key)||il(t.gr,e.gr)}static Tr(t,e){return il(t.gr,e.gr)||hl.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.pr=1,this.yr=new Ml(kh.Pr)}checkEmpty(t){return bl.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zu(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.yr=this.yr.add(new kh(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return bl.resolve(s)}lookupMutationBatch(t,e){return bl.resolve(this.wr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Sr(n),r=i<0?0:i;return bl.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return bl.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(t){return bl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new kh(e,0),i=new kh(e,Number.POSITIVE_INFINITY),r=[];return this.yr.forEachInRange([n,i],(t=>{const e=this.wr(t.gr);r.push(e)})),bl.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ml(il);return e.forEach((t=>{const e=new kh(t,0),i=new kh(t,Number.POSITIVE_INFINITY);this.yr.forEachInRange([e,i],(t=>{n=n.add(t.gr)}))})),bl.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;hl.isDocumentKey(r)||(r=r.child(""));const s=new kh(new hl(r),0);let o=new Ml(il);return this.yr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.gr)),!0)}),s),bl.resolve(this.br(o))}br(t){const e=[];return t.forEach((t=>{const n=this.wr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){$a(0===this.Dr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return bl.forEach(e.mutations,(i=>{const r=new kh(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.yr=n}))}Fn(t){}containsKey(t,e){const n=new kh(e,0),i=this.yr.firstAfterOrEqual(n);return bl.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,bl.resolve()}Dr(t,e){return this.Sr(t)}Sr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}wr(t){const e=this.Sr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t){this.Cr=t,this.docs=function(){return new Ol(hl.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Cr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return bl.resolve(n?n.document.mutableCopy():uc.newInvalidDocument(e))}getEntries(t,e){let n=tu();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():uc.newInvalidDocument(t))})),bl.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=tu();const s=e.path,o=new hl(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||ml(pl(o),n)<=0||(i.has(o.key)||Qc(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return bl.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ja()}vr(t,e){return bl.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Oh(this)}getSize(t){return bl.resolve(this.size)}}class Oh extends Th{constructor(t){super(),this._r=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this._r.addEntry(t,i)):this._r.removeEntry(n)})),bl.waitFor(e)}getFromCache(t,e){return this._r.getEntry(t,e)}getAllFromCache(t,e){return this._r.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t){this.persistence=t,this.Fr=new Jc((t=>Mc(t)),Pc),this.lastRemoteSnapshotVersion=ol.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Dh,this.targetCount=0,this.Nr=_h.On()}forEachTarget(t,e){return this.Fr.forEach(((t,n)=>e(n))),bl.resolve()}getLastRemoteSnapshotVersion(t){return bl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bl.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),bl.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Mr&&(this.Mr=e),bl.resolve()}kn(t){this.Fr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Nr=new _h(e),this.highestTargetId=e),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,e){return this.kn(e),this.targetCount+=1,bl.resolve()}updateTargetData(t,e){return this.kn(e),bl.resolve()}removeTargetData(t,e){return this.Fr.delete(e.target),this.Or.Rr(e.targetId),this.targetCount-=1,bl.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Fr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),bl.waitFor(r).next((()=>i))}getTargetCount(t){return bl.resolve(this.targetCount)}getTargetData(t,e){const n=this.Fr.get(e)||null;return bl.resolve(n)}addMatchingKeys(t,e,n){return this.Or.Er(e,n),bl.resolve()}removeMatchingKeys(t,e,n){this.Or.Ar(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),bl.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Or.Rr(e),bl.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Or.mr(e);return bl.resolve(n)}containsKey(t,e){return bl.resolve(this.Or.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,e){this.Br={},this.overlays={},this.Lr=new _l(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Lh(this),this.indexManager=new wh,this.remoteDocumentCache=function(t){return new Rh(t)}((t=>this.referenceDelegate.Qr(t))),this.serializer=new mh(e),this.Kr=new Ch(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ah,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Nh(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,e,n){Ua("MemoryPersistence","Starting transaction:",t);const i=new Mh(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((t=>this.referenceDelegate.Ur(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Wr(t,e){return bl.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class Mh extends vl{constructor(t){super(),this.currentSequenceNumber=t}}class Ph{constructor(t){this.persistence=t,this.Gr=new Dh,this.zr=null}static jr(t){return new Ph(t)}get Hr(){if(this.zr)return this.zr;throw ja()}addReference(t,e,n){return this.Gr.addReference(n,e),this.Hr.delete(n.toString()),bl.resolve()}removeReference(t,e,n){return this.Gr.removeReference(n,e),this.Hr.add(n.toString()),bl.resolve()}markPotentiallyOrphaned(t,e){return this.Hr.add(e.toString()),bl.resolve()}removeTarget(t,e){this.Gr.Rr(e.targetId).forEach((t=>this.Hr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Hr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}$r(){this.zr=new Set}Ur(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bl.forEach(this.Hr,(n=>{const i=hl.fromPath(n);return this.Jr(t,i).next((t=>{t||e.removeEntry(i,ol.min())}))})).next((()=>(this.zr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Jr(t,e).next((t=>{t?this.Hr.delete(e.toString()):this.Hr.add(e.toString())}))}Qr(t){return 0}Jr(t,e){return bl.or([()=>bl.resolve(this.Gr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Wr(t,e)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.ki=n,this.qi=i}static Qi(t,e){let n=cu(),i=cu();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Uh(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,e){this.Gi=t,this.indexManager=e,this.Ki=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.zi(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.ji(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new Fh;return this.Hi(t,e,n).next((i=>{if(r.result=i,this.$i)return this.Ji(t,e,n,i.size)}))})).next((()=>r.result))}Ji(t,e,n,i){return n.documentReadCount<this.Ui?(Pa()<=ue.DEBUG&&Ua("QueryEngine","SDK will not create cache indexes for query:",Wc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),bl.resolve()):(Pa()<=ue.DEBUG&&Ua("QueryEngine","Query:",Wc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(Pa()<=ue.DEBUG&&Ua("QueryEngine","The SDK decides to create cache indexes for query:",Wc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Hc(e))):bl.resolve())}zi(t,e){if(Bc(e))return bl.resolve(null);let n=Hc(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Gc(e,null,"F"),n=Hc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=cu(...i);return this.Gi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Yi(e,i);return this.Zi(e,s,r,n.readTime)?this.zi(t,Gc(e,null,"F")):this.Xi(t,s,e,n)}))))})))))}ji(t,e,n,i){return Bc(e)||i.isEqual(ol.min())?bl.resolve(null):this.Gi.getDocuments(t,n).next((r=>{const s=this.Yi(e,r);return this.Zi(e,s,n,i)?bl.resolve(null):(Pa()<=ue.DEBUG&&Ua("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wc(e)),this.Xi(t,s,e,fl(i,-1)).next((t=>t)))}))}Yi(t,e){let n=new Ml(Xc(t));return e.forEach(((e,i)=>{Qc(t,i)&&(n=n.add(i))})),n}Zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Hi(t,e,n){return Pa()<=ue.DEBUG&&Ua("QueryEngine","Using full collection scan to execute query:",Wc(e)),this.Gi.getDocumentsMatchingQuery(t,e,gl.min(),n)}Xi(t,e,n,i){return this.Gi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,e,n,i){this.persistence=t,this.es=e,this.serializer=i,this.ts=new Ol(il),this.ns=new Jc((t=>Mc(t)),Pc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(n)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ih(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ts)))}}function jh(t,e,n,i){return new Bh(t,e,n,i)}async function $h(t,e){const n=Ha(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.os(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=cu();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({_s:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Hh(t,e){const n=Ha(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ss.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=bl.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);$a(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=cu();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}function zh(t){const e=Ha(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.qr.getLastRemoteSnapshotVersion(t)))}function Gh(t,e){const n=Ha(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class qh{constructor(){this.activeTargetIds=hu()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Kh{constructor(){this.eo=new qh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,e,n){this.no[t]=e}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new qh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{ro(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ua("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Ua("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh=null;function Yh(){return null===Xh?Xh=function(){return 268435456+Math.round(2147483648*Math.random())}():Xh++,"0x"+Xh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="WebChannelConnection";class ed extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=e+"://"+t.host,this.fo=`projects/${n}/databases/${i}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get yo(){return!1}wo(t,e,n,i,r){const s=Yh(),o=this.So(t,e);Ua("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,i,r),this.Do(t,o,a,n).then((e=>(Ua("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Va("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,r,s){return this.wo(t,e,n,i,r)}bo(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}So(t,e){const n=Jh[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,e,n,i){const r=Yh();return new Promise(((s,o)=>{const a=new Na;a.setWithCredentials(!0),a.listenOnce(Ia.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Sa.NO_ERROR:const e=a.getResponseJson();Ua(td,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Sa.TIMEOUT:Ua(td,`RPC '${t}' ${r} timed out`),o(new Ga(za.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const n=a.getStatus();if(Ua(td,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(za).indexOf(e)>=0?e:za.UNKNOWN}(e.status);o(new Ga(t,e.message))}else o(new Ga(za.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ga(za.UNAVAILABLE,"Connection failed."));break;default:ja()}}finally{Ua(td,`RPC '${t}' ${r} completed.`)}}));const l=JSON.stringify(i);Ua(td,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",l,n,15)}))}vo(t,e,n){const i=Yh(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=_a(),o=Ta(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Da({})),this.bo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Ua(td,`Creating RPC '${t}' stream ${i}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Zh({co:e=>{d?Ua(td,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Ua(td,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),Ua(td,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},lo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,ka.EventType.OPEN,(()=>{d||Ua(td,`RPC '${t}' stream ${i} transport opened.`)})),p(u,ka.EventType.CLOSE,(()=>{d||(d=!0,Ua(td,`RPC '${t}' stream ${i} transport closed`),f.Ro())})),p(u,ka.EventType.ERROR,(e=>{d||(d=!0,Va(td,`RPC '${t}' stream ${i} transport errored:`,e),f.Ro(new Ga(za.UNAVAILABLE,"The operation could not be completed")))})),p(u,ka.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];$a(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ua(td,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Ku[t];if(void 0!==e)return Xu(e)}(e),r=o.message;void 0===n&&(n=za.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ro(new Ga(n,r)),u.close()}else Ua(td,`RPC '${t}' stream ${i} received:`,r),f.Vo(r)}})),p(o,Ca.STAT_EVENT,(e=>{e.stat===Aa.PROXY?Ua(td,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Aa.NOPROXY&&Ua(td,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ao()}),0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new Yu(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,e,n=1e3,i=1.5,r=6e4){this.si=t,this.timerId=e,this.Fo=n,this.Mo=i,this.xo=r,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const e=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,e-n);i>0&&Ua("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),t()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,e,n,i,r,s,o,a){this.si=t,this.Ko=n,this.$o=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new rd(t,e)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,e){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():e&&e.code===za.RESOURCE_EXHAUSTED?(Fa(e.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):e&&e.code===za.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(e)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),e=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Uo===e&&this.s_(t,n)}),(e=>{t((()=>{const t=new Ga(za.UNKNOWN,"Fetching auth token failed: "+e.message);return this.o_(t)}))}))}s_(t,e){const n=this.i_(this.Uo);this.stream=this.__(t,e),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((t=>{n((()=>this.o_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(t){return Ua("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return e=>{this.si.enqueueAndForget((()=>this.Uo===t?e():(Ua("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class od extends sd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,e){return this.connection.vo("Write",t,e)}onMessage(t){if($a(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const e=uh(t.writeResults,t.commitTime),n=eh(t.commitTime);return this.listener.I_(n,e)}return $a(!t.writeResults||0===t.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=oh(this.serializer),this.e_(t)}P_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>ch(this.serializer,t)))};this.e_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Ga(za.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,e,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.wo(t,e,n,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===za.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ga(za.UNKNOWN,t.toString())}))}Co(t,e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Co(t,e,n,r,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===za.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ga(za.UNKNOWN,t.toString())}))}terminate(){this.d_=!0}}class ld{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(t){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,"Online"===t&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Fa(e),this.f_=!1):Ua("OnlineStateTracker",e)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=r,this.F_.ro((t=>{n.enqueueAndForget((async()=>{dd(this)&&(Ua("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ha(t);e.C_.add(4),await hd(e),e.M_.set("Unknown"),e.C_.delete(4),await ud(e)}(this))}))})),this.M_=new ld(n,i)}}async function ud(t){if(dd(t))for(const e of t.v_)await e(!0)}async function hd(t){for(const e of t.v_)await e(!1)}function dd(t){return 0===Ha(t).C_.size}async function fd(t,e,n){if(!El(e))throw e;t.C_.add(1),await hd(t),t.M_.set("Offline"),n||(n=()=>zh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ua("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await ud(t)}))}function pd(t,e){return e().catch((n=>fd(t,n,e)))}async function gd(t){const e=Ha(t),n=Cd(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;md(e);)try{const t=await Gh(e.localStore,i);if(null===t){0===e.b_.length&&n.Zo();break}i=t.batchId,yd(e,t)}catch(t){await fd(e,t)}vd(e)&&wd(e)}function md(t){return dd(t)&&t.b_.length<10}function yd(t,e){t.b_.push(e);const n=Cd(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function vd(t){return dd(t)&&!Cd(t).jo()&&t.b_.length>0}function wd(t){Cd(t).start()}async function bd(t){Cd(t).E_()}async function Ed(t){const e=Cd(t);for(const n of t.b_)e.P_(n.mutations)}async function _d(t,e,n){const i=t.b_.shift(),r=Gu.from(i,e,n);await pd(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await gd(t)}async function Td(t,e){e&&Cd(t).h_&&await async function(t,e){if(function(t){return Qu(t)&&t!==za.ABORTED}(e.code)){const n=t.b_.shift();Cd(t).Yo(),await pd(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await gd(t)}}(t,e),vd(t)&&wd(t)}async function Sd(t,e){const n=Ha(t);n.asyncQueue.verifyOperationInProgress(),Ua("RemoteStore","RemoteStore received new credentials");const i=dd(n);n.C_.add(3),await hd(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await ud(n)}async function Id(t,e){const n=Ha(t);e?(n.C_.delete(2),await ud(n)):e||(n.C_.add(2),await hd(n),n.M_.set("Unknown"))}function Cd(t){return t.N_||(t.N_=function(t,e,n){const i=Ha(t);return i.A_(),new od(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{ho:bd.bind(null,t),Io:Td.bind(null,t),T_:Ed.bind(null,t),I_:_d.bind(null,t)}),t.v_.push((async e=>{e?(t.N_.Yo(),await gd(t)):(await t.N_.stop(),t.b_.length>0&&(Ua("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ad{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Ad(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ga(za.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dd(t,e){if(Fa("AsyncQueue",`${e}: ${t}`),El(t))return new Ga(za.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this.queries=new Jc((t=>Kc(t)),qc),this.onlineState="Unknown",this.q_=new Set}}function Nd(t){t.q_.forEach((t=>{t.next()}))}class Rd{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Jc((t=>Kc(t)),qc),this.fa=new Map,this.ga=new Set,this.pa=new Ol(hl.comparator),this.ya=new Map,this.wa=new Dh,this.Sa={},this.ba=new Map,this.Da=_h.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Od(t,e,n){const i=Bd(t);try{const t=await function(t,e){const n=Ha(t),i=sl.now(),r=e.reduce(((t,e)=>t.add(e.key)),cu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=tu(),l=cu();return n.ss.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=Mu(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Fu(t.key,e,cc(e.value.mapValue),ku.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:iu(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Sa[t.currentUser.toKey()];i||(i=new Ol(il)),i=i.insert(e,n),t.Sa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Fd(i,t.changes),await gd(i.remoteStore)}catch(t){const e=Dd(t,"Failed to persist write");n.reject(e)}}function Ld(t,e,n){const i=Ha(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ma.forEach(((n,i)=>{const r=i.view.Q_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Ha(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.listeners)r.Q_(e)&&(i=!0)})),i&&Nd(n)}(i.eventManager,e),t.length&&i.Va.a_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xd(t,e){const n=Ha(t),i=e.batch.batchId;try{const t=await Hh(n.localStore,e);Ud(n,i,null),Pd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fd(n,t)}catch(t){await wl(t)}}async function Md(t,e,n){const i=Ha(t);try{const t=await function(t,e){const n=Ha(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>($a(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Ud(i,e,n),Pd(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fd(i,t)}catch(n){await wl(n)}}function Pd(t,e){(t.ba.get(e)||[]).forEach((t=>{t.resolve()})),t.ba.delete(e)}function Ud(t,e,n){const i=Ha(t);let r=i.Sa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}async function Fd(t,e,n){const i=Ha(t),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach(((t,a)=>{o.push(i.va(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=Uh.Qi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.Va.a_(r),await async function(t,e){const n=Ha(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>bl.forEach(e,(e=>bl.forEach(e.ki,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>bl.forEach(e.qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!El(t))throw t;Ua("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ts.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ts=n.ts.insert(t,r)}}}(i.localStore,s))}async function Vd(t,e){const n=Ha(t);if(!n.currentUser.isEqual(e)){Ua("SyncEngine","User change. New user:",e.toKey());const t=await $h(n.localStore,e);n.currentUser=e,function(t,e){t.ba.forEach((t=>{t.forEach((t=>{t.reject(new Ga(za.CANCELLED,e))}))})),t.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Fd(n,t._s)}}function Bd(t){const e=Ha(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Md.bind(null,e),e}class jd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=id(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return jh(this.persistence,new Vh,t.initialUser,this.serializer)}createPersistence(t){return new xh(Ph.jr,this.serializer)}createSharedClientState(t){return new Kh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $d{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Ld(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vd.bind(null,this.syncEngine),await Id(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new kd}()}createDatastore(t){const e=id(t.databaseInfo.databaseId),n=function(t){return new ed(t)}(t.databaseInfo);return function(t,e,n,i){return new ad(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new cd(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Ld(this.syncEngine,t,0)),function(){return Qh.D()?new Qh:new Wh}())}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Rd(t,e,n,i,r,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ha(t);Ua("RemoteStore","RemoteStore shutting down."),e.C_.add(5),await hd(e),e.F_.shutdown(),e.M_.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hd{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=La.UNAUTHENTICATED,this.clientId=nl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ua("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ua("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ga(za.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Dd(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function zd(t,e){t.asyncQueue.verifyOperationInProgress(),Ua("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await $h(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Gd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Kd(t);Ua("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>Sd(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Sd(e.remoteStore,n))),t._onlineComponents=e}function qd(t){return"FirebaseError"===t.name?t.code===za.FAILED_PRECONDITION||t.code===za.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Kd(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ua("FirestoreClient","Using user provided OfflineComponentProvider");try{await zd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!qd(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await zd(t,new jd)}}else Ua("FirestoreClient","Using default OfflineComponentProvider"),await zd(t,new jd);return t._offlineComponents}async function Wd(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ua("FirestoreClient","Using user provided OnlineComponentProvider"),await Gd(t,t._uninitializedComponentsProvider._online)):(Ua("FirestoreClient","Using default OnlineComponentProvider"),await Gd(t,new $d))),t._onlineComponents}function Qd(t){return Wd(t).then((t=>t.syncEngine))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xd(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Yd=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){if(!n)throw new Ga(za.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zd(t,e,n,i){if(!0===e&&!0===i)throw new Ga(za.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tf(t){if(!hl.isDocumentKey(t))throw new Ga(za.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ef(t){if(hl.isDocumentKey(t))throw new Ga(za.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ja()}function rf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ga(za.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nf(t);throw new Ga(za.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sf{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ga(za.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ga(za.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Zd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xd(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ga(za.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Ga(za.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Ga(za.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class of{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ga(za.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ga(za.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Wa;switch(t.type){case"firstParty":return new Ja(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ga(za.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Yd.get(t);e&&(Ua("ComponentProvider","Removing Datastore"),Yd.delete(t),e.terminate())}(this),Promise.resolve()}}function af(t,e,n,i={}){var r;const s=(t=rf(t,of))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=La.MOCK_USER;else{e=qt(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ga(za.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new La(s)}t._authCredentials=new Qa(new Ka(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new lf(this.firestore,t,this._query)}}class cf{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new cf(this.firestore,t,this._key)}}class uf extends lf{constructor(t,e,n){super(t,e,Vc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new cf(this.firestore,null,new hl(t))}withConverter(t){return new uf(this.firestore,t,this._path)}}function hf(t,e,...n){if(t=ne(t),Jd("collection","path",e),t instanceof of){const i=ll.fromString(e,...n);return ef(i),new uf(t,null,i)}{if(!(t instanceof cf||t instanceof uf))throw new Ga(za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ll.fromString(e,...n));return ef(i),new uf(t.firestore,null,i)}}function df(t,e,...n){if(t=ne(t),1===arguments.length&&(e=nl.newId()),Jd("doc","path",e),t instanceof of){const i=ll.fromString(e,...n);return tf(i),new cf(t,null,new hl(i))}{if(!(t instanceof cf||t instanceof uf))throw new Ga(za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ll.fromString(e,...n));return tf(i),new cf(t.firestore,t instanceof uf?t.converter:null,new hl(i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ff{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new rd(this,"async_queue_retry"),this.iu=()=>{const t=nd();t&&Ua("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const t=nd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const e=nd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise((()=>{}));const e=new qa;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ya.push(t),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!El(t))throw t;Ua("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(t){const e=this.Ja.then((()=>(this.tu=!0,t().catch((t=>{this.eu=t,this.tu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw Fa("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.tu=!1,t))))));return this.Ja=e,e}enqueueAfterDelay(t,e,n){this.su(),this.ru.indexOf(t)>-1&&(e=0);const i=Ad.createAndSchedule(this,t,e,n,(t=>this.au(t)));return this.Xa.push(i),i}su(){this.eu&&ja()}verifyOperationInProgress(){}async uu(){let t;do{t=this.Ja,await t}while(t!==this.Ja)}cu(t){for(const e of this.Xa)if(e.timerId===t)return!0;return!1}lu(t){return this.uu().then((()=>{this.Xa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Xa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.uu()}))}hu(t){this.ru.push(t)}au(t){const e=this.Xa.indexOf(t);this.Xa.splice(e,1)}}class pf extends of{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=function(){return new ff}(),this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yf(this),this._firestoreClient.terminate()}}function gf(t,e){const n="object"==typeof t?t:Dn(),i="string"==typeof t?t:e||"(default)",r=_n(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=Ht("firestore");t&&af(r,...t)}return r}function mf(t){return t._firestoreClient||yf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yf(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Kl(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Xd(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Hd(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vf(Vl.fromBase64String(t))}catch(t){throw new Ga(za.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new vf(Vl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ga(za.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ul(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bf{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ga(za.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ga(za.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return il(this._lat,t._lat)||il(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=/^__.*__$/;class Tf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Fu(t,this.data,this.fieldMask,e,this.fieldTransforms):new Uu(t,this.data,e,this.fieldTransforms)}}function Sf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ja()}}class If{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Pu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new If(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Au(t),i}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Pf(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(0===t.length)throw this.mu("Document fields must not be empty");if(Sf(this.Iu)&&_f.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class Cf{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||id(t)}pu(t,e,n,i=!1){return new If({Iu:t,methodName:e,gu:n,path:ul.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(t){const e=t._freezeSettings(),n=id(t._databaseId);return new Cf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Df(t,e,n,i,r,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,r);Of("Data must be an object, but it was:",o,i);const a=Nf(i,o);let l,c;if(s.merge)l=new Ul(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Lf(e,i,n);if(!o.contains(r))throw new Ga(za.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Uf(t,r)||t.push(r)}l=new Ul(t),c=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=o.fieldTransforms;return new Tf(new lc(a),l,c)}function kf(t,e){if(Rf(t=ne(t)))return Of("Unsupported field value:",e,t),Nf(t,e);if(t instanceof bf)return function(t,e){if(!Sf(e.Iu))throw e.mu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.mu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=kf(r,e.Vu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=ne(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=sl.fromDate(t);return{timestampValue:Ju(e.serializer,n)}}if(t instanceof sl){const n=new sl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ju(e.serializer,n)}}if(t instanceof Ef)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vf)return{bytesValue:Zu(e.serializer,t._byteString)};if(t instanceof cf){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.mu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:nh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.mu(`Unsupported field value: ${nf(t)}`)}(t,e)}function Nf(t,e){const n={};return Rl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nl(t,((t,i)=>{const r=kf(i,e.Eu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Rf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sl||t instanceof Ef||t instanceof vf||t instanceof cf||t instanceof bf)}function Of(t,e,n){if(!Rf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=nf(n);throw"an object"===i?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function Lf(t,e,n){if((e=ne(e))instanceof wf)return e._internalPath;if("string"==typeof e)return Mf(t,e);throw Pf("Field path arguments must be of type string or ",t,!1,void 0,n)}const xf=new RegExp("[~\\*/\\[\\]]");function Mf(t,e,n){if(e.search(xf)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wf(...e.split("."))._internalPath}catch(oi){throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pf(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ga(za.INVALID_ARGUMENT,a+t+l)}function Uf(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ff(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}function Vf(t,e){const n=rf(t.firestore,pf),i=df(t),r=Ff(t.converter,e);return Bf(n,[Df(Af(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,ku.exists(!1))]).then((()=>i))}function Bf(t,e){return function(t,e){const n=new qa;return t.asyncQueue.enqueueAndForget((async()=>Od(await Qd(t),e,n))),n.promise}(mf(t),e)}new WeakMap;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){xa=t}(Cn),En(new ie("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new pf(new Xa(t.getProvider("auth-internal")),new tl(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ga(za.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),kn(Oa,"4.3.2",t),kn(Oa,"4.3.2","esm2017")}();var jf="firebase",$f="10.6.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
kn(jf,$f,"app");const Hf={apiKey:"AIzaSyBCqBimo-rgirF35NfWSLMmSoNa5CS-37UI",authDomain:"portfolio-e7f7a.firebaseapp.com",projectId:"portfolio-e7f7a",storageBucket:"portfolio-e7f7a.appspot.com",messagingSenderId:"938384570628",appId:"1:938384570628:web:ccc4b70de3d6574066f851"},zf=An(Hf),Gf=gf(zf),qf="contacts";async function Kf(t){await Vf(hf(Gf,qf),t)}const Wf=t=>((0,i.dD)("data-v-1979f54d"),t=t(),(0,i.Cn)(),t),Qf={id:"contact-me",class:"secondary-background"},Xf=Wf((()=>(0,i._)("h1",{style:{"text-align":"center"}},"Get in touch",-1))),Yf={id:"contact-form"},Jf=Wf((()=>(0,i._)("label",null,"Name",-1))),Zf=Wf((()=>(0,i._)("label",null,"Subject",-1))),tp=Wf((()=>(0,i._)("label",null,"Email",-1))),ep=Wf((()=>(0,i._)("label",null,"Message",-1)));var np={__name:"ContactSection",setup(t){const e=(0,r.iH)(""),n=(0,r.iH)(""),o=(0,r.iH)(""),a=(0,r.iH)(""),c=(0,r.iH)(!1),u=(0,r.iH)(""),h=(0,r.iH)(!0);function d(){e.value&&n.value&&o.value&&a.value?f(o.value)?(Kf({name:e.value,subject:n.value,email:o.value,msg:a.value}),u.value="‚úî‚ÄÉMessage sent!",h.value=!1,e.value=null,n.value=null,o.value=null,a.value=null):(u.value="You entered an invalid email!",h.value=!0):(u.value="Please fill in all fields!",h.value=!0),c.value=!0,setTimeout((()=>{c.value=!1}),3e3)}function f(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}return(t,f)=>{const p=(0,i.Q2)("motion-fade-visible");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Qf,[Xf,(0,i._)("div",Yf,[Jf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[0]||(f[0]=t=>e.value=t),type:"text",name:"name",class:"input-field"},null,512),[[s.nr,e.value]]),Zf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[1]||(f[1]=t=>n.value=t),type:"text",name:"subject",class:"input-field"},null,512),[[s.nr,n.value]]),tp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[2]||(f[2]=t=>o.value=t),type:"text",name:"email",class:"input-field"},null,512),[[s.nr,o.value]]),ep,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":f[3]||(f[3]=t=>a.value=t),name:"message",class:"input-field"},null,512),[[s.nr,a.value]]),(0,i._)("button",{id:"submit-btn",onClick:d},"SEND")])])),[[p]]),(0,i.Wm)((0,r.SU)(G),{"show-toaster":c.value,"is-danger":h.value},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(u.value),1)])),_:1},8,["show-toaster","is-danger"])],64)}}};const ip=(0,h.Z)(np,[["__scopeId","data-v-1979f54d"]]);var rp=ip,sp={__name:"HomePage",setup(t){return(t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)((0,r.SU)(j)),(0,i.Wm)((0,r.SU)(ht)),(0,i.Wm)((0,r.SU)(kt)),(0,i.Wm)((0,r.SU)(rp))],64))}};const op=sp;var ap=op},6762:function(t,e,n){var i={"./api-customer-order.png":196,"./bulky-book-web.png":8247,"./customer-order-web.png":8772,"./github-profile.png":9057,"./music-player.png":3131,"./plan-s.png":5236,"./self-taught.png":1941};function r(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id=6762},196:function(t,e,n){"use strict";t.exports=n.p+"img/api-customer-order.12eecb26.png"},8247:function(t,e,n){"use strict";t.exports=n.p+"img/bulky-book-web.ca7c0ed0.png"},8772:function(t,e,n){"use strict";t.exports=n.p+"img/customer-order-web.14dc52e3.png"},9057:function(t,e,n){"use strict";t.exports=n.p+"img/github-profile.4fd0d4b4.png"},3131:function(t,e,n){"use strict";t.exports=n.p+"img/music-player.fecf99be.png"},5236:function(t,e,n){"use strict";t.exports=n.p+"img/plan-s.e9ca654d.png"},1941:function(t,e,n){"use strict";t.exports=n.p+"img/self-taught.fe90a4a4.png"}}]);
//# sourceMappingURL=900.e1f1be37.js.map