(self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[]).push([[671],{89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n}},2420:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var i=n(4870),r=n(3396);const s=850;function o(){const t=(0,i.iH)(document.body.clientWidth<s);function e(){t.value=document.body.clientWidth<s}return(0,r.bv)((()=>window.addEventListener("resize",e))),(0,r.Ah)((()=>window.removeEventListener("resize",e))),{isMobile:t}}},4974:function(t,e,n){"use strict";n.d(e,{IF:function(){return u},c8:function(){return h},mO:function(){return c}});const i="#9acd32",r="#6cc7ce",s="#c55164",o="#b24e07",a="#d79926",l="#b83131",c=[{id:"self-taught",color:a,showGif:!0,name:"Landing page project",year:"2020",technologies:"HTML, CSS, JS, Waypoints",summary:"A standalone web page, created specifically for an educational organization as well as advertising campaign. It‚Äôs where a visitor ‚Äúlands‚Äù when they click on website's link, or ads. Here's a self-taught project I learned to improve my front-end skills, a page which is weirdy also named SelfTaught üì∞",challenges:["The first time I dig deep to multiple aspects of HTML, CSS"],githubUrl:"https://github.com/thugiang61/self-taught",webUrl:"https://thugiang61.github.io/self-taught"},{id:"music-player",color:r,showGif:!0,name:"Simple music player",year:"2021",technologies:"HTML, CSS, JS",summary:"A program brings music on your browers, which is simply built on 3 basic elements of a website: HTML, CSS and JS. If you want to listen to Daft Punk or Coldplay, go to this place! It has all general functionalities of a music software. I built this website mainly to explore deeper JS, and it's truly a magical programming language that can make a website highly dynamic üéß",challenges:["Self learned multiple useful functions of JS"],githubUrl:"https://github.com/thugiang61/music-player",webUrl:"https://thugiang61.github.io/music-player"},{id:"bulky-book-web",color:s,showGif:!0,name:"Bulky book web",year:"2021",technologies:"C#, MVC, SQL LocalDB, Google OAuth, Azure Portal",summary:"One thing you must know about me, I love reading book! And I know other people do too! Therefore, I made this website to help a user can manage his/ her favorite books. You can store every books you care about here, along with theirs attributes such as status, price, your ratings, ... This will help your reading becomes a lot easier and more managable üìñ",challenges:["Self learned newly released .NET version at that time: .NET 6.0"],githubUrl:"https://github.com/thugiang61/BulkyBookWeb2",webUrl:"https://bulky-book-web-2.azurewebsites.net"}],u=[{id:"api-customer-order",color:o,showGif:!1,name:"API customer order",agency:"LogiVietfrance",year:"2022 - now",client:"SOGET SA",role:"Back-end developer",technologies:"C#, .NET, SQL, Newtonsoft, FluentValidation,...",summary:"This platform provides transmission and tracking system for transport orders at every stage of their journey. This solution is accessible either through web access or by directly integrating it with Transportation Management System (TMS) using an API key üöö",challenges:["Complicated business handling that intertwines between applications in TMS ","This is a very broad project that has been developing for more than 2 years and I had to analyze long document as well as wide range of code","Study logistics business and TMS as well as Soget ecosystem ","Working with quite limited tools because of safety reasons","Using an older version of .NET ","As one of the most important project of the company, the application must have a good level of security"]},{id:"customer-order-web",color:l,showGif:!1,name:"Customer order web",agency:"LogiVietfrance",year:"2022 - now",client:"SOGET SA",role:"Front-end developer",technologies:"HTML, SCSS, VueJS,  Buefy, Bulma, Keycloak",summary:"An interactive interface version of API customer order project. Developed collaboratively by¬†SOGET¬†and¬†S2Pweb, two primitive specialists in road and transport tracking, this innovative tool ensures seamless monitoring and management of a cargo throughout its entire route ü§ù",challenges:["Rebuild a new UI from scratch","Learn VueJS and Buefy on the way"]},{id:"plan-s",color:i,showGif:!1,name:"Plan-s web",agency:"LogiVietfrance",year:"2022",client:"Logi Railway",role:"Full-stack developer",technologies:"HTML, SCSS, ThreeJS, jsPDF, VueJS,  Buefy, Bulma, Firebase, .NET",summary:"This application is a tool where you can insert all the cagoes you want in order to analyze and get the most optimal way to load them on a container or a barge. All loading plan will be generated into 3D model and you can interact with it as well as export the solution. This online software will help you organize your logistics stock easily and effectively üì¶",challenges:["The loading logic is very hard and requires advanced mathematics calculation","Learning TheeJS ro render models on the fly","Main front-end developer of this project"]}],h=c.concat(u)},8892:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var i=n(3396),r=n(7139);const s=t=>((0,i.dD)("data-v-408627ba"),t=t(),(0,i.Cn)(),t),o={key:0},a=s((()=>(0,i._)("div",{class:"corner top-left-corner"},null,-1))),l=s((()=>(0,i._)("div",{class:"corner top-right-corner"},null,-1))),c=s((()=>(0,i._)("div",{class:"corner bottom-left-corner"},null,-1))),u=s((()=>(0,i._)("div",{class:"corner bottom-right-corner"},null,-1))),h=[a,l,c,u];var d={__name:"PreviewInfo",props:{height:String,width:String,color:String,showCorners:{type:Boolean,default:!1}},setup(t){const e=t,n=(0,i.Fl)((()=>`width: ${e.width}px; height: ${e.height}px;`)),s=(0,i.Fl)((()=>`background-color: ${e.color?e.color:"var(--preview-shadow-background-color)"};\n    `)),a=(0,i.Fl)((()=>`border: 1px solid ${e.color?e.color:"var(--border-color)"};`));return(e,l)=>((0,i.wg)(),(0,i.iD)("div",{class:"preview-shadow",style:(0,r.j5)(n.value+s.value)},[(0,i._)("div",{class:"preview",style:(0,r.j5)(n.value+a.value)},[t.showCorners?((0,i.wg)(),(0,i.iD)("div",o,h)):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default")],4)],4))}},f=n(89);const p=(0,f.Z)(d,[["__scopeId","data-v-408627ba"]]);var g=p},2683:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});var i=n(3396),r=n(7139),s=n(4870),o={__name:"HeaderDot",props:["dotColor"],setup(t){const e=t,n=(0,i.Fl)((()=>`background-color: ${e.dotColor}`));return(t,e)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,r.j5)(n.value)},null,4))}},a=n(89);const l=(0,a.Z)(o,[["__scopeId","data-v-60086c71"]]);var c=l,u=n(2420);const h=t=>((0,i.dD)("data-v-5b28b212"),t=t(),(0,i.Cn)(),t),d={class:"ios-dots"},f={key:0,class:"header-title"},p={key:0},g={class:"nav-bar"},m=h((()=>(0,i._)("div",{class:"bar1"},null,-1))),y=h((()=>(0,i._)("div",{class:"bar2"},null,-1))),v=h((()=>(0,i._)("div",{class:"bar3"},null,-1))),w=[m,y,v],b=270,E="#fc6058",_="#fec20f",T="#2aca3e";var S={__name:"TheHeader",props:{showTitle:{type:Boolean,default:!1}},setup(t){const{isMobile:e}=(0,u.Z)(),n=(0,s.iH)(!1),o=(0,s.iH)(window.scrollY>b),a=(0,i.Fl)((()=>!e.value||e.value&&n.value));function l(){o.value=window.scrollY>b}return(0,i.bv)((()=>{document.addEventListener("scroll",l)})),(0,i.Ah)((()=>{document.removeEventListener("scroll",l)})),(l,u)=>{const h=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,r.C_)({header:!0,sticky:o.value})},[(0,i._)("div",d,[(0,i.Wm)((0,s.SU)(c),{"dot-color":E}),(0,i.Wm)((0,s.SU)(c),{"dot-color":_}),(0,i.Wm)((0,s.SU)(c),{"dot-color":T})]),t.showTitle||o.value?((0,i.wg)(),(0,i.iD)("span",f,[(0,i.Wm)(h,{to:"/home#intro"},{default:(0,i.w5)((()=>[(0,s.SU)(e)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",p,"Hi, I'm ")),(0,i.Uk)("Giang Nguyen ")])),_:1})])):(0,i.kq)("",!0),(0,i._)("div",g,[a.value?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,r.C_)({"menu-list":!0,mobile:(0,s.SU)(e)})},[(0,i.Wm)(h,{to:"/home#intro",onClick:u[0]||(u[0]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Intro")])),_:1}),(0,i.Wm)(h,{to:"/home#about-me",onClick:u[1]||(u[1]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("About¬†me")])),_:1}),(0,i.Wm)(h,{to:"/home#past-projects",onClick:u[2]||(u[2]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Past¬†projects")])),_:1}),(0,i.Wm)(h,{to:"/home#contact-me",onClick:u[3]||(u[3]=t=>n.value=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)("Contact¬†me")])),_:1})],2)):(0,i.kq)("",!0),(0,s.SU)(e)?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,r.C_)({"menu-icon":!0,clicked:n.value}),onClick:u[4]||(u[4]=t=>n.value=!n.value)},w,2)):(0,i.kq)("",!0)])],2)}}};const I=(0,a.Z)(S,[["__scopeId","data-v-5b28b212"]]);var C=I},4787:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return up}});var i=n(3396),r=n(4870),s=n(9242),o=n(2683),a=n.p+"img/profile-picture.ea4cb0c3.jpg",l=n(7139),c=n(635),u={__name:"ThemeDot",props:["dotColor","themeName"],setup(t){const e=t,{getTheme:n,setTheme:r}=(0,c.Z)(),s=(0,i.Fl)((()=>`background-color: ${e.dotColor}`));function o(t){const e=n();e!==t&&r(t)}return(e,n)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,l.j5)(s.value),onClick:n[0]||(n[0]=e=>o(t.themeName))},null,4))}},h=n(89);const d=(0,h.Z)(u,[["__scopeId","data-v-18251640"]]);var f=d;const p=t=>((0,i.dD)("data-v-2b9216bd"),t=t(),(0,i.Cn)(),t),g=p((()=>(0,i._)("h2",null,"Persionalize theme",-1))),m={class:"theme-dots"},y=p((()=>(0,i._)("i",null,"*Theme settings will be saved for your next visit",-1))),v="#fff",w="#1b2d41",b="#6abaa3",E="#7e4c74";var _={__name:"PersonalizeTheme",setup(t){return(t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[g,(0,i._)("div",m,[(0,i.Wm)((0,r.SU)(f),{"dot-color":v,"theme-name":"white"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":w,"theme-name":"blue"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":b,"theme-name":"teal"}),(0,i.Wm)((0,r.SU)(f),{"dot-color":E,"theme-name":"purple"})]),y],64))}};const T=(0,h.Z)(_,[["__scopeId","data-v-2b9216bd"]]);var S=T,I=n(8892);const C=t=>((0,i.dD)("data-v-2c6e3f92"),t=t(),(0,i.Cn)(),t),A={key:0,class:"grid-layout intro-info"},D={key:0,class:"left-column center"},k=C((()=>(0,i._)("img",{src:a,alt:"profile-picture",class:"profile-picture"},null,-1))),N={class:"right-column center"},O=C((()=>(0,i._)("h1",null,"What I do",-1))),R=C((()=>(0,i._)("p",{class:"slide-down"},[(0,i.Uk)(" I study "),(0,i._)("b",null,"Software Engineer"),(0,i.Uk)(" and I'm on my way to become a professional "),(0,i._)("b",null,"Full-stack"),(0,i.Uk)(" developer ")],-1)));var L={__name:"IntroInfo",setup(t){const e=(0,r.iH)(!1);return(0,i.bv)((()=>{e.value=!0,setInterval((()=>{console.log("hihi")}),6e3)})),(t,n)=>((0,i.wg)(),(0,i.j4)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("div",A,[e.value?((0,i.wg)(),(0,i.iD)("div",D,[k,(0,i.Wm)((0,r.SU)(S))])):(0,i.kq)("",!0),(0,i._)("div",N,[(0,i.Wm)((0,r.SU)(I.Z),{width:"340",height:"200","show-corners":""},{default:(0,i.w5)((()=>[O,R])),_:1})])])):(0,i.kq)("",!0)])),_:1}))}};const x=(0,h.Z)(L,[["__scopeId","data-v-2c6e3f92"]]);var M=x;const P=t=>((0,i.dD)("data-v-4783f818"),t=t(),(0,i.Cn)(),t),U={id:"intro",class:"section-border-bottom"},F={key:0,style:{width:"fit-content",margin:"0 auto","padding-right":"20px"}},V=P((()=>(0,i._)("h1",{class:"intro-title typewriter"},"Hi, I'm Giang Nguyen",-1))),B=[V],j={class:"intro-body"};var $={__name:"IntroSection",setup(t){const e=(0,r.iH)(!1);return(0,i.bv)((()=>e.value=!0)),(t,n)=>((0,i.wg)(),(0,i.iD)("div",U,[(0,i.Wm)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("div",F,B)):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",j,[(0,i.Wm)((0,r.SU)(o.Z)),(0,i.Wm)((0,r.SU)(M))])]))}};const H=(0,h.Z)($,[["__scopeId","data-v-4783f818"]]);var z=H,G=n(9057),q={__name:"TheToaster",props:{showToaster:{type:Boolean},isDanger:{type:Boolean,default:!1}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)(s.uT,{name:"slide-fade"},{default:(0,i.w5)((()=>[t.showToaster?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)({notification:!0,success:!t.isDanger,danger:t.isDanger})},[(0,i.WI)(e.$slots,"default")],2)):(0,i.kq)("",!0)])),_:3}))}};const K=(0,h.Z)(q,[["__scopeId","data-v-0c00d57a"]]);var W=K,Q=n(2420);const X=t=>((0,i.dD)("data-v-6e784a36"),t=t(),(0,i.Cn)(),t),Y={id:"about-me",class:"grid-layout section-border-bottom secondary-background"},J={class:"left-column",style:{padding:"20px"}},Z=X((()=>(0,i._)("div",{class:"border-bottom"},[(0,i._)("h2",null,"More about me"),(0,i._)("p",null,[(0,i.Uk)(" I build "),(0,i._)("b",null,"software applications"),(0,i.Uk)(" and love learning "),(0,i._)("b",null,"foreign languages"),(0,i.Uk)(", reading books and listening to music ")]),(0,i._)("p",null,[(0,i.Uk)(" Most of my skills are self-taught and from work experiences, but I like and also "),(0,i._)("b",null,"learn most from"),(0,i.Uk)(" interacting and studying with other people ")])],-1))),tt=(0,i.uE)('<div data-v-6e784a36><h2 data-v-6e784a36>My skills/ knowledge</h2><p data-v-6e784a36> What I have learnt at school and from my job as well as some subjects I&#39;m studying hard right now: <a href="./NguyenThanhThuGiang_CV.pdf" target="_blank" data-v-6e784a36>My full CV/ r√©sum√©</a></p><div class="skills-list" data-v-6e784a36><ul data-v-6e784a36><li data-v-6e784a36>C#, .NET</li><li data-v-6e784a36>HTML, CSS, JS</li><li data-v-6e784a36>VueJs</li><li data-v-6e784a36>ThreeJS</li></ul><ul data-v-6e784a36><li data-v-6e784a36>C++</li><li data-v-6e784a36>English</li><li data-v-6e784a36>French</li><li data-v-6e784a36>...</li></ul></div></div>',1),et=[tt],nt={class:"right-column center"},it=X((()=>(0,i._)("img",{class:"media-profile",src:G,alt:"github-profile"},null,-1))),rt=X((()=>(0,i._)("h1",null,"Find me on social platform",-1))),st=X((()=>(0,i._)("p",null,[(0,i.Uk)(" Facebook: "),(0,i._)("a",{target:"_blank",href:"https://www.facebook.com/thugiang.nguyenthanh"},"@thugiang")],-1))),ot=X((()=>(0,i._)("p",null,[(0,i.Uk)(" Github: "),(0,i._)("a",{target:"_blank",href:"https://github.com/thugiang61"},"@thugiang61")],-1))),at=X((()=>(0,i._)("h1",null,"Or contact me via",-1))),lt={style:{"text-align":"center"}},ct=X((()=>(0,i._)("p",null,[(0,i.Uk)(" (Also¬†my¬†"),(0,i._)("a",{href:"https://zalo.me/pc",target:"_blank"},"Zalo"),(0,i.Uk)("¬†and¬†"),(0,i._)("a",{href:"https:/whatsapp.com/",target:"_blank"},"Whatsapp"),(0,i.Uk)("¬†number) ")],-1))),ut="thugiang6.1@gmail.com",ht="(+84) 905 093 938";var dt={__name:"AboutSection",setup(t){const e=(0,r.iH)(!1),{isMobile:n}=(0,Q.Z)();function s(t){navigator.clipboard.writeText(t),e.value=!0,setTimeout((()=>e.value=!1),3e3)}return(t,o)=>{const a=(0,i.Q2)("motion-fade-visible");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",J,[Z,(0,i._)("div",{class:(0,l.C_)({"border-bottom":(0,r.SU)(n)})},et,2)]),(0,i._)("div",nt,[it,rt,st,ot,at,(0,i._)("p",null,[(0,i.Uk)(" Gmail: "),(0,i._)("a",{onClick:o[0]||(o[0]=t=>s(ut))},(0,l.zw)(ut))]),(0,i._)("p",lt,[(0,i.Uk)(" Tel: "),(0,i._)("a",{onClick:o[1]||(o[1]=t=>s(ht))},(0,l.zw)(ht))]),ct])])),[[a]]),(0,i.Wm)((0,r.SU)(W),{"show-toaster":e.value},{default:(0,i.w5)((()=>[(0,i.Uk)(" ‚úì‚ÄÉCopied to clipboard! ")])),_:1},8,["show-toaster"])],64)}}};const ft=(0,h.Z)(dt,[["__scopeId","data-v-6e784a36"]]);var pt=ft;const gt=["src","alt"],mt={key:0,class:"project-name"};var yt={__name:"ProjectCard",props:["projectName","projectId"],setup(t){const e=(0,r.iH)(!1),o=t,a=`/projects/${o.projectId}`;function c(){var t=n(6762);return t("./"+o.projectId+".png")}return(n,r)=>{const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:"project-card",onMouseover:r[0]||(r[0]=t=>e.value=!0),onMouseleave:r[1]||(r[1]=t=>e.value=!1)},[(0,i._)("img",{src:c(),alt:t.projectName,class:"project-img"},null,8,gt),(0,i.Wm)(s.uT,{name:"fade"},{default:(0,i.w5)((()=>[e.value?((0,i.wg)(),(0,i.iD)("div",mt,[(0,i._)("p",null,(0,l.zw)(t.projectName),1),(0,i.Wm)(o,{to:a},{default:(0,i.w5)((()=>[(0,i.Uk)("Read more ‚Üí")])),_:1})])):(0,i.kq)("",!0)])),_:1})],32)}}};const vt=(0,h.Z)(yt,[["__scopeId","data-v-5e2108e4"]]);var wt=vt,bt=n(4974);const Et=t=>((0,i.dD)("data-v-01b02410"),t=t(),(0,i.Cn)(),t),_t={id:"past-projects",class:"section-border-bottom"},Tt=Et((()=>(0,i._)("h1",null,"Some of my past projects",-1))),St=Et((()=>(0,i._)("h3",null,"Homemade",-1))),It={class:"projects"},Ct=Et((()=>(0,i._)("h3",null,"From work",-1))),At={class:"projects"},Dt=Et((()=>(0,i._)("p",null,"During my internship and working period,",-1))),kt=Et((()=>(0,i._)("p",null," I've been working on different projects, be it an out-source software company and a logistics software company! ",-1)));var Nt={__name:"ProjectSection",setup(t){return(t,e)=>{const n=(0,i.Q2)("motion-slide-visible-top");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",_t,[Tt,St,(0,i._)("div",It,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(bt.mO),((t,e)=>((0,i.wg)(),(0,i.j4)((0,r.SU)(wt),{key:e,"project-name":t.name,"project-id":t.id},null,8,["project-name","project-id"])))),128))]),Ct,(0,i._)("div",At,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(bt.IF),((t,e)=>((0,i.wg)(),(0,i.j4)((0,r.SU)(wt),{key:e,"project-name":t.name,"project-id":t.id},null,8,["project-name","project-id"])))),128))]),Dt,kt])),[[n]])}}};const Ot=(0,h.Z)(Nt,[["__scopeId","data-v-01b02410"]]);var Rt=Ot;n(4224),n(1121),n(7133),n(560),n(3429);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Lt=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},xt=function(t){const e=[];let n=0,i=0;while(n<t.length){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")},Mt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lt(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length,o=s?n[t.charAt(r)]:0;++r;const a=r<t.length,l=a?n[t.charAt(r)]:64;++r;const c=r<t.length,u=c?n[t.charAt(r)]:64;if(++r,null==e||null==o||null==l||null==u)throw new Pt;const h=e<<2|o>>4;if(i.push(h),64!==l){const t=o<<4&240|l>>2;if(i.push(t),64!==u){const t=l<<6&192|u;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(t){const e=Lt(t);return Mt.encodeByteArray(e,!0)},Ft=function(t){return Ut(t).replace(/\./g,"")},Vt=function(t){try{return Mt.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=()=>Bt().__FIREBASE_DEFAULTS__,$t=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",VUE_APP_FIREBASE_API_KEY:"AIzaSyBCqBimo-rgirF35NfWSLMmSoNa5CS-37UI",VUE_APP_FIREBASE_APP_ID:"1:938384570628:web:ccc4b70de3d6574066f851",VUE_APP_FIREBASE_AUTH_DOMAIN:"portfolio-e7f7a.firebaseapp.com",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"938384570628",VUE_APP_FIREBASE_PROJECT_ID:"portfolio-e7f7a",VUE_APP_FIREBASE_STORAGE_BUCKET:"portfolio-e7f7a.appspot.com",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},Ht=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&Vt(t[1]);return e&&JSON.parse(e)},zt=()=>{try{return jt()||$t()||Ht()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Gt=t=>{var e,n;return null===(n=null===(e=zt())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},qt=t=>{const e=Gt(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Kt=()=>{var t;return null===(t=zt())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ft(JSON.stringify(n)),Ft(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){try{return"object"===typeof indexedDB}catch(t){return!1}}function Yt(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jt="FirebaseError";class Zt extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Jt,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?ee(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new Zt(i,o,n);return a}}function ee(t,e){return t.replace(ne,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}const ne=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(re(n)&&re(s)){if(!ie(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function re(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function se(t){return t&&t._delegate?t._delegate:t}class oe{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Wt;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(ue(t))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=ae){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=ae){return this.instances.has(t)}getOptions(t=ae){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(r);n===t&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ce(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=ae){return this.component?this.component.multipleInstances?t:ae:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function ce(t){return t===ae?void 0:t}function ue(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new le(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const de=[];var fe;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(fe||(fe={}));const pe={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},ge=fe.INFO,me={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},ye=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=me[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class ve{constructor(t){this.name=t,this._logLevel=ge,this._logHandler=ye,this._userLogHandler=null,de.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in fe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?pe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...t),this._logHandler(this,fe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...t),this._logHandler(this,fe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...t),this._logHandler(this,fe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...t),this._logHandler(this,fe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...t),this._logHandler(this,fe.ERROR,...t)}}const we=(t,e)=>e.some((e=>t instanceof e));let be,Ee;function _e(){return be||(be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Te(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Se=new WeakMap,Ie=new WeakMap,Ce=new WeakMap,Ae=new WeakMap,De=new WeakMap;function ke(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Me(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Se.set(e,t)})).catch((()=>{})),De.set(e,t),e}function Ne(t){if(Ie.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));Ie.set(t,e)}let Oe={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Ie.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Ce.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Me(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function Re(t){Oe=t(Oe)}function Le(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?Te().includes(t)?function(...e){return t.apply(Pe(this),e),Me(Se.get(this))}:function(...e){return Me(t.apply(Pe(this),e))}:function(e,...n){const i=t.call(Pe(this),e,...n);return Ce.set(i,e.sort?e.sort():[e]),Me(i)}}function xe(t){return"function"===typeof t?Le(t):(t instanceof IDBTransaction&&Ne(t),we(t,_e())?new Proxy(t,Oe):t)}function Me(t){if(t instanceof IDBRequest)return ke(t);if(Ae.has(t))return Ae.get(t);const e=xe(t);return e!==t&&(Ae.set(t,e),De.set(e,t)),e}const Pe=t=>De.get(t);function Ue(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Me(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Me(o.result),t.oldVersion,t.newVersion,Me(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const Fe=["get","getKey","getAll","getAllKeys","count"],Ve=["put","add","delete","clear"],Be=new Map;function je(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(Be.get(e))return Be.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Ve.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Fe.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Be.set(e,s),s}Re((t=>({...t,get:(e,n,i)=>je(e,n)||t.get(e,n,i),has:(e,n)=>!!je(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $e{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(He(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function He(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const ze="@firebase/app",Ge="0.9.23",qe=new ve("@firebase/app"),Ke="@firebase/app-compat",We="@firebase/analytics-compat",Qe="@firebase/analytics",Xe="@firebase/app-check-compat",Ye="@firebase/app-check",Je="@firebase/auth",Ze="@firebase/auth-compat",tn="@firebase/database",en="@firebase/database-compat",nn="@firebase/functions",rn="@firebase/functions-compat",sn="@firebase/installations",on="@firebase/installations-compat",an="@firebase/messaging",ln="@firebase/messaging-compat",cn="@firebase/performance",un="@firebase/performance-compat",hn="@firebase/remote-config",dn="@firebase/remote-config-compat",fn="@firebase/storage",pn="@firebase/storage-compat",gn="@firebase/firestore",mn="@firebase/firestore-compat",yn="firebase",vn="10.6.0",wn="[DEFAULT]",bn={[ze]:"fire-core",[Ke]:"fire-core-compat",[Qe]:"fire-analytics",[We]:"fire-analytics-compat",[Ye]:"fire-app-check",[Xe]:"fire-app-check-compat",[Je]:"fire-auth",[Ze]:"fire-auth-compat",[tn]:"fire-rtdb",[en]:"fire-rtdb-compat",[nn]:"fire-fn",[rn]:"fire-fn-compat",[sn]:"fire-iid",[on]:"fire-iid-compat",[an]:"fire-fcm",[ln]:"fire-fcm-compat",[cn]:"fire-perf",[un]:"fire-perf-compat",[hn]:"fire-rc",[dn]:"fire-rc-compat",[fn]:"fire-gcs",[pn]:"fire-gcs-compat",[gn]:"fire-fst",[mn]:"fire-fst-compat","fire-js":"fire-js",[yn]:"fire-js-all"},En=new Map,_n=new Map;function Tn(t,e){try{t.container.addComponent(e)}catch(n){qe.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sn(t){const e=t.name;if(_n.has(e))return qe.debug(`There were multiple attempts to register component ${e}.`),!1;_n.set(e,t);for(const n of En.values())Tn(n,t);return!0}function In(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cn={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},An=new te("app","Firebase",Cn);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dn{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oe("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=vn;function Nn(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const i=Object.assign({name:wn,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!==typeof r||!r)throw An.create("bad-app-name",{appName:String(r)});if(n||(n=Kt()),!n)throw An.create("no-options");const s=En.get(r);if(s){if(ie(n,s.options)&&ie(i,s.config))return s;throw An.create("duplicate-app",{appName:r})}const o=new he(r);for(const l of _n.values())o.addComponent(l);const a=new Dn(n,i,o);return En.set(r,a),a}function On(t=wn){const e=En.get(t);if(!e&&t===wn&&Kt())return Nn();if(!e)throw An.create("no-app",{appName:t});return e}function Rn(t,e,n){var i;let r=null!==(i=bn[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void qe.warn(t.join(" "))}Sn(new oe(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ln="firebase-heartbeat-database",xn=1,Mn="firebase-heartbeat-store";let Pn=null;function Un(){return Pn||(Pn=Ue(Ln,xn,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Mn)}}}).catch((t=>{throw An.create("idb-open",{originalErrorMessage:t.message})}))),Pn}async function Fn(t){try{const e=await Un(),n=await e.transaction(Mn).objectStore(Mn).get(Bn(t));return n}catch(e){if(e instanceof Zt)qe.warn(e.message);else{const t=An.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});qe.warn(t.message)}}}async function Vn(t,e){try{const n=await Un(),i=n.transaction(Mn,"readwrite"),r=i.objectStore(Mn);await r.put(e,Bn(t)),await i.done}catch(n){if(n instanceof Zt)qe.warn(n.message);else{const t=An.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});qe.warn(t.message)}}}function Bn(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=1024,$n=2592e6;class Hn{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new qn(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t;const e=this.container.getProvider("platform-logger").getImmediate(),n=e.getPlatformInfoString(),i=zn();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=$n})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=zn(),{heartbeatsToSend:n,unsentEntries:i}=Gn(this._heartbeatsCache.heartbeats),r=Ft(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function zn(){const t=new Date;return t.toISOString().substring(0,10)}function Gn(t,e=jn){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Kn(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Kn(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class qn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Xt()&&Yt().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Fn(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Kn(t){return Ft(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t){Sn(new oe("platform-logger",(t=>new $e(t)),"PRIVATE")),Sn(new oe("heartbeat",(t=>new Hn(t)),"PRIVATE")),Rn(ze,Ge,t),Rn(ze,Ge,"esm2017"),Rn("fire-js","")}Wn("");var Qn,Xn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yn={},Jn=Jn||{},Zn=Xn||self;function ti(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function ei(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ni(t){return Object.prototype.hasOwnProperty.call(t,ii)&&t[ii]||(t[ii]=++ri)}var ii="closure_uid_"+(1e9*Math.random()>>>0),ri=0;function si(t,e,n){return t.call.apply(t.bind,arguments)}function oi(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ai(t,e,n){return ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?si:oi,ai.apply(null,arguments)}function li(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ci(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function ui(){this.s=this.s,this.o=this.o}var hi=0;ui.prototype.s=!1,ui.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==hi)||ni(this)},ui.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const di=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function fi(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function pi(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(ti(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function gi(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}gi.prototype.h=function(){this.defaultPrevented=!0};var mi=function(){if(!Zn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Zn.addEventListener("test",(()=>{}),e),Zn.removeEventListener("test",(()=>{}),e)}catch(n){}return t}();function yi(t){return/^[\s\xa0]*$/.test(t)}function vi(){var t=Zn.navigator;return t&&(t=t.userAgent)?t:""}function wi(t){return-1!=vi().indexOf(t)}function bi(t){return bi[" "](t),t}function Ei(t,e){var n=la;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}bi[" "]=function(){};var _i,Ti,Si=wi("Opera"),Ii=wi("Trident")||wi("MSIE"),Ci=wi("Edge"),Ai=Ci||Ii,Di=wi("Gecko")&&!(-1!=vi().toLowerCase().indexOf("webkit")&&!wi("Edge"))&&!(wi("Trident")||wi("MSIE"))&&!wi("Edge"),ki=-1!=vi().toLowerCase().indexOf("webkit")&&!wi("Edge");function Ni(){var t=Zn.document;return t?t.documentMode:void 0}t:{var Oi="",Ri=function(){var t=vi();return Di?/rv:([^\);]+)(\)|;)/.exec(t):Ci?/Edge\/([\d\.]+)/.exec(t):Ii?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ki?/WebKit\/(\S+)/.exec(t):Si?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ri&&(Oi=Ri?Ri[1]:""),Ii){var Li=Ni();if(null!=Li&&Li>parseFloat(Oi)){_i=String(Li);break t}}_i=Oi}if(Zn.document&&Ii){var xi=Ni();Ti=xi||(parseInt(_i,10)||void 0)}else Ti=void 0;var Mi=Ti;function Pi(t,e){if(gi.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Di){t:{try{bi(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Ui[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pi.$.h.call(this)}}ci(Pi,gi);var Ui={2:"touch",3:"pen",4:"mouse"};Pi.prototype.h=function(){Pi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Fi="closure_listenable_"+(1e6*Math.random()|0),Vi=0;function Bi(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Vi,this.fa=this.ia=!1}function ji(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $i(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Hi(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function zi(t){const e={};for(const n in t)e[n]=t[n];return e}const Gi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qi(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<Gi.length;e++)n=Gi[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Ki(t){this.src=t,this.g={},this.h=0}function Wi(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=di(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ji(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Qi(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Ki.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Qi(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Bi(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};var Xi="closure_lm_"+(1e6*Math.random()|0),Yi={};function Ji(t,e,n,i,r){if(i&&i.once)return er(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ji(t,e[s],n,i,r);return null}return n=lr(n),t&&t[Fi]?t.O(e,n,ei(i)?!!i.capture:!!i,r):Zi(t,e,n,!1,i,r)}function Zi(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ei(r)?!!r.capture:!!r,a=or(t);if(a||(t[Xi]=a=new Ki(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=tr(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)mi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(rr(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function tr(){function t(n){return e.call(t.src,t.listener,n)}const e=sr;return t}function er(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)er(t,e[s],n,i,r);return null}return n=lr(n),t&&t[Fi]?t.P(e,n,ei(i)?!!i.capture:!!i,r):Zi(t,e,n,!0,i,r)}function nr(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)nr(t,e[s],n,i,r);else i=ei(i)?!!i.capture:!!i,n=lr(n),t&&t[Fi]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Qi(s,n,i,r),-1<n&&(ji(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=or(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Qi(e,n,i,r)),(n=-1<t?e[t]:null)&&ir(n))}function ir(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Fi])Wi(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(rr(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=or(e))?(Wi(n,t),0==n.h&&(n.src=null,e[Xi]=null)):ji(t)}}}function rr(t){return t in Yi?Yi[t]:Yi[t]="on"+t}function sr(t,e){if(t.fa)t=!0;else{e=new Pi(e,this);var n=t.listener,i=t.la||t.src;t.ia&&ir(t),t=n.call(i,e)}return t}function or(t){return t=t[Xi],t instanceof Ki?t:null}var ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function lr(t){return"function"===typeof t?t:(t[ar]||(t[ar]=function(e){return t.handleEvent(e)}),t[ar])}function cr(){ui.call(this),this.i=new Ki(this),this.S=this,this.J=null}function ur(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new gi(e,t);else if(e instanceof gi)e.target=e.target||t;else{var r=e;e=new gi(i,t),qi(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=hr(o,i,!0,e)&&r}if(o=e.g=t,r=hr(o,i,!0,e)&&r,r=hr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=hr(o,i,!1,e)&&r}function hr(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Wi(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}ci(cr,ui),cr.prototype[Fi]=!0,cr.prototype.removeEventListener=function(t,e,n,i){nr(this,t,e,n,i)},cr.prototype.N=function(){if(cr.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)ji(n[i]);delete e.g[t],e.h--}}this.J=null},cr.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},cr.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var dr=Zn.JSON.stringify;class fr{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function pr(){var t=_r;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class gr{constructor(){this.h=this.g=null}add(t,e){const n=mr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var mr=new fr((()=>new yr),(t=>t.reset()));class yr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function vr(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function wr(t){Zn.setTimeout((()=>{throw t}),0)}let br,Er=!1,_r=new gr,Tr=()=>{const t=Zn.Promise.resolve(void 0);br=()=>{t.then(Sr)}};var Sr=()=>{for(var t;t=pr();){try{t.h.call(t.g)}catch(n){wr(n)}var e=mr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Er=!1};function Ir(t,e){cr.call(this),this.h=t||1,this.g=e||Zn,this.j=ai(this.qb,this),this.l=Date.now()}function Cr(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ar(t,e,n){if("function"===typeof t)n&&(t=ai(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ai(t.handleEvent,t)}return 2147483647<Number(e)?-1:Zn.setTimeout(t,e||0)}function Dr(t){t.g=Ar((()=>{t.g=null,t.i&&(t.i=!1,Dr(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ci(Ir,cr),Qn=Ir.prototype,Qn.ga=!1,Qn.T=null,Qn.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ur(this,"tick"),this.ga&&(Cr(this),this.start()))}},Qn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qn.N=function(){Ir.$.N.call(this),Cr(this),delete this.g};class kr extends ui{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(Zn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(t){ui.call(this),this.h=t,this.g={}}ci(Nr,ui);var Or=[];function Rr(t,e,n,i){Array.isArray(n)||(n&&(Or[0]=n.toString()),n=Or);for(var r=0;r<n.length;r++){var s=Ji(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Lr(t){$i(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ir(t)}),t),t.g={}}function xr(){this.g=!0}function Mr(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}function Pr(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function Ur(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Vr(t,n)+(i?" "+i:"")}))}function Fr(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Vr(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return dr(n)}catch(a){return e}}Nr.prototype.N=function(){Nr.$.N.call(this),Lr(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xr.prototype.Ea=function(){this.g=!1},xr.prototype.info=function(){};var Br={},jr=null;function $r(){return jr=jr||new cr}function Hr(t){gi.call(this,Br.Ta,t)}function zr(t){const e=$r();ur(e,new Hr(e))}function Gr(t,e){gi.call(this,Br.STAT_EVENT,t),this.stat=e}function qr(t){const e=$r();ur(e,new Gr(e,t))}function Kr(t,e){gi.call(this,Br.Ua,t),this.size=e}function Wr(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return Zn.setTimeout((function(){t()}),e)}Br.Ta="serverreachability",ci(Hr,gi),Br.STAT_EVENT="statevent",ci(Gr,gi),Br.Ua="timingevent",ci(Kr,gi);var Qr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Xr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yr(){}function Jr(t){return t.h||(t.h=t.i())}function Zr(){}Yr.prototype.h=null;var ts,es={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ns(){gi.call(this,"d")}function is(){gi.call(this,"c")}function rs(){}function ss(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Nr(this),this.P=as,t=Ai?125:void 0,this.V=new Ir(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}ci(ns,gi),ci(is,gi),ci(rs,Yr),rs.prototype.g=function(){return new XMLHttpRequest},rs.prototype.i=function(){return{}},ts=new rs;var as=45e3,ls={},cs={};function us(t,e,n){t.L=1,t.v=Rs(As(e)),t.s=n,t.S=!0,hs(t,null)}function hs(t,e){t.G=Date.now(),gs(t),t.A=As(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),Gs(n.i,"t",i),t.C=0,n=t.l.J,t.h=new os,t.g=Yo(t.l,n?e:null,!t.s),0<t.O&&(t.M=new kr(ai(t.Pa,t,t.g),t.O)),Rr(t.U,t.g,"readystatechange",t.nb),e=t.I?zi(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),zr(),Mr(t.j,t.u,t.A,t.m,t.W,t.s)}function ds(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function fs(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=ps(t,n),i==cs){4==e&&(t.o=4,qr(14),r=!1),Ur(t.j,t.m,null,"[Incomplete Response]");break}if(i==ls){t.o=4,qr(15),Ur(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ur(t.j,t.m,i,null),bs(t,i)}ds(t)&&i!=cs&&i!=ls&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ho(e),e.M=!0,qr(11))):(Ur(t.j,t.m,n,"[Invalid Chunked Response]"),ws(t),vs(t))}function ps(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?cs:(n=Number(e.substring(n,i)),isNaN(n)?ls:(i+=1,i+n>e.length?cs:(e=e.slice(i,i+n),t.C=i+n,e)))}function gs(t){t.Y=Date.now()+t.P,ms(t,t.P)}function ms(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Wr(ai(t.lb,t),e)}function ys(t){t.B&&(Zn.clearTimeout(t.B),t.B=null)}function vs(t){0==t.l.H||t.J||qo(t.l,t)}function ws(t){ys(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Cr(t.V),Lr(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bs(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Zs(n.i,t)))if(!t.K&&Zs(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Go(n),xo(n)}$o(n),qr(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Wr(ai(n.ib,n),6e3));if(1>=Js(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Wo(n,11)}else if((t.K||n.g==t)&&Go(n),!yi(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(to(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Os(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=Xo(i,i.J?i.pa:null,i.Y),o.K){eo(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(ys(a),gs(a)),i.g=o}else jo(i);0<n.j.length&&Po(n)}else"stop"!=c[0]&&"close"!=c[0]||Wo(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wo(n,7):Lo(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}zr(4)}catch(c){}}function Es(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(ti(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function _s(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(ti(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ts(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ti(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=_s(t),i=Es(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}Qn=ss.prototype,Qn.setTimeout=function(t){this.P=t},Qn.nb=function(t){t=t.target;const e=this.M;e&&3==Co(t)?e.l():this.Pa(t)},Qn.Pa=function(t){try{if(t==this.g)t:{const u=Co(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(3!=u||Ai||this.g&&(this.h.h||this.g.ja()||Ao(this.g)))){this.J||4!=u||7==e||zr(8==e||0>=h?3:2),ys(this);var n=this.g.da();this.ca=n;e:if(ds(this)){var i=Ao(this.g);t="";var r=i.length,s=4==Co(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ws(this),vs(this);var o="";break e}this.h.i=new Zn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,Pr(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yi(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,qr(12),ws(this),vs(this);break t}Ur(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,n)}this.S?(fs(this,u,o),Ai&&this.i&&3==u&&(Rr(this.U,this.V,"tick",this.mb),this.V.start())):(Ur(this.j,this.m,o,null),bs(this,o)),4==u&&ws(this),this.i&&!this.J&&(4==u?qo(this.l,this):(this.i=!1,gs(this)))}else Do(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,qr(12)):(this.o=0,qr(13)),ws(this),vs(this)}}}catch(u){}},Qn.mb=function(){if(this.g){var t=Co(this.g),e=this.g.ja();this.C<e.length&&(ys(this),fs(this,t,e),this.i&&4!=t&&gs(this))}},Qn.cancel=function(){this.J=!0,ws(this)},Qn.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Fr(this.j,this.A),2!=this.L&&(zr(),qr(17)),ws(this),this.o=2,vs(this)):ms(this,this.Y-t)};var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Is(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Cs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Cs){this.h=t.h,Ds(this,t.j),this.s=t.s,this.g=t.g,ks(this,t.m),this.l=t.l;var e=t.i,n=new js;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ns(this,n),this.o=t.o}else t&&(e=String(t).match(Ss))?(this.h=!1,Ds(this,e[1]||"",!0),this.s=Ls(e[2]||""),this.g=Ls(e[3]||"",!0),ks(this,e[4]),this.l=Ls(e[5]||"",!0),Ns(this,e[6]||"",!0),this.o=Ls(e[7]||"")):(this.h=!1,this.i=new js(null,this.h))}function As(t){return new Cs(t)}function Ds(t,e,n){t.j=n?Ls(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ks(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ns(t,e,n){e instanceof js?(t.i=e,Ks(t.i,t.h)):(n||(e=xs(e,Vs)),t.i=new js(e,t.h))}function Os(t,e,n){t.i.set(e,n)}function Rs(t){return Os(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ls(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xs(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ms),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ms(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Cs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xs(e,Ps,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(xs(e,Ps,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(xs(n,"/"==n.charAt(0)?Fs:Us,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xs(n,Bs)),t.join("")};var Ps=/[#\/\?@]/g,Us=/[#\?:]/g,Fs=/[#\?]/g,Vs=/[#\?@]/g,Bs=/#/g;function js(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $s(t){t.g||(t.g=new Map,t.h=0,t.i&&Is(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Hs(t,e){$s(t),e=qs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function zs(t,e){return $s(t),e=qs(t,e),t.g.has(e)}function Gs(t,e,n){Hs(t,e),0<n.length&&(t.i=null,t.g.set(qs(t,e),fi(n)),t.h+=n.length)}function qs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ks(t,e){e&&!t.j&&($s(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Hs(this,e),Gs(this,n,t))}),t)),t.j=e}Qn=js.prototype,Qn.add=function(t,e){$s(this),this.i=null,t=qs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Qn.forEach=function(t,e){$s(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},Qn.ta=function(){$s(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},Qn.Z=function(t){$s(this);let e=[];if("string"===typeof t)zs(this,t)&&(e=e.concat(this.g.get(qs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Qn.set=function(t,e){return $s(this),this.i=null,t=qs(this,t),zs(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Qn.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e},Qn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var Ws=class{constructor(t,e){this.g=t,this.map=e}};function Qs(t){this.l=t||Xs,Zn.PerformanceNavigationTiming?(t=Zn.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(Zn.g&&Zn.g.Ka&&Zn.g.Ka()&&Zn.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xs=10;function Ys(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Js(t){return t.h?1:t.g?t.g.size:0}function Zs(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function to(t,e){t.g?t.g.add(e):t.h=e}function eo(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function no(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return fi(t.i)}Qs.prototype.cancel=function(){if(this.i=no(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var io=class{stringify(t){return Zn.JSON.stringify(t,void 0)}parse(t){return Zn.JSON.parse(t,void 0)}};function ro(){this.g=new io}function so(t,e,n){const i=n||"";try{Ts(t,(function(t,n){let r=t;ei(t)&&(r=dr(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function oo(t,e){const n=new xr;if(Zn.Image){const i=new Image;i.onload=li(ao,n,i,"TestLoadImage: loaded",!0,e),i.onerror=li(ao,n,i,"TestLoadImage: error",!1,e),i.onabort=li(ao,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=li(ao,n,i,"TestLoadImage: timeout",!1,e),Zn.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function ao(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function lo(t){this.l=t.ec||null,this.j=t.ob||!1}function co(t,e){cr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ci(lo,Yr),lo.prototype.g=function(){return new co(this.l,this.j)},lo.prototype.i=function(t){return function(){return t}}({}),ci(co,cr);var uo=0;function ho(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function fo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,po(t)}function po(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Qn=co.prototype,Qn.open=function(t,e){if(this.readyState!=uo)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,po(this)},Qn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Zn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fo(this)),this.readyState=uo},Qn.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,po(this)),this.g&&(this.readyState=3,po(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Zn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ho(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Qn.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fo(this):po(this),3==this.readyState&&ho(this)}},Qn.Za=function(t){this.g&&(this.response=this.responseText=t,fo(this))},Qn.Ya=function(t){this.g&&(this.response=t,fo(this))},Qn.ka=function(){this.g&&fo(this)},Qn.setRequestHeader=function(t,e){this.v.append(t,e)},Qn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Qn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(co.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var go=Zn.JSON.parse;function mo(t){cr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yo,this.L=this.M=!1}ci(mo,cr);var yo="",vo=/^https?$/i,wo=["POST","PUT"];function bo(t){return Ii&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Eo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_o(t),So(t)}function _o(t){t.F||(t.F=!0,ur(t,"complete"),ur(t,"error"))}function To(t){if(t.h&&"undefined"!=typeof Jn&&(!t.C[1]||4!=Co(t)||2!=t.da()))if(t.v&&4==Co(t))Ar(t.La,0,t);else if(ur(t,"readystatechange"),4==Co(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.I).match(Ss)[1]||null;!r&&Zn.self&&Zn.self.location&&(r=Zn.self.location.protocol.slice(0,-1)),i=!vo.test(r?r.toLowerCase():"")}n=i}if(n)ur(t,"complete"),ur(t,"success");else{t.m=6;try{var s=2<Co(t)?t.g.statusText:""}catch(o){s=""}t.j=s+" ["+t.da()+"]",_o(t)}}finally{So(t)}}}function So(t,e){if(t.g){Io(t);const i=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ur(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function Io(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Zn.clearTimeout(t.A),t.A=null)}function Co(t){return t.g?t.g.readyState:0}function Ao(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case yo:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Ua){return null}}function Do(t){const e={};t=(t.g&&2<=Co(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(yi(t[i]))continue;var n=vr(t[i]);const r=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}Hi(e,(function(t){return t.join(", ")}))}function ko(t){let e="";return $i(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function No(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=ko(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Os(t,e,n))}function Oo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ro(t){this.Ga=0,this.j=[],this.l=new xr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oo("baseRetryDelayMs",5e3,t),this.hb=Oo("retryDelaySeedMs",1e4,t),this.eb=Oo("forwardChannelMaxRetries",2,t),this.xa=Oo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Qs(t&&t.concurrentRequestLimit),this.Ja=new ro,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lo(t){if(Mo(t),3==t.H){var e=t.W++,n=As(t.I);if(Os(n,"SID",t.K),Os(n,"RID",e),Os(n,"TYPE","terminate"),Vo(t,n),e=new ss(t,t.l,e),e.L=2,e.v=Rs(As(n)),n=!1,Zn.navigator&&Zn.navigator.sendBeacon)try{n=Zn.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&Zn.Image&&((new Image).src=e.v,n=!0),n||(e.g=Yo(e.l,null),e.g.ha(e.v)),e.G=Date.now(),gs(e)}Qo(t)}function xo(t){t.g&&(Ho(t),t.g.cancel(),t.g=null)}function Mo(t){xo(t),t.u&&(Zn.clearTimeout(t.u),t.u=null),Go(t),t.i.cancel(),t.m&&("number"===typeof t.m&&Zn.clearTimeout(t.m),t.m=null)}function Po(t){if(!Ys(t.i)&&!t.m){t.m=!0;var e=t.Na;br||Tr(),Er||(br(),Er=!0),_r.add(e,t),t.C=0}}function Uo(t,e){return!(Js(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=Wr(ai(t.Na,t,e),Ko(t,t.C)),t.C++,!0))}function Fo(t,e){var n;n=e?e.m:t.W++;const i=As(t.I);Os(i,"SID",t.K),Os(i,"RID",n),Os(i,"AID",t.V),Vo(t,i),t.o&&t.s&&No(i,t.o,t.s),n=new ss(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Bo(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),to(t.i,n),us(n,i,e)}function Vo(t,e){t.na&&$i(t.na,(function(t,n){Os(e,n,t)})),t.h&&Ts({},(function(t,n){Os(e,n,t)}))}function Bo(t,e,n){n=Math.min(t.j.length,n);var i=t.h?ai(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{so(l,t,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function jo(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;br||Tr(),Er||(br(),Er=!0),_r.add(e,t),t.A=0}}function $o(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=Wr(ai(t.Ma,t),Ko(t,t.A)),t.A++,!0)}function Ho(t){null!=t.B&&(Zn.clearTimeout(t.B),t.B=null)}function zo(t){t.g=new ss(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=As(t.wa);Os(e,"RID","rpc"),Os(e,"SID",t.K),Os(e,"AID",t.V),Os(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Os(e,"TO",t.qa),Os(e,"TYPE","xmlhttp"),Vo(t,e),t.o&&t.s&&No(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Rs(As(e)),n.s=null,n.S=!0,hs(n,t)}function Go(t){null!=t.v&&(Zn.clearTimeout(t.v),t.v=null)}function qo(t,e){var n=null;if(t.g==e){Go(t),Ho(t),t.g=null;var i=2}else{if(!Zs(t.i,e))return;n=e.F,eo(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=$r(),ur(i,new Kr(i,n)),Po(t)}else jo(t);else if(r=e.o,3==r||0==r&&0<e.ca||!(1==i&&Uo(t,e)||2==i&&$o(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Wo(t,5);break;case 4:Wo(t,10);break;case 3:Wo(t,6);break;default:Wo(t,2)}}function Ko(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Wo(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=ai(t.pb,t);n||(n=new Cs("//www.google.com/images/cleardot.gif"),Zn.location&&"http"==Zn.location.protocol||Ds(n,"https"),Rs(n)),oo(n.toString(),i)}else qr(2);t.H=0,t.h&&t.h.za(e),Qo(t),Mo(t)}function Qo(t){if(t.H=0,t.ma=[],t.h){const e=no(t.i);0==e.length&&0==t.j.length||(pi(t.ma,e),pi(t.ma,t.j),t.i.i.length=0,fi(t.j),t.j.length=0),t.h.ya()}}function Xo(t,e,n){var i=n instanceof Cs?As(n):new Cs(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ks(i,i.m);else{var r=Zn.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Cs(null);i&&Ds(s,i),e&&(s.g=e),r&&ks(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Os(i,n,e),Os(i,"VER",t.ra),Vo(t,i),i}function Yo(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new mo(new lo({ob:!0})):new mo(t.va),e.Oa(t.J),e}function Jo(){}function Zo(){if(Ii&&!(10<=Number(Mi)))throw Error("Environmental error: no available transport.")}function ta(t,e){cr.call(this),this.g=new Ro(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yi(e)&&(this.g.F=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ia(this)}function ea(t){ns.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function na(){is.call(this),this.status=1}function ia(t){this.g=t}function ra(){this.blockSize=-1}function sa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function oa(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function aa(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}Qn=mo.prototype,Qn.Oa=function(t){this.M=t},Qn.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ts.g(),this.C=this.u?Jr(this.u):Jr(ts),this.g.onreadystatechange=ai(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Eo(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Zn.FormData&&t instanceof Zn.FormData,!(0<=di(wo,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Io(this),0<this.B&&((this.L=bo(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.ua,this)):this.A=Ar(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Eo(this,s)}},Qn.ua=function(){"undefined"!=typeof Jn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))},Qn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ur(this,"complete"),ur(this,"abort"),So(this))},Qn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),mo.$.N.call(this)},Qn.La=function(){this.s||(this.G||this.v||this.l?To(this):this.kb())},Qn.kb=function(){To(this)},Qn.isActive=function(){return!!this.g},Qn.da=function(){try{return 2<Co(this)?this.g.status:-1}catch(t){return-1}},Qn.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Qn.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),go(e)}},Qn.Ia=function(){return this.m},Qn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},Qn=Ro.prototype,Qn.ra=8,Qn.H=1,Qn.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ss(this,this.l,t);let s=this.s;if(this.U&&(s?(s=zi(s),qi(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(i="__data__"in i.map&&(i=i.map.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Bo(this,r,e),n=As(this.I),Os(n,"RID",t),Os(n,"CVER",22),this.F&&Os(n,"X-HTTP-Session-Id",this.F),Vo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(ko(s)))+"&"+e:this.o&&No(n,this.o,s)),to(this.i,r),this.bb&&Os(n,"TYPE","init"),this.P?(Os(n,"$req",e),Os(n,"SID","null"),r.aa=!0,us(r,n,null)):us(r,n,e),this.H=2}}else 3==this.H&&(t?Fo(this,t):0==this.j.length||Ys(this.i)||Fo(this))},Qn.Ma=function(){if(this.u=null,zo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Wr(ai(this.jb,this),t)}},Qn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qr(10),xo(this),zo(this))},Qn.ib=function(){null!=this.v&&(this.v=null,xo(this),$o(this),qr(19))},Qn.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qr(2)):(this.l.info("Failed to ping google.com"),qr(1))},Qn.isActive=function(){return!!this.h&&this.h.isActive(this)},Qn=Jo.prototype,Qn.Ba=function(){},Qn.Aa=function(){},Qn.za=function(){},Qn.ya=function(){},Qn.isActive=function(){return!0},Qn.Va=function(){},Zo.prototype.g=function(t,e){return new ta(t,e)},ci(ta,cr),ta.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Xo(t,null,t.Y),Po(t)},ta.prototype.close=function(){Lo(this.g)},ta.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=dr(t),t=n);e.j.push(new Ws(e.fb++,t)),3==e.H&&Po(e)},ta.prototype.N=function(){this.g.h=null,delete this.j,Lo(this.g),delete this.g,ta.$.N.call(this)},ci(ea,ns),ci(na,is),ci(ia,Jo),ia.prototype.Ba=function(){ur(this.g,"a")},ia.prototype.Aa=function(t){ur(this.g,new ea(t))},ia.prototype.za=function(t){ur(this.g,new na)},ia.prototype.ya=function(){ur(this.g,"b")},ci(sa,ra),sa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},sa.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)oa(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){oa(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){oa(this,i),r=0;break}}this.h=r,this.i+=e},sa.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var la={};function ca(t){return-128<=t&&128>t?Ei(t,(function(t){return new aa([0|t],0>t?-1:0)})):new aa([0|t],0>t?-1:0)}function ua(t){if(isNaN(t)||!isFinite(t))return fa;if(0>t)return va(ua(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=da;return new aa(e,0)}function ha(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return va(ha(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ua(Math.pow(e,8)),i=fa,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=ua(Math.pow(e,s)),i=i.R(s).add(ua(o))):(i=i.R(n),i=i.add(ua(o)))}return i}var da=4294967296,fa=ca(0),pa=ca(1),ga=ca(16777216);function ma(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ya(t){return-1==t.h}function va(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new aa(n,~t.h).add(pa)}function wa(t,e){return t.add(va(e))}function ba(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ea(t,e){this.g=t,this.h=e}function _a(t,e){if(ma(e))throw Error("division by zero");if(ma(t))return new Ea(fa,fa);if(ya(t))return e=_a(va(t),e),new Ea(va(e.g),va(e.h));if(ya(e))return e=_a(t,va(e)),new Ea(va(e.g),e.h);if(30<t.g.length){if(ya(t)||ya(e))throw Error("slowDivide_ only works with positive integers.");for(var n=pa,i=e;0>=i.X(t);)n=Ta(n),i=Ta(i);var r=Sa(n,1),s=Sa(i,1);for(i=Sa(i,2),n=Sa(n,2);!ma(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Sa(i,1),n=Sa(n,1)}return e=wa(t,r.R(e)),new Ea(r,e)}for(r=fa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=ua(n),o=s.R(e);ya(o)||0<o.X(t);)n-=i,s=ua(n),o=s.R(e);ma(s)&&(s=pa),r=r.add(s),t=wa(t,o)}return new Ea(r,t)}function Ta(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new aa(n,t.h)}function Sa(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new aa(r,t.h)}Qn=aa.prototype,Qn.ea=function(){if(ya(this))return-va(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:da+i)*e,e*=da}return t},Qn.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ma(this))return"0";if(ya(this))return"-"+va(this).toString(t);for(var e=ua(Math.pow(t,6)),n=this,i="";;){var r=_a(n,e).g;n=wa(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,ma(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Qn.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Qn.X=function(t){return t=wa(this,t),ya(t)?-1:ma(t)?0:1},Qn.abs=function(){return ya(this)?va(this):this},Qn.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new aa(n,-2147483648&n[n.length-1]?-1:0)},Qn.R=function(t){if(ma(this)||ma(t))return fa;if(ya(this))return ya(t)?va(this).R(va(t)):va(va(this).R(t));if(ya(t))return va(this.R(va(t)));if(0>this.X(ga)&&0>t.X(ga))return ua(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,l=65535&t.D(r);n[2*i+2*r]+=o*l,ba(n,2*i+2*r),n[2*i+2*r+1]+=s*l,ba(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,ba(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,ba(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new aa(n,0)},Qn.gb=function(t){return _a(this,t).h},Qn.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new aa(n,this.h&t.h)},Qn.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new aa(n,this.h|t.h)},Qn.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new aa(n,this.h^t.h)},Zo.prototype.createWebChannel=Zo.prototype.g,ta.prototype.send=ta.prototype.u,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,Xr.COMPLETE="complete",Zr.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",cr.prototype.listen=cr.prototype.O,mo.prototype.listenOnce=mo.prototype.P,mo.prototype.getLastError=mo.prototype.Sa,mo.prototype.getLastErrorCode=mo.prototype.Ia,mo.prototype.getStatus=mo.prototype.da,mo.prototype.getResponseJson=mo.prototype.Wa,mo.prototype.getResponseText=mo.prototype.ja,mo.prototype.send=mo.prototype.ha,mo.prototype.setWithCredentials=mo.prototype.Oa,sa.prototype.digest=sa.prototype.l,sa.prototype.reset=sa.prototype.reset,sa.prototype.update=sa.prototype.j,aa.prototype.add=aa.prototype.add,aa.prototype.multiply=aa.prototype.R,aa.prototype.modulo=aa.prototype.gb,aa.prototype.compare=aa.prototype.X,aa.prototype.toNumber=aa.prototype.ea,aa.prototype.toString=aa.prototype.toString,aa.prototype.getBits=aa.prototype.D,aa.fromNumber=ua,aa.fromString=ha;var Ia=Yn.createWebChannelTransport=function(){return new Zo},Ca=Yn.getStatEventTarget=function(){return $r()},Aa=Yn.ErrorCode=Qr,Da=Yn.EventType=Xr,ka=Yn.Event=Br,Na=Yn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oa=Yn.FetchXmlHttpFactory=lo,Ra=Yn.WebChannel=Zr,La=Yn.XhrIo=mo,xa=(Yn.Md5=sa,Yn.Integer=aa);const Ma="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pa.UNAUTHENTICATED=new Pa(null),Pa.GOOGLE_CREDENTIALS=new Pa("google-credentials-uid"),Pa.FIRST_PARTY=new Pa("first-party-uid"),Pa.MOCK_USER=new Pa("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ua="10.5.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new ve("@firebase/firestore");function Va(){return Fa.logLevel}function Ba(t,...e){if(Fa.logLevel<=fe.DEBUG){const n=e.map(Ha);Fa.debug(`Firestore (${Ua}): ${t}`,...n)}}function ja(t,...e){if(Fa.logLevel<=fe.ERROR){const n=e.map(Ha);Fa.error(`Firestore (${Ua}): ${t}`,...n)}}function $a(t,...e){if(Fa.logLevel<=fe.WARN){const n=e.map(Ha);Fa.warn(`Firestore (${Ua}): ${t}`,...n)}}function Ha(t){if("string"==typeof t)return t;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw ja(e),new Error(e)}function Ga(t,e){t||za()}function qa(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wa extends Zt{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ya{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Pa.UNAUTHENTICATED)))}shutdown(){}}class Ja{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Za{constructor(t){this.t=t,this.currentUser=Pa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Qa;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Qa,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ba("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ba("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Qa)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ba("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ga("string"==typeof e.accessToken),new Xa(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ga(null===t||"string"==typeof t),new Pa(t)}}class tl{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Pa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class el{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new tl(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Pa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nl{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class il{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Ba("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Ba("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ba("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Ba("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ga("string"==typeof t.token),this.R=t.token,new nl(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rl(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=rl(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function ol(t,e){return t<e?-1:t>e?1:0}function al(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ll{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Wa(Ka.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Wa(Ka.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wa(Ka.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wa(Ka.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ll.fromMillis(Date.now())}static fromDate(t){return ll.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ll(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ol(this.nanoseconds,t.nanoseconds):ol(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.timestamp=t}static fromTimestamp(t){return new cl(t)}static min(){return new cl(new ll(0,0))}static max(){return new cl(new ll(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t,e,n){void 0===e?e=0:e>t.length&&za(),void 0===n?n=t.length-e:n>t.length-e&&za(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===ul.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ul?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hl extends ul{construct(t,e,n){return new hl(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wa(Ka.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new hl(e)}static emptyPath(){return new hl([])}}const dl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fl extends ul{construct(t,e,n){return new fl(t,e,n)}static isValidIdentifier(t){return dl.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fl.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fl(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Wa(Ka.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Wa(Ka.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Wa(Ka.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Wa(Ka.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fl(e)}static emptyPath(){return new fl([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t){this.path=t}static fromPath(t){return new pl(hl.fromString(t))}static fromName(t){return new pl(hl.fromString(t).popFirst(5))}static empty(){return new pl(hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hl.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hl.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pl(new hl(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}gl.UNKNOWN_ID=-1;function ml(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=cl.fromTimestamp(1e9===i?new ll(n+1,0):new ll(n,i));return new vl(r,pl.empty(),e)}function yl(t){return new vl(t.readTime,t.key,-1)}class vl{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new vl(cl.min(),pl.empty(),-1)}static max(){return new vl(cl.max(),pl.empty(),-1)}}function wl(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=pl.comparator(t.documentKey,e.documentKey),0!==n?n:ol(t.largestBatchId,e.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class El{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==Ka.FAILED_PRECONDITION||t.message!==bl)throw t;Ba("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&za(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Tl(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Tl?e:Tl.resolve(e)}catch(t){return Tl.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Tl.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Tl.reject(e)}static resolve(t){return new Tl(((e,n)=>{e(t)}))}static reject(t){return new Tl(((e,n)=>{n(t)}))}static waitFor(t){return new Tl(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Tl.resolve(!1);for(const n of t)e=e.next((t=>t?Tl.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Tl(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Tl(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Il{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Cl(t){return null==t}function Al(t){return 0===t&&1/t==-1/0}function Dl(t){return"number"==typeof t&&Number.isInteger(t)&&!Al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il._e=-1;const kl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ol=Nl;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rl(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ll(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xl(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,e){this.comparator=t,this.root=e||Ul.EMPTY}insert(t,e){return new Ml(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ul.BLACK,null,null))}remove(t){return new Ml(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ul.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pl(this.root,t,this.comparator,!0)}}class Pl{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ul{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Ul.RED,this.left=null!=i?i:Ul.EMPTY,this.right=null!=r?r:Ul.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Ul(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ul.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Ul.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ul.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ul.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw za();if(this.right.isRed())throw za();const t=this.left.check();if(t!==this.right.check())throw za();return t+(this.isRed()?0:1)}}Ul.EMPTY=null,Ul.RED=!0,Ul.BLACK=!1,Ul.EMPTY=new class{constructor(){this.size=0}get key(){throw za()}get value(){throw za()}get color(){throw za()}get left(){throw za()}get right(){throw za()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Ul(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fl{constructor(t){this.comparator=t,this.data=new Ml(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(t){return new Vl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Fl))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Fl(this.comparator);return e.data=t,e}}class Vl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bl{constructor(t){this.fields=t,t.sort(fl.comparator)}static empty(){return new Bl([])}unionWith(t){let e=new Fl(fl.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Bl(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return al(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $l{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new jl("Invalid base64 string: "+t):t}}(t);return new $l(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new $l(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ol(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$l.EMPTY_BYTE_STRING=new $l("");const Hl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zl(t){if(Ga(!!t),"string"==typeof t){let e=0;const n=Hl.exec(t);if(Ga(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gl(t.seconds),nanos:Gl(t.nanos)}}function Gl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ql(t){return"string"==typeof t?$l.fromBase64String(t):$l.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wl(t){const e=t.mapValue.fields.__previous_value__;return Kl(e)?Wl(e):e}function Ql(t){const e=zl(t.mapValue.fields.__local_write_time__.timestampValue);return new ll(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t,e,n,i,r,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Yl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Yl&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kl(t)?4:uc(t)?9007199254740991:10:za()}function tc(t,e){if(t===e)return!0;const n=Zl(t);if(n!==Zl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=zl(t.timestampValue),i=zl(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ql(t.bytesValue).isEqual(ql(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Gl(t.geoPointValue.latitude)===Gl(e.geoPointValue.latitude)&&Gl(t.geoPointValue.longitude)===Gl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Gl(t.integerValue)===Gl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Gl(t.doubleValue),i=Gl(e.doubleValue);return n===i?Al(n)===Al(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return al(t.arrayValue.values||[],e.arrayValue.values||[],tc);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Rl(n)!==Rl(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!tc(n[r],i[r])))return!1;return!0}(t,e);default:return za()}}function ec(t,e){return void 0!==(t.values||[]).find((t=>tc(t,e)))}function nc(t,e){if(t===e)return 0;const n=Zl(t),i=Zl(e);if(n!==i)return ol(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ol(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Gl(t.integerValue||t.doubleValue),i=Gl(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ic(t.timestampValue,e.timestampValue);case 4:return ic(Ql(t),Ql(e));case 5:return ol(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ql(t),i=ql(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=ol(n[r],i[r]);if(0!==t)return t}return ol(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=ol(Gl(t.latitude),Gl(e.latitude));return 0!==n?n:ol(Gl(t.longitude),Gl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=nc(n[r],i[r]);if(t)return t}return ol(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Jl.mapValue&&e===Jl.mapValue)return 0;if(t===Jl.mapValue)return 1;if(e===Jl.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=ol(i[o],s[o]);if(0!==t)return t;const e=nc(n[i[o]],r[s[o]]);if(0!==e)return e}return ol(i.length,s.length)}(t.mapValue,e.mapValue);default:throw za()}}function ic(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ol(t,e);const n=zl(t),i=zl(e),r=ol(n.seconds,i.seconds);return 0!==r?r:ol(n.nanos,i.nanos)}function rc(t){return sc(t)}function sc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=zl(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return ql(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return pl.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=sc(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${sc(t.fields[r])}`;return n+"}"}(t.mapValue):za()}function oc(t){return!!t&&"integerValue"in t}function ac(t){return!!t&&"arrayValue"in t}function lc(t){return!!t&&"mapValue"in t}function cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ll(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=cc(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uc(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hc{constructor(t){this.value=t}static empty(){return new hc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!lc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=cc(e)}setAll(t){let e=fl.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=cc(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());lc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return tc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];lc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Ll(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new hc(cc(this.value))}}function dc(t){const e=[];return Ll(t.fields,((t,n)=>{const i=new fl([t]);if(lc(n)){const t=dc(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Bl(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class fc{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new fc(t,0,cl.min(),cl.min(),cl.min(),hc.empty(),0)}static newFoundDocument(t,e,n,i){return new fc(t,1,e,cl.min(),n,i,0)}static newNoDocument(t,e){return new fc(t,2,e,cl.min(),cl.min(),hc.empty(),0)}static newUnknownDocument(t,e){return new fc(t,3,e,cl.min(),cl.min(),hc.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(cl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cl.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof fc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,e){this.position=t,this.inclusive=e}}function gc(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?pl.comparator(pl.fromName(o.referenceValue),n.key):nc(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function mc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tc(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,e="asc"){this.field=t,this.dir=e}}function vc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{}class bc extends wc{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Dc(t,e,n):"array-contains"===e?new Rc(t,n):"in"===e?new Lc(t,n):"not-in"===e?new xc(t,n):"array-contains-any"===e?new Mc(t,n):new bc(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new kc(t,n):new Nc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(nc(e,this.value)):null!==e&&Zl(this.value)===Zl(e)&&this.matchesComparison(nc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return za()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ec extends wc{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new Ec(t,e)}matches(t){return _c(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function _c(t){return"and"===t.op}function Tc(t){return Sc(t)&&_c(t)}function Sc(t){for(const e of t.filters)if(e instanceof Ec)return!1;return!0}function Ic(t){if(t instanceof bc)return t.field.canonicalString()+t.op.toString()+rc(t.value);if(Tc(t))return t.filters.map((t=>Ic(t))).join(",");{const e=t.filters.map((t=>Ic(t))).join(",");return`${t.op}(${e})`}}function Cc(t,e){return t instanceof bc?function(t,e){return e instanceof bc&&t.op===e.op&&t.field.isEqual(e.field)&&tc(t.value,e.value)}(t,e):t instanceof Ec?function(t,e){return e instanceof Ec&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Cc(n,e.filters[i])),!0)}(t,e):void za()}function Ac(t){return t instanceof bc?function(t){return`${t.field.canonicalString()} ${t.op} ${rc(t.value)}`}(t):t instanceof Ec?function(t){return t.op.toString()+" {"+t.getFilters().map(Ac).join(" ,")+"}"}(t):"Filter"}class Dc extends bc{constructor(t,e,n){super(t,e,n),this.key=pl.fromName(n.referenceValue)}matches(t){const e=pl.comparator(t.key,this.key);return this.matchesComparison(e)}}class kc extends bc{constructor(t,e){super(t,"in",e),this.keys=Oc("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Nc extends bc{constructor(t,e){super(t,"not-in",e),this.keys=Oc("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Oc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>pl.fromName(t.referenceValue)))}class Rc extends bc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ac(e)&&ec(e.arrayValue,this.value)}}class Lc extends bc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ec(this.value.arrayValue,e)}}class xc extends bc{constructor(t,e){super(t,"not-in",e)}matches(t){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ec(this.value.arrayValue,e)}}class Mc extends bc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ac(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>ec(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function Uc(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Pc(t,e,n,i,r,s,o)}function Fc(t){const e=qa(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ic(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Cl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>rc(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>rc(t))).join(",")),e.ce=t}return e.ce}function Vc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cc(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mc(t.startAt,e.startAt)&&mc(t.endAt,e.endAt)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bc{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function jc(t,e,n,i,r,s,o,a){return new Bc(t,e,n,i,r,s,o,a)}function $c(t){return new Bc(t)}function Hc(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function zc(t){return null!==t.collectionGroup}function Gc(t){const e=qa(t);if(null===e.le){e.le=[];const t=new Set;for(const r of e.explicitOrderBy)e.le.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Fl(fl.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new yc(i,n))})),t.has(fl.keyField().canonicalString())||e.le.push(new yc(fl.keyField(),n))}return e.le}function qc(t){const e=qa(t);return e.he||(e.he=Kc(e,Gc(t))),e.he}function Kc(t,e){if("F"===t.limitType)return Uc(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new yc(t.field,e)}));const n=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return Uc(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Wc(t,e,n){return new Bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qc(t,e){return Vc(qc(t),qc(e))&&t.limitType===e.limitType}function Xc(t){return`${Fc(qc(t))}|lt:${t.limitType}`}function Yc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Ac(t))).join(", ")}]`),Cl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>rc(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>rc(t))).join(",")),`Target(${e})`}(qc(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):pl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Gc(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=gc(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Gc(t),e))&&!(t.endAt&&!function(t,e,n){const i=gc(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Gc(t),e))}(t,e)}function Zc(t){return(e,n)=>{let i=!1;for(const r of Gc(t)){const t=tu(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function tu(t,e,n){const i=t.field.isKeyField()?pl.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?nc(i,r):za()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return za()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ll(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return xl(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Ml(pl.comparator);function iu(){return nu}const ru=new Ml(pl.comparator);function su(...t){let e=ru;for(const n of t)e=e.insert(n.key,n);return e}function ou(t){let e=ru;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function au(){return cu()}function lu(){return cu()}function cu(){return new eu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const uu=new Ml(pl.comparator),hu=new Fl(pl.comparator);function du(...t){let e=hu;for(const n of t)e=e.add(n);return e}const fu=new Fl(ol);function pu(){return fu}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Al(e)?"-0":e}}function mu(t){return{integerValue:""+t}}function yu(t,e){return Dl(e)?mu(e):gu(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function wu(t,e,n){return t instanceof _u?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Kl(e)&&(e=Wl(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Tu?Su(t,e):t instanceof Iu?Cu(t,e):function(t,e){const n=Eu(t,e),i=Du(n)+Du(t.Ie);return oc(n)&&oc(t.Ie)?mu(i):gu(t.serializer,i)}(t,e)}function bu(t,e,n){return t instanceof Tu?Su(t,e):t instanceof Iu?Cu(t,e):n}function Eu(t,e){return t instanceof Au?function(t){return oc(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class _u extends vu{}class Tu extends vu{constructor(t){super(),this.elements=t}}function Su(t,e){const n=ku(e);for(const i of t.elements)n.some((t=>tc(t,i)))||n.push(i);return{arrayValue:{values:n}}}class Iu extends vu{constructor(t){super(),this.elements=t}}function Cu(t,e){let n=ku(e);for(const i of t.elements)n=n.filter((t=>!tc(t,i)));return{arrayValue:{values:n}}}class Au extends vu{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Du(t){return Gl(t.integerValue||t.doubleValue)}function ku(t){return ac(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Tu&&e instanceof Tu||t instanceof Iu&&e instanceof Iu?al(t.elements,e.elements,tc):t instanceof Au&&e instanceof Au?tc(t.Ie,e.Ie):t instanceof _u&&e instanceof _u}(t.transform,e.transform)}class Ou{constructor(t,e){this.version=t,this.transformResults=e}}class Ru{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ru}static exists(t){return new Ru(void 0,t)}static updateTime(t){return new Ru(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Lu(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class xu{}function Mu(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Gu(t.key,Ru.none()):new Bu(t.key,t.data,Ru.none());{const n=t.data,i=hc.empty();let r=new Fl(fl.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new ju(t.key,i,new Bl(r.toArray()),Ru.none())}}function Pu(t,e,n){t instanceof Bu?function(t,e,n){const i=t.value.clone(),r=Hu(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ju?function(t,e,n){if(!Lu(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Hu(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll($u(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Uu(t,e,n,i){return t instanceof Bu?function(t,e,n,i){if(!Lu(t.precondition,e))return n;const r=t.value.clone(),s=zu(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof ju?function(t,e,n,i){if(!Lu(t.precondition,e))return n;const r=zu(t.fieldTransforms,i,e),s=e.data;return s.setAll($u(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return Lu(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Fu(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Eu(i.transform,t||null);null!=r&&(null===n&&(n=hc.empty()),n.set(i.field,r))}return n||null}function Vu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&al(t,e,((t,e)=>Nu(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends xu{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ju extends xu{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function $u(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function Hu(t,e,n){const i=new Map;Ga(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,bu(o,a,n[r]))}return i}function zu(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,wu(t,s,e))}return i}class Gu extends xu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qu extends xu{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&Pu(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Uu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Uu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=lu();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Mu(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(cl.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),du())}isEqual(t){return this.batchId===t.batchId&&al(this.mutations,t.mutations,((t,e)=>Vu(t,e)))&&al(this.baseMutations,t.baseMutations,((t,e)=>Vu(t,e)))}}class Wu{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Ga(t.mutations.length===n.length);let i=function(){return uu}();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Wu(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xu,Yu;function Ju(t){switch(t){default:return za();case Ka.CANCELLED:case Ka.UNKNOWN:case Ka.DEADLINE_EXCEEDED:case Ka.RESOURCE_EXHAUSTED:case Ka.INTERNAL:case Ka.UNAVAILABLE:case Ka.UNAUTHENTICATED:return!1;case Ka.INVALID_ARGUMENT:case Ka.NOT_FOUND:case Ka.ALREADY_EXISTS:case Ka.PERMISSION_DENIED:case Ka.FAILED_PRECONDITION:case Ka.ABORTED:case Ka.OUT_OF_RANGE:case Ka.UNIMPLEMENTED:case Ka.DATA_LOSS:return!0}}function Zu(t){if(void 0===t)return ja("GRPC error has no .code"),Ka.UNKNOWN;switch(t){case Xu.OK:return Ka.OK;case Xu.CANCELLED:return Ka.CANCELLED;case Xu.UNKNOWN:return Ka.UNKNOWN;case Xu.DEADLINE_EXCEEDED:return Ka.DEADLINE_EXCEEDED;case Xu.RESOURCE_EXHAUSTED:return Ka.RESOURCE_EXHAUSTED;case Xu.INTERNAL:return Ka.INTERNAL;case Xu.UNAVAILABLE:return Ka.UNAVAILABLE;case Xu.UNAUTHENTICATED:return Ka.UNAUTHENTICATED;case Xu.INVALID_ARGUMENT:return Ka.INVALID_ARGUMENT;case Xu.NOT_FOUND:return Ka.NOT_FOUND;case Xu.ALREADY_EXISTS:return Ka.ALREADY_EXISTS;case Xu.PERMISSION_DENIED:return Ka.PERMISSION_DENIED;case Xu.FAILED_PRECONDITION:return Ka.FAILED_PRECONDITION;case Xu.ABORTED:return Ka.ABORTED;case Xu.OUT_OF_RANGE:return Ka.OUT_OF_RANGE;case Xu.UNIMPLEMENTED:return Ka.UNIMPLEMENTED;case Xu.DATA_LOSS:return Ka.DATA_LOSS;default:return za()}}(Yu=Xu||(Xu={}))[Yu.OK=0]="OK",Yu[Yu.CANCELLED=1]="CANCELLED",Yu[Yu.UNKNOWN=2]="UNKNOWN",Yu[Yu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yu[Yu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yu[Yu.NOT_FOUND=5]="NOT_FOUND",Yu[Yu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yu[Yu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yu[Yu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yu[Yu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yu[Yu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yu[Yu.ABORTED=10]="ABORTED",Yu[Yu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yu[Yu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yu[Yu.INTERNAL=13]="INTERNAL",Yu[Yu.UNAVAILABLE=14]="UNAVAILABLE",Yu[Yu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
new xa([4294967295,4294967295],0);(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"}})(),(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}})(),(()=>{const t={and:"AND",or:"OR"}})();class th{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function eh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nh(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ih(t,e){return eh(t,e.toTimestamp())}function rh(t){return Ga(!!t),cl.fromTimestamp(function(t){const e=zl(t);return new ll(e.seconds,e.nanos)}(t))}function sh(t,e){return function(t){return new hl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function oh(t){const e=hl.fromString(t);return Ga(vh(e)),e}function ah(t,e){return sh(t.databaseId,e.path)}function lh(t){const e=oh(t);return 4===e.length?hl.emptyPath():uh(e)}function ch(t){return new hl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uh(t){return Ga(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function hh(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function dh(t,e){let n;if(e instanceof Bu)n={update:hh(t,e.key,e.value)};else if(e instanceof Gu)n={delete:ah(t,e.key)};else if(e instanceof ju)n={update:hh(t,e.key,e.data),updateMask:yh(e.fieldMask)};else{if(!(e instanceof qu))return za();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof _u)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Iu)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Au)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw za()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ih(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:za()}(t,e.precondition)),n}function fh(t,e){return t&&t.length>0?(Ga(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?rh(t.updateTime):rh(e);return n.isEqual(cl.min())&&(n=rh(e)),new Ou(n,t.transformResults||[])}(t,e)))):[]}function ph(t){let e=lh(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ga(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=gh(t);return e instanceof Ec&&Tc(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new yc(mh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Cl(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new pc(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new pc(n,e)}(n.endAt)),jc(e,r,o,s,a,"F",l,c)}function gh(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=mh(t.unaryFilter.field);return bc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=mh(t.unaryFilter.field);return bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mh(t.unaryFilter.field);return bc.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=mh(t.unaryFilter.field);return bc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return za()}}(t):void 0!==t.fieldFilter?function(t){return bc.create(mh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return za()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Ec.create(t.compositeFilter.filters.map((t=>gh(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return za()}}(t.compositeFilter.op))}(t):za()}function mh(t){return fl.fromServerFormat(t.fieldPath)}function yh(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t){this.ut=t}}function bh(t){const e=ph({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wc(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et(Gl(t.integerValue));else if("doubleValue"in t){const n=Gl(t.doubleValue);isNaN(n)?this.Tt(e,13):(this.Tt(e,15),Al(n)?e.Et(0):e.Et(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Tt(e,20),"string"==typeof n?e.dt(n):(e.dt(`${n.seconds||""}`),e.Et(n.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt(ql(t.bytesValue)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Tt(e,45),e.Et(n.latitude||0),e.Et(n.longitude||0)}else"mapValue"in t?uc(t)?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):za()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){const n=t.fields||{};this.Tt(e,55);for(const i of Object.keys(n))this.At(i,e),this.Pt(n[i],e)}yt(t,e){const n=t.values||[];this.Tt(e,50);for(const i of n)this.Pt(i,e)}ft(t,e){this.Tt(e,37),pl.fromName(t).path.forEach((t=>{this.Tt(e,60),this.wt(t,e)}))}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}Eh.St=new Eh;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _h{constructor(){this.on=new Th}addToCollectionParentIndex(t,e){return this.on.add(e),Tl.resolve()}getCollectionParents(t,e){return Tl.resolve(this.on.getEntries(e))}addFieldIndex(t,e){return Tl.resolve()}deleteFieldIndex(t,e){return Tl.resolve()}deleteAllFieldIndexes(t){return Tl.resolve()}createTargetIndexes(t,e){return Tl.resolve()}getDocumentsMatchingTarget(t,e){return Tl.resolve(null)}getIndexType(t,e){return Tl.resolve(0)}getFieldIndexes(t,e){return Tl.resolve([])}getNextCollectionGroupToUpdate(t){return Tl.resolve(null)}getMinOffset(t,e){return Tl.resolve(vl.min())}getMinOffsetFromCollectionGroup(t,e){return Tl.resolve(vl.min())}updateCollectionGroup(t,e,n){return Tl.resolve()}updateIndexEntries(t,e){return Tl.resolve()}}class Th{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Fl(hl.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Fl(hl.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Uint8Array(0);class Sh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Sh(t,Sh.DEFAULT_COLLECTION_PERCENTILE,Sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sh.DEFAULT_COLLECTION_PERCENTILE=10,Sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sh.DEFAULT=new Sh(41943040,Sh.DEFAULT_COLLECTION_PERCENTILE,Sh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sh.DISABLED=new Sh(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ih{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Ih(0)}static Nn(){return new Ih(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ch{constructor(){this.changes=new eu((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fc.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Tl.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ah{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Uu(n.mutation,t,Bl.empty(),ll.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,du()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=du()){const i=au();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=su();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=au();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,du())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=iu();const s=cu(),o=function(){return cu()}();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof ju)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Uu(o.mutation,e,o.mutation.getFieldMask(),ll.now())):s.set(e.key,Bl.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Ah(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=cu();let i=new Ml(((t,e)=>t-e)),r=du();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Bl.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||du()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=lu();l.forEach((t=>{if(!r.has(t)){const i=Mu(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return Tl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return pl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):zc(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Tl.resolve(au());let o=-1,a=r;return s.next((e=>Tl.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Tl.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,du()))).next((t=>({batchId:o,changes:ou(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pl(e)).next((t=>{let e=su();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=su();return this.indexManager.getCollectionParents(t,r).next((o=>Tl.forEach(o,(o=>{const a=function(t,e){return new Bc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,fc.newInvalidDocument(i)))}));let n=su();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Uu(s.mutation,i,Bl.empty(),ll.now()),Jc(e,i)&&(n=n.insert(t,i))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,e){return Tl.resolve(this.ur.get(e))}saveBundleMetadata(t,e){return this.ur.set(e.id,function(t){return{id:t.id,version:t.version,createTime:rh(t.createTime)}}(e)),Tl.resolve()}getNamedQuery(t,e){return Tl.resolve(this.cr.get(e))}saveNamedQuery(t,e){return this.cr.set(e.name,function(t){return{name:t.name,query:bh(t.bundledQuery),readTime:rh(t.readTime)}}(e)),Tl.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.overlays=new Ml(pl.comparator),this.lr=new Map}getOverlay(t,e){return Tl.resolve(this.overlays.get(e))}getOverlays(t,e){const n=au();return Tl.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.lt(t,e,i)})),Tl.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.lr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.lr.delete(n)),Tl.resolve()}getOverlaysForCollection(t,e,n){const i=au(),r=e.length+1,s=new pl(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Tl.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Ml(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=au(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=au(),a=r.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=i)break;return Tl.resolve(o)}lt(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Qu(e,n));let r=this.lr.get(e);void 0===r&&(r=du(),this.lr.set(e,r)),this.lr.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.hr=new Fl(Rh.Pr),this.Ir=new Fl(Rh.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,e){const n=new Rh(t,e);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.dr(new Rh(t,e))}Ar(t,e){t.forEach((t=>this.removeReference(t,e)))}Rr(t){const e=new pl(new hl([])),n=new Rh(e,t),i=new Rh(e,t+1),r=[];return this.Ir.forEachInRange([n,i],(t=>{this.dr(t),r.push(t.key)})),r}Vr(){this.hr.forEach((t=>this.dr(t)))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const e=new pl(new hl([])),n=new Rh(e,t),i=new Rh(e,t+1);let r=du();return this.Ir.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Rh(t,0),n=this.hr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Rh{constructor(t,e){this.key=t,this.gr=e}static Pr(t,e){return pl.comparator(t.key,e.key)||ol(t.gr,e.gr)}static Tr(t,e){return ol(t.gr,e.gr)||pl.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.pr=1,this.yr=new Fl(Rh.Pr)}checkEmpty(t){return Tl.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ku(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.yr=this.yr.add(new Rh(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Tl.resolve(s)}lookupMutationBatch(t,e){return Tl.resolve(this.wr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Sr(n),r=i<0?0:i;return Tl.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Tl.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(t){return Tl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Rh(e,0),i=new Rh(e,Number.POSITIVE_INFINITY),r=[];return this.yr.forEachInRange([n,i],(t=>{const e=this.wr(t.gr);r.push(e)})),Tl.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Fl(ol);return e.forEach((t=>{const e=new Rh(t,0),i=new Rh(t,Number.POSITIVE_INFINITY);this.yr.forEachInRange([e,i],(t=>{n=n.add(t.gr)}))})),Tl.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;pl.isDocumentKey(r)||(r=r.child(""));const s=new Rh(new pl(r),0);let o=new Fl(ol);return this.yr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.gr)),!0)}),s),Tl.resolve(this.br(o))}br(t){const e=[];return t.forEach((t=>{const n=this.wr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Ga(0===this.Dr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Tl.forEach(e.mutations,(i=>{const r=new Rh(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.yr=n}))}Fn(t){}containsKey(t,e){const n=new Rh(e,0),i=this.yr.firstAfterOrEqual(n);return Tl.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Tl.resolve()}Dr(t,e){return this.Sr(t)}Sr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}wr(t){const e=this.Sr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t){this.Cr=t,this.docs=function(){return new Ml(pl.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Cr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Tl.resolve(n?n.document.mutableCopy():fc.newInvalidDocument(e))}getEntries(t,e){let n=iu();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():fc.newInvalidDocument(t))})),Tl.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=iu();const s=e.path,o=new pl(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||wl(yl(o),n)<=0||(i.has(o.key)||Jc(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Tl.resolve(r)}getAllFromCollectionGroup(t,e,n,i){za()}vr(t,e){return Tl.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Mh(this)}getSize(t){return Tl.resolve(this.size)}}class Mh extends Ch{constructor(t){super(),this._r=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this._r.addEntry(t,i)):this._r.removeEntry(n)})),Tl.waitFor(e)}getFromCache(t,e){return this._r.getEntry(t,e)}getAllFromCache(t,e){return this._r.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t){this.persistence=t,this.Fr=new eu((t=>Fc(t)),Vc),this.lastRemoteSnapshotVersion=cl.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Oh,this.targetCount=0,this.Nr=Ih.On()}forEachTarget(t,e){return this.Fr.forEach(((t,n)=>e(n))),Tl.resolve()}getLastRemoteSnapshotVersion(t){return Tl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Tl.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),Tl.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Mr&&(this.Mr=e),Tl.resolve()}kn(t){this.Fr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Nr=new Ih(e),this.highestTargetId=e),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,e){return this.kn(e),this.targetCount+=1,Tl.resolve()}updateTargetData(t,e){return this.kn(e),Tl.resolve()}removeTargetData(t,e){return this.Fr.delete(e.target),this.Or.Rr(e.targetId),this.targetCount-=1,Tl.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Fr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Tl.waitFor(r).next((()=>i))}getTargetCount(t){return Tl.resolve(this.targetCount)}getTargetData(t,e){const n=this.Fr.get(e)||null;return Tl.resolve(n)}addMatchingKeys(t,e,n){return this.Or.Er(e,n),Tl.resolve()}removeMatchingKeys(t,e,n){this.Or.Ar(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Tl.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Or.Rr(e),Tl.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Or.mr(e);return Tl.resolve(n)}containsKey(t,e){return Tl.resolve(this.Or.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,e){this.Br={},this.overlays={},this.Lr=new Il(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Ph(this),this.indexManager=new _h,this.remoteDocumentCache=function(t){return new xh(t)}((t=>this.referenceDelegate.Qr(t))),this.serializer=new wh(e),this.Kr=new kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Nh,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Lh(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,e,n){Ba("MemoryPersistence","Starting transaction:",t);const i=new Fh(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((t=>this.referenceDelegate.Ur(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Wr(t,e){return Tl.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class Fh extends El{constructor(t){super(),this.currentSequenceNumber=t}}class Vh{constructor(t){this.persistence=t,this.Gr=new Oh,this.zr=null}static jr(t){return new Vh(t)}get Hr(){if(this.zr)return this.zr;throw za()}addReference(t,e,n){return this.Gr.addReference(n,e),this.Hr.delete(n.toString()),Tl.resolve()}removeReference(t,e,n){return this.Gr.removeReference(n,e),this.Hr.add(n.toString()),Tl.resolve()}markPotentiallyOrphaned(t,e){return this.Hr.add(e.toString()),Tl.resolve()}removeTarget(t,e){this.Gr.Rr(e.targetId).forEach((t=>this.Hr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Hr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}$r(){this.zr=new Set}Ur(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tl.forEach(this.Hr,(n=>{const i=pl.fromPath(n);return this.Jr(t,i).next((t=>{t||e.removeEntry(i,cl.min())}))})).next((()=>(this.zr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Jr(t,e).next((t=>{t?this.Hr.delete(e.toString()):this.Hr.add(e.toString())}))}Qr(t){return 0}Jr(t,e){return Tl.or([()=>Tl.resolve(this.Gr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Wr(t,e)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.ki=n,this.qi=i}static Qi(t,e){let n=du(),i=du();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Bh(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,e){this.Gi=t,this.indexManager=e,this.Ki=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.zi(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.ji(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new jh;return this.Hi(t,e,n).next((i=>{if(r.result=i,this.$i)return this.Ji(t,e,n,i.size)}))})).next((()=>r.result))}Ji(t,e,n,i){return n.documentReadCount<this.Ui?(Va()<=fe.DEBUG&&Ba("QueryEngine","SDK will not create cache indexes for query:",Yc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Tl.resolve()):(Va()<=fe.DEBUG&&Ba("QueryEngine","Query:",Yc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(Va()<=fe.DEBUG&&Ba("QueryEngine","The SDK decides to create cache indexes for query:",Yc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qc(e))):Tl.resolve())}zi(t,e){if(Hc(e))return Tl.resolve(null);let n=qc(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Wc(e,null,"F"),n=qc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=du(...i);return this.Gi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Yi(e,i);return this.Zi(e,s,r,n.readTime)?this.zi(t,Wc(e,null,"F")):this.Xi(t,s,e,n)}))))})))))}ji(t,e,n,i){return Hc(e)||i.isEqual(cl.min())?Tl.resolve(null):this.Gi.getDocuments(t,n).next((r=>{const s=this.Yi(e,r);return this.Zi(e,s,n,i)?Tl.resolve(null):(Va()<=fe.DEBUG&&Ba("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yc(e)),this.Xi(t,s,e,ml(i,-1)).next((t=>t)))}))}Yi(t,e){let n=new Fl(Zc(t));return e.forEach(((e,i)=>{Jc(t,i)&&(n=n.add(i))})),n}Zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Hi(t,e,n){return Va()<=fe.DEBUG&&Ba("QueryEngine","Using full collection scan to execute query:",Yc(e)),this.Gi.getDocumentsMatchingQuery(t,e,vl.min(),n)}Xi(t,e,n,i){return this.Gi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,e,n,i){this.persistence=t,this.es=e,this.serializer=i,this.ts=new Ml(ol),this.ns=new eu((t=>Fc(t)),Vc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(n)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ts)))}}function zh(t,e,n,i){return new Hh(t,e,n,i)}async function Gh(t,e){const n=qa(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.os(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=du();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({_s:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function qh(t,e){const n=qa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ss.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Tl.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Ga(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=du();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}function Kh(t){const e=qa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.qr.getLastRemoteSnapshotVersion(t)))}function Wh(t,e){const n=qa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class Qh{constructor(){this.activeTargetIds=pu()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Xh{constructor(){this.eo=new Qh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,e,n){this.no[t]=e}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Qh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{ro(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ba("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Ba("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh=null;function td(){return null===Zh?Zh=function(){return 268435456+Math.round(2147483648*Math.random())}():Zh++,"0x"+Zh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const ed={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="WebChannelConnection";class rd extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=e+"://"+t.host,this.fo=`projects/${n}/databases/${i}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get yo(){return!1}wo(t,e,n,i,r){const s=td(),o=this.So(t,e);Ba("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,i,r),this.Do(t,o,a,n).then((e=>(Ba("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw $a("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,r,s){return this.wo(t,e,n,i,r)}bo(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}So(t,e){const n=ed[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,e,n,i){const r=td();return new Promise(((s,o)=>{const a=new La;a.setWithCredentials(!0),a.listenOnce(Da.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Aa.NO_ERROR:const e=a.getResponseJson();Ba(id,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Aa.TIMEOUT:Ba(id,`RPC '${t}' ${r} timed out`),o(new Wa(Ka.DEADLINE_EXCEEDED,"Request time out"));break;case Aa.HTTP_ERROR:const n=a.getStatus();if(Ba(id,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ka).indexOf(e)>=0?e:Ka.UNKNOWN}(e.status);o(new Wa(t,e.message))}else o(new Wa(Ka.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Wa(Ka.UNAVAILABLE,"Connection failed."));break;default:za()}}finally{Ba(id,`RPC '${t}' ${r} completed.`)}}));const l=JSON.stringify(i);Ba(id,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",l,n,15)}))}vo(t,e,n){const i=td(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Ia(),o=Ca(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Oa({})),this.bo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Ba(id,`Creating RPC '${t}' stream ${i}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new nd({co:e=>{d?Ba(id,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Ba(id,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),Ba(id,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},lo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,Ra.EventType.OPEN,(()=>{d||Ba(id,`RPC '${t}' stream ${i} transport opened.`)})),p(u,Ra.EventType.CLOSE,(()=>{d||(d=!0,Ba(id,`RPC '${t}' stream ${i} transport closed`),f.Ro())})),p(u,Ra.EventType.ERROR,(e=>{d||(d=!0,$a(id,`RPC '${t}' stream ${i} transport errored:`,e),f.Ro(new Wa(Ka.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ra.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Ga(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ba(id,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Xu[t];if(void 0!==e)return Zu(e)}(e),r=o.message;void 0===n&&(n=Ka.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ro(new Wa(n,r)),u.close()}else Ba(id,`RPC '${t}' stream ${i} received:`,r),f.Vo(r)}})),p(o,ka.STAT_EVENT,(e=>{e.stat===Na.PROXY?Ba(id,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Na.NOPROXY&&Ba(id,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ao()}),0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return new th(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,e,n=1e3,i=1.5,r=6e4){this.si=t,this.timerId=e,this.Fo=n,this.Mo=i,this.xo=r,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const e=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,e-n);i>0&&Ba("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),t()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e,n,i,r,s,o,a){this.si=t,this.Ko=n,this.$o=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ad(t,e)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,e){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():e&&e.code===Ka.RESOURCE_EXHAUSTED?(ja(e.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):e&&e.code===Ka.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(e)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),e=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Uo===e&&this.s_(t,n)}),(e=>{t((()=>{const t=new Wa(Ka.UNKNOWN,"Fetching auth token failed: "+e.message);return this.o_(t)}))}))}s_(t,e){const n=this.i_(this.Uo);this.stream=this.__(t,e),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((t=>{n((()=>this.o_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(t){return Ba("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return e=>{this.si.enqueueAndForget((()=>this.Uo===t?e():(Ba("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cd extends ld{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,e){return this.connection.vo("Write",t,e)}onMessage(t){if(Ga(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const e=fh(t.writeResults,t.commitTime),n=rh(t.commitTime);return this.listener.I_(n,e)}return Ga(!t.writeResults||0===t.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=ch(this.serializer),this.e_(t)}P_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>dh(this.serializer,t)))};this.e_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Wa(Ka.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,e,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.wo(t,e,n,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ka.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Wa(Ka.UNKNOWN,t.toString())}))}Co(t,e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Co(t,e,n,r,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Ka.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Wa(Ka.UNKNOWN,t.toString())}))}terminate(){this.d_=!0}}class hd{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(t){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,"Online"===t&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ja(e),this.f_=!1):Ba("OnlineStateTracker",e)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=r,this.F_.ro((t=>{n.enqueueAndForget((async()=>{gd(this)&&(Ba("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=qa(t);e.C_.add(4),await pd(e),e.M_.set("Unknown"),e.C_.delete(4),await fd(e)}(this))}))})),this.M_=new hd(n,i)}}async function fd(t){if(gd(t))for(const e of t.v_)await e(!0)}async function pd(t){for(const e of t.v_)await e(!1)}function gd(t){return 0===qa(t).C_.size}async function md(t,e,n){if(!Sl(e))throw e;t.C_.add(1),await pd(t),t.M_.set("Offline"),n||(n=()=>Kh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ba("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await fd(t)}))}function yd(t,e){return e().catch((n=>md(t,n,e)))}async function vd(t){const e=qa(t),n=kd(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;wd(e);)try{const t=await Wh(e.localStore,i);if(null===t){0===e.b_.length&&n.Zo();break}i=t.batchId,bd(e,t)}catch(t){await md(e,t)}Ed(e)&&_d(e)}function wd(t){return gd(t)&&t.b_.length<10}function bd(t,e){t.b_.push(e);const n=kd(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function Ed(t){return gd(t)&&!kd(t).jo()&&t.b_.length>0}function _d(t){kd(t).start()}async function Td(t){kd(t).E_()}async function Sd(t){const e=kd(t);for(const n of t.b_)e.P_(n.mutations)}async function Id(t,e,n){const i=t.b_.shift(),r=Wu.from(i,e,n);await yd(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await vd(t)}async function Cd(t,e){e&&kd(t).h_&&await async function(t,e){if(function(t){return Ju(t)&&t!==Ka.ABORTED}(e.code)){const n=t.b_.shift();kd(t).Yo(),await yd(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await vd(t)}}(t,e),Ed(t)&&_d(t)}async function Ad(t,e){const n=qa(t);n.asyncQueue.verifyOperationInProgress(),Ba("RemoteStore","RemoteStore received new credentials");const i=gd(n);n.C_.add(3),await pd(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await fd(n)}async function Dd(t,e){const n=qa(t);e?(n.C_.delete(2),await fd(n)):e||(n.C_.add(2),await pd(n),n.M_.set("Unknown"))}function kd(t){return t.N_||(t.N_=function(t,e,n){const i=qa(t);return i.A_(),new cd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{ho:Td.bind(null,t),Io:Cd.bind(null,t),T_:Sd.bind(null,t),I_:Id.bind(null,t)}),t.v_.push((async e=>{e?(t.N_.Yo(),await vd(t)):(await t.N_.stop(),t.b_.length>0&&(Ba("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Nd{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Nd(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wa(Ka.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Od(t,e){if(ja("AsyncQueue",`${e}: ${t}`),Sl(t))return new Wa(Ka.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this.queries=new eu((t=>Xc(t)),Qc),this.onlineState="Unknown",this.q_=new Set}}function Ld(t){t.q_.forEach((t=>{t.next()}))}class xd{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new eu((t=>Xc(t)),Qc),this.fa=new Map,this.ga=new Set,this.pa=new Ml(pl.comparator),this.ya=new Map,this.wa=new Oh,this.Sa={},this.ba=new Map,this.Da=Ih.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Md(t,e,n){const i=Hd(t);try{const t=await function(t,e){const n=qa(t),i=ll.now(),r=e.reduce(((t,e)=>t.add(e.key)),du());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=iu(),l=du();return n.ss.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=Fu(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new ju(t.key,e,dc(e.value.mapValue),Ru.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:ou(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Sa[t.currentUser.toKey()];i||(i=new Ml(ol)),i=i.insert(e,n),t.Sa[t.currentUser.toKey()]=i}(i,t.batchId,n),await jd(i,t.changes),await vd(i.remoteStore)}catch(t){const e=Od(t,"Failed to persist write");n.reject(e)}}function Pd(t,e,n){const i=qa(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ma.forEach(((n,i)=>{const r=i.view.Q_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=qa(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.listeners)r.Q_(e)&&(i=!0)})),i&&Ld(n)}(i.eventManager,e),t.length&&i.Va.a_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ud(t,e){const n=qa(t),i=e.batch.batchId;try{const t=await qh(n.localStore,e);Bd(n,i,null),Vd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jd(n,t)}catch(t){await _l(t)}}async function Fd(t,e,n){const i=qa(t);try{const t=await function(t,e){const n=qa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Ga(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Bd(i,e,n),Vd(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await jd(i,t)}catch(n){await _l(n)}}function Vd(t,e){(t.ba.get(e)||[]).forEach((t=>{t.resolve()})),t.ba.delete(e)}function Bd(t,e,n){const i=qa(t);let r=i.Sa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}async function jd(t,e,n){const i=qa(t),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach(((t,a)=>{o.push(i.va(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=Bh.Qi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.Va.a_(r),await async function(t,e){const n=qa(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Tl.forEach(e,(e=>Tl.forEach(e.ki,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Tl.forEach(e.qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Sl(t))throw t;Ba("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ts.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ts=n.ts.insert(t,r)}}}(i.localStore,s))}async function $d(t,e){const n=qa(t);if(!n.currentUser.isEqual(e)){Ba("SyncEngine","User change. New user:",e.toKey());const t=await Gh(n.localStore,e);n.currentUser=e,function(t,e){t.ba.forEach((t=>{t.forEach((t=>{t.reject(new Wa(Ka.CANCELLED,e))}))})),t.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await jd(n,t._s)}}function Hd(t){const e=qa(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ud.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fd.bind(null,e),e}class zd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=od(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return zh(this.persistence,new $h,t.initialUser,this.serializer)}createPersistence(t){return new Uh(Vh.jr,this.serializer)}createSharedClientState(t){return new Xh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Pd(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=$d.bind(null,this.syncEngine),await Dd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Rd}()}createDatastore(t){const e=od(t.databaseInfo.databaseId),n=function(t){return new rd(t)}(t.databaseInfo);return function(t,e,n,i){return new ud(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new dd(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Pd(this.syncEngine,t,0)),function(){return Jh.D()?new Jh:new Yh}())}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new xd(t,e,n,i,r,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=qa(t);Ba("RemoteStore","RemoteStore shutting down."),e.C_.add(5),await pd(e),e.F_.shutdown(),e.M_.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qd{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Pa.UNAUTHENTICATED,this.clientId=sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ba("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ba("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wa(Ka.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Od(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),Ba("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Gh(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Wd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Xd(t);Ba("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>Ad(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Ad(e.remoteStore,n))),t._onlineComponents=e}function Qd(t){return"FirebaseError"===t.name?t.code===Ka.FAILED_PRECONDITION||t.code===Ka.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Xd(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ba("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Qd(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new zd)}}else Ba("FirestoreClient","Using default OfflineComponentProvider"),await Kd(t,new zd);return t._offlineComponents}async function Yd(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ba("FirestoreClient","Using user provided OnlineComponentProvider"),await Wd(t,t._uninitializedComponentsProvider._online)):(Ba("FirestoreClient","Using default OnlineComponentProvider"),await Wd(t,new Gd))),t._onlineComponents}function Jd(t){return Yd(t).then((t=>t.syncEngine))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zd(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const tf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e,n){if(!n)throw new Wa(Ka.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nf(t,e,n,i){if(!0===e&&!0===i)throw new Wa(Ka.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rf(t){if(!pl.isDocumentKey(t))throw new Wa(Ka.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sf(t){if(pl.isDocumentKey(t))throw new Wa(Ka.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function of(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":za()}function af(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wa(Ka.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(t);throw new Wa(Ka.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lf{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Wa(Ka.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wa(Ka.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}nf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zd(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Wa(Ka.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Wa(Ka.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Wa(Ka.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class cf{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wa(Ka.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Wa(Ka.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Ya;switch(t.type){case"firstParty":return new el(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Wa(Ka.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=tf.get(t);e&&(Ba("ComponentProvider","Removing Datastore"),tf.delete(t),e.terminate())}(this),Promise.resolve()}}function uf(t,e,n,i={}){var r;const s=(t=af(t,cf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Pa.MOCK_USER;else{e=Qt(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Wa(Ka.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Pa(s)}t._authCredentials=new Ja(new Xa(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new hf(this.firestore,t,this._query)}}class df{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ff(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new df(this.firestore,t,this._key)}}class ff extends hf{constructor(t,e,n){super(t,e,$c(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new df(this.firestore,null,new pl(t))}withConverter(t){return new ff(this.firestore,t,this._path)}}function pf(t,e,...n){if(t=se(t),ef("collection","path",e),t instanceof cf){const i=hl.fromString(e,...n);return sf(i),new ff(t,null,i)}{if(!(t instanceof df||t instanceof ff))throw new Wa(Ka.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(hl.fromString(e,...n));return sf(i),new ff(t.firestore,null,i)}}function gf(t,e,...n){if(t=se(t),1===arguments.length&&(e=sl.newId()),ef("doc","path",e),t instanceof cf){const i=hl.fromString(e,...n);return rf(i),new df(t,null,new pl(i))}{if(!(t instanceof df||t instanceof ff))throw new Wa(Ka.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(hl.fromString(e,...n));return rf(i),new df(t.firestore,t instanceof ff?t.converter:null,new pl(i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mf{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ad(this,"async_queue_retry"),this.iu=()=>{const t=sd();t&&Ba("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const t=sd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const e=sd();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise((()=>{}));const e=new Qa;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ya.push(t),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Sl(t))throw t;Ba("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(t){const e=this.Ja.then((()=>(this.tu=!0,t().catch((t=>{this.eu=t,this.tu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw ja("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.tu=!1,t))))));return this.Ja=e,e}enqueueAfterDelay(t,e,n){this.su(),this.ru.indexOf(t)>-1&&(e=0);const i=Nd.createAndSchedule(this,t,e,n,(t=>this.au(t)));return this.Xa.push(i),i}su(){this.eu&&za()}verifyOperationInProgress(){}async uu(){let t;do{t=this.Ja,await t}while(t!==this.Ja)}cu(t){for(const e of this.Xa)if(e.timerId===t)return!0;return!1}lu(t){return this.uu().then((()=>{this.Xa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Xa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.uu()}))}hu(t){this.ru.push(t)}au(t){const e=this.Xa.indexOf(t);this.Xa.splice(e,1)}}class yf extends cf{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=function(){return new mf}(),this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bf(this),this._firestoreClient.terminate()}}function vf(t,e){const n="object"==typeof t?t:On(),i="string"==typeof t?t:e||"(default)",r=In(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=qt("firestore");t&&uf(r,...t)}return r}function wf(t){return t._firestoreClient||bf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bf(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new Xl(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Zd(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new qd(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ef{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ef($l.fromBase64String(t))}catch(t){throw new Wa(Ka.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Ef($l.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Wa(Ka.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fl(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tf{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Wa(Ka.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Wa(Ka.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ol(this._lat,t._lat)||ol(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=/^__.*__$/;class Cf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new ju(t,this.data,this.fieldMask,e,this.fieldTransforms):new Bu(t,this.data,e,this.fieldTransforms)}}function Af(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw za()}}class Df{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Pu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Df(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Au(t),i}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Vf(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(0===t.length)throw this.mu("Document fields must not be empty");if(Af(this.Iu)&&If.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class kf{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||od(t)}pu(t,e,n,i=!1){return new Df({Iu:t,methodName:e,gu:n,path:fl.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(t){const e=t._freezeSettings(),n=od(t._databaseId);return new kf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Of(t,e,n,i,r,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,r);Mf("Data must be an object, but it was:",o,i);const a=Lf(i,o);let l,c;if(s.merge)l=new Bl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Pf(e,i,n);if(!o.contains(r))throw new Wa(Ka.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Bf(t,r)||t.push(r)}l=new Bl(t),c=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=o.fieldTransforms;return new Cf(new hc(a),l,c)}function Rf(t,e){if(xf(t=se(t)))return Mf("Unsupported field value:",e,t),Lf(t,e);if(t instanceof Tf)return function(t,e){if(!Af(e.Iu))throw e.mu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.mu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Rf(r,e.Vu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=se(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ll.fromDate(t);return{timestampValue:eh(e.serializer,n)}}if(t instanceof ll){const n=new ll(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eh(e.serializer,n)}}if(t instanceof Sf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ef)return{bytesValue:nh(e.serializer,t._byteString)};if(t instanceof df){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.mu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:sh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.mu(`Unsupported field value: ${of(t)}`)}(t,e)}function Lf(t,e){const n={};return xl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ll(t,((t,i)=>{const r=Rf(i,e.Eu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function xf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ll||t instanceof Sf||t instanceof Ef||t instanceof df||t instanceof Tf)}function Mf(t,e,n){if(!xf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=of(n);throw"an object"===i?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function Pf(t,e,n){if((e=se(e))instanceof _f)return e._internalPath;if("string"==typeof e)return Ff(t,e);throw Vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Uf=new RegExp("[~\\*/\\[\\]]");function Ff(t,e,n){if(e.search(Uf)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _f(...e.split("."))._internalPath}catch(ci){throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Wa(Ka.INVALID_ARGUMENT,a+t+l)}function Bf(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jf(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}function $f(t,e){const n=af(t.firestore,yf),i=gf(t),r=jf(t.converter,e);return Hf(n,[Of(Nf(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ru.exists(!1))]).then((()=>i))}function Hf(t,e){return function(t,e){const n=new Qa;return t.asyncQueue.enqueueAndForget((async()=>Md(await Jd(t),e,n))),n.promise}(wf(t),e)}new WeakMap;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){Ua=t}(kn),Sn(new oe("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new yf(new Za(t.getProvider("auth-internal")),new il(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wa(Ka.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Rn(Ma,"4.3.2",t),Rn(Ma,"4.3.2","esm2017")}();var zf="firebase",Gf="10.6.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Rn(zf,Gf,"app");const qf={apiKey:"AIzaSyBCqBimo-rgirF35NfWSLMmSoNa5CS-37UI",authDomain:"portfolio-e7f7a.firebaseapp.com",projectId:"portfolio-e7f7a",storageBucket:"portfolio-e7f7a.appspot.com",messagingSenderId:"938384570628",appId:"1:938384570628:web:ccc4b70de3d6574066f851"},Kf=Nn(qf),Wf=vf(Kf),Qf="contacts";async function Xf(t){await $f(pf(Wf,Qf),t)}const Yf=t=>((0,i.dD)("data-v-72aaa4f6"),t=t(),(0,i.Cn)(),t),Jf={id:"contact-me",class:"secondary-background"},Zf=Yf((()=>(0,i._)("h1",{style:{"text-align":"center"}},"Get in touch",-1))),tp={id:"contact-form"},ep=Yf((()=>(0,i._)("label",null,"Name",-1))),np=Yf((()=>(0,i._)("label",null,"Subject",-1))),ip=Yf((()=>(0,i._)("label",null,"Email",-1))),rp=Yf((()=>(0,i._)("label",null,"Message",-1)));var sp={__name:"ContactSection",setup(t){const e=(0,r.iH)(""),n=(0,r.iH)(""),o=(0,r.iH)(""),a=(0,r.iH)(""),c=(0,r.iH)(!1),u=(0,r.iH)(""),h=(0,r.iH)(!0);function d(){e.value&&n.value&&o.value&&a.value?f(o.value)?(Xf({name:e.value,subject:n.value,email:o.value,msg:a.value}),u.value="‚úî‚ÄÉMessage sent!",h.value=!1,e.value=null,n.value=null,o.value=null,a.value=null):(u.value="You entered an invalid email!",h.value=!0):(u.value="Please fill in all fields!",h.value=!0),c.value=!0,setTimeout((()=>{c.value=!1}),3e3)}function f(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}return(t,f)=>{const p=(0,i.Q2)("motion-fade-visible");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Jf,[Zf,(0,i._)("div",tp,[ep,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[0]||(f[0]=t=>e.value=t),type:"text",name:"name",class:"input-field",placeholder:"John Doe"},null,512),[[s.nr,e.value]]),np,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[1]||(f[1]=t=>n.value=t),type:"text",name:"subject",class:"input-field",placeholder:"Work offer from the USA"},null,512),[[s.nr,n.value]]),ip,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":f[2]||(f[2]=t=>o.value=t),type:"text",name:"email",class:"input-field",placeholder:"john.doe@gmail.com"},null,512),[[s.nr,o.value]]),rp,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":f[3]||(f[3]=t=>a.value=t),name:"message",class:"input-field",placeholder:"I'm really interested in your profile. Would you want to join a junior position in GameLoft's technology department?"},null,512),[[s.nr,a.value]]),(0,i._)("button",{id:"submit-btn",onClick:d},"SEND")])])),[[p]]),(0,i.Wm)((0,r.SU)(W),{"show-toaster":c.value,"is-danger":h.value},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(u.value),1)])),_:1},8,["show-toaster","is-danger"])],64)}}};const op=(0,h.Z)(sp,[["__scopeId","data-v-72aaa4f6"]]);var ap=op,lp={__name:"HomePage",setup(t){return(t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)((0,r.SU)(z)),(0,i.Wm)((0,r.SU)(pt)),(0,i.Wm)((0,r.SU)(Rt)),(0,i.Wm)((0,r.SU)(ap))],64))}};const cp=lp;var up=cp},6762:function(t,e,n){var i={"./api-customer-order.png":196,"./bulky-book-web.png":8247,"./customer-order-web.png":8772,"./github-profile.png":9057,"./music-player.png":3131,"./plan-s.png":5236,"./self-taught.png":1941};function r(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id=6762},196:function(t,e,n){"use strict";t.exports=n.p+"img/api-customer-order.12eecb26.png"},8247:function(t,e,n){"use strict";t.exports=n.p+"img/bulky-book-web.ca7c0ed0.png"},8772:function(t,e,n){"use strict";t.exports=n.p+"img/customer-order-web.14dc52e3.png"},9057:function(t,e,n){"use strict";t.exports=n.p+"img/github-profile.4fd0d4b4.png"},3131:function(t,e,n){"use strict";t.exports=n.p+"img/music-player.fecf99be.png"},5236:function(t,e,n){"use strict";t.exports=n.p+"img/plan-s.e9ca654d.png"},1941:function(t,e,n){"use strict";t.exports=n.p+"img/self-taught.fe90a4a4.png"}}]);
//# sourceMappingURL=671.0b53e8fa.js.map